import{d as F,m as V,e as a,k as D,l as p,p as U,r as T,q as ee,w as l,a as e,t,s as o,v as m,c as _,x as B,F as O,y as P,n as A,u as z,z as Y,A as te,B as K,C as oe,D as se,E as G,G as q,H as ne,_ as H,I as R,J as ie,K as le}from"./index.6c0a173f.js";import{c as L,l as W,g as N}from"./googleApi.619aee65.js";import{_ as j}from"./ContextMenuPage.vuevuetypescriptsetuptruelang.a0f0eb6f.js";import{_ as ae}from"./vite-drive.c72a7c9b.js";const re=F({__name:"MessageModal",setup(C){return L().$emitter.on("show-success-msg",c=>{V.success(c)}),V.config({maxCount:1}),(c,i)=>{const u=p("a-space");return a(),D(u)}}}),ce={class:"info set-item-center flex-col"},de=F({__name:"UploadProgressModal",setup(C){const v=L(),y=W(),c=v.$emitter,i=U({"0%":"#108ee9","100%":"#87d068"}),u=T(!1),n=T(!1);c.on("show-upload-progress",k);const w=ee(()=>(y.getProgress===100&&f(),y.getProgress));function f(){setTimeout(()=>{n.value=!1,setTimeout(()=>{y.uploadProgress(0)},2e3)},1500)}function k(){n.value=!0}return($,d)=>{const s=p("a-progress"),g=p("a-modal");return a(),D(g,{visible:n.value,"onUpdate:visible":d[0]||(d[0]=S=>n.value=S),wrapClassName:"loading-modal",okType:"create",width:"300px",footer:null,centered:"",maskClosable:u.value,closable:""},{default:l(()=>[e("div",ce,[e("p",null,t($.$t("File uploading...")),1),o(s,{type:"circle","stroke-color":i,percent:m(w)},null,8,["stroke-color","percent"])])]),_:1},8,["visible","maskClosable"])}}}),ue="/vite-google-drive-demo/assets/new.336a9a10.svg",me={class:"mt-[-40px] min-h-screen hidden md:block md:w-64",id:"side-menu"},_e={class:"out-side bg-white sticky top-[75px] left-5 w-fit"},pe={class:"new-file-area shadow-md h-12 w-[118px] border-1px rounded-full set-item-center p-5 cursor-pointer"},ve={class:"icon set-item-between ml-[-20px] w-20"},he=e("img",{src:ue},null,-1),fe={class:A("items-center")},$e={class:"select-area mt-[10px]"},ge=e("hr",null,null,-1),ye=F({__name:"SideMenu",setup(C){const v=z(),y=Y(),c=L(),i=c.$TYPE,u=c.$t,n=U({theme:"li",selectedKeys:["1"],openKeys:["sub1"]});async function w(d){await N.getFolderItemByAPI(d)}const f=T();async function k(){const d=await N.getDriveRootListByAPI();if(d===void 0)return;const s=d.filter(g=>g.mimeType===i.GOOGLE_FOLDER);f.value=s}function $(){y.path!=="/drive/my-drive"&&v.push("/drive/my-drive")}return(d,s)=>{const g=p("a-menu"),S=p("a-dropdown"),x=p("custom-icon"),I=p("a-sub-menu"),M=p("a-menu-item");return a(),_("div",me,[e("div",_e,[o(S,{trigger:["click"]},{overlay:l(()=>[o(g,null,{default:l(()=>[o(j)]),_:1})]),default:l(()=>[e("div",pe,[e("div",ve,[he,e("div",fe,t(m(u)("New")),1)])])]),_:1}),e("div",$e,[o(g,{class:"relative left-[-20px]",openKeys:n.openKeys,"onUpdate:openKeys":s[1]||(s[1]=r=>n.openKeys=r),selectedKeys:n.selectedKeys,"onUpdate:selectedKeys":s[2]||(s[2]=r=>n.selectedKeys=r),mode:"inline",style:{width:"240px",border:"none","max-height":"100vh","overflow-y":"overlay","overflow-x":"hidden"}},{default:l(()=>[o(I,{class:"my-drive-menu",key:"1",onClick:s[0]||(s[0]=r=>($(),k()))},{icon:l(()=>[o(x,{iconStr:"myDrive"})]),title:l(()=>[B(t(m(u)("My Drive")),1)]),default:l(()=>[(a(!0),_(O,null,P(f.value,(r,h)=>(a(),D(I,{key:h,onClick:E=>w(r.id)},{icon:l(()=>[o(x,{iconStr:"folder"})]),title:l(()=>[B(t(r.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),o(I,{key:"2"},{icon:l(()=>[o(x,{iconStr:"computer"})]),title:l(()=>[B(t(m(u)("Computer")),1)]),_:1}),o(M,{key:"3"},{icon:l(()=>[o(x,{iconStr:"sharedDrives"})]),default:l(()=>[e("span",null,t(m(u)("Shared drives")),1)]),_:1}),o(M,{key:"4"},{icon:l(()=>[o(x,{iconStr:"recent"})]),default:l(()=>[e("span",null,t(m(u)("Recent")),1)]),_:1}),o(M,{key:"5"},{icon:l(()=>[o(x,{iconStr:"starred"})]),default:l(()=>[e("span",null,t(m(u)("Starred")),1)]),_:1}),o(M,{key:"6"},{icon:l(()=>[o(x,{iconStr:"trash"})]),default:l(()=>[e("span",null,t(m(u)("Trash")),1)]),_:1}),ge,o(M,{key:"7"},{icon:l(()=>[o(x,{iconStr:"storage"})]),default:l(()=>[e("span",null,t(m(u)("Storage")),1)]),_:1})]),_:1},8,["openKeys","selectedKeys"])])])])}}}),we={id:"nav-bar"},xe={class:"nav-outside"},ke={class:"nav-inside flex items-center justify-start"},be=e("img",{class:"my-2.5 min-w-10 w-10 ml-[10px]",src:ae},null,-1),Ie={class:"hidden md:block ml-3 text-slate-500 text-[22px] min-w-[80px] whitespace-nowrap"},Se={class:"input ml-3 relative w-[400px] basis-[700px]"},Me={class:"flex items-center"},Te=["placeholder"],Ce={class:"search-result-area absolute top-11 border-solid border-2 border-gray-300 max-w-[500px] min-w-[230px] w-full min-h-[50px] max-h-[200px] overflow-auto bg-white rounded-b-lg"},De=["onClick"],Fe=["src"],Be={class:"name"},Le={class:"setting ml-7"},Oe=e("div",{class:"profile mr-10"},null,-1),Pe=F({__name:"navBar",setup(C){const v=L(),y=v.$utils,c=v.$emitter,i=v.$TYPE,{locale:u}=te(),n=z();c.on("clear-search-input",()=>{$.value=""});function w(r){u.value=r.key}const f=T(!1);function k(){f.value=!f.value}const $=T(""),d=T();async function s(){if($.value==="")return;const r=await N.searchFileByAPI($.value);d.value=r}const g=T();function S(){d.value=[],n.push({path:"/drive/search",query:{q:$.value}}),I()}function x(){n.replace("/drive/my-drive")}function I(){g.value!==void 0&&g.value.blur()}function M(r){if(r.mimeType===i.GOOGLE_FOLDER)return y.goToFolder(r.id);y.openFileView(r.webViewLink),I()}return(r,h)=>{const E=p("Icon"),J=p("a-menu-item"),Z=p("a-menu"),Q=p("a-dropdown");return a(),_("nav",we,[e("div",xe,[e("div",ke,[e("div",{class:"img-area set-item-center cursor-pointer md:mr-[60px] md:ml-5",onClick:h[0]||(h[0]=b=>x())},[be,e("div",Ie,t(r.$t("drive")),1)]),e("div",Se,[e("div",Me,[K(e("input",{class:"border max-w-[500px] min-w-[230px] w-full h-12 px-14 rounded-lg bg-slate-100 focus:bg-inherit placeholder:text-base",type:"text","onUpdate:modelValue":h[1]||(h[1]=b=>$.value=b),ref_key:"searchInput",ref:g,onKeyup:h[2]||(h[2]=b=>s()),onFocus:h[3]||(h[3]=b=>k()),onBlur:h[4]||(h[4]=b=>k()),onKeypress:h[5]||(h[5]=se(b=>S(),["enter"])),placeholder:r.$t("Search from Google Drive")},null,40,Te),[[oe,$.value]]),o(E,{class:"absolute top-3 left-3",icon:"carbon:search",color:"grayText",width:"25",height:"25"}),$.value!==""?(a(),D(E,{key:0,class:"cursor-pointer ml-[-50px]",onClick:h[6]||(h[6]=b=>$.value=""),icon:"iconoir:cancel",color:"grayText",width:"25",height:"25"})):G("",!0)]),K(e("div",Ce,[(a(!0),_(O,null,P(d.value,(b,X)=>(a(),_("div",{class:"search-result-item",key:X},[e("div",{class:"result-body hover:bg-slate-100 h-[50px] flex items-center",onClick:Ot=>M(b),onMousedown:h[7]||(h[7]=ne(()=>{},["prevent"]))},[e("img",{class:"h-5 w-5 ml-[10px] mr-[10px]",src:m(y).setIcon(b.iconLink)},null,8,Fe),e("div",Be,t(b.name),1)],40,De)]))),128))],512),[[q,d.value!==void 0&&d.value.length>0&&$.value!==""&&f.value]])]),e("div",Le,[o(Q,{trigger:["click"]},{overlay:l(()=>[o(Z,{onClick:w,modelValue:r.$i18n.locale,"onUpdate:modelValue":h[8]||(h[8]=b=>r.$i18n.locale=b)},{default:l(()=>[(a(!0),_(O,null,P(r.$i18n.availableLocales,b=>(a(),D(J,{key:`${b}`},{default:l(()=>[B(t(b),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),default:l(()=>[o(E,{class:"cursor-pointer focus:outline-none",icon:"ant-design:setting-outlined",color:"grayText",width:"25",height:"25"},{default:l(()=>[B(t(r.$t("language")),1)]),_:1})]),_:1})]),Oe])])])}}}),Ee={class:"border-1px h-12 bg-white set-item-start",id:"bread-crumbs"},Ue={class:"side-menu"},Ke={class:"content md:pl-64 pl-6 w-100 text-slate-500 text-lg shrink-0"},Ge=F({__name:"BreadCrumbs",emits:["openInfoMenu"],setup(C,{emit:v}){const c=L().$t,i=Y();function u(){if(i.name==="my-drive"||i.name==="my-drive-folders")return c("My Drive");if(i.name==="search-result-page")return c("Search result")}function n(){v("openInfoMenu")}return(w,f)=>{const k=p("a-menu"),$=p("Icon"),d=p("a-dropdown"),s=p("custom-icon");return a(),_("div",Ee,[e("div",Ue,[o(d,{trigger:["click"]},{overlay:l(()=>[o(k,null,{default:l(()=>[o(j)]),_:1})]),default:l(()=>[o($,{class:"ml-4 md:hidden",icon:"material-symbols:menu",color:"grayText",width:"25",height:"25"})]),_:1})]),e("div",Ke,t(u()),1),e("div",{class:"control-icon hidden md:block 2xl:ml-[65%] xl:ml-[55%] lg:ml-[45%] md:ml-[35%] cursor-pointer",onClick:f[0]||(f[0]=g=>n())},[o(s,{iconStr:"info"})])])}}}),Ne={key:0,class:"noChooseFile"},Ve={class:"img-area flex flex-col mt-5"},Re={class:"img"},Ae={class:"text mt-5 opacity-60 mx-auto"},ze={key:1,class:"info-area"},Ye={class:"img h-36 w-full border-1px set-item-center overflow-hidden"},qe=["src"],He={class:"info-detail p-4"},We={class:"has-access text-lg opacity-75"},je={class:"access mt-5 mb-5 overflow-auto max-h-[60px]"},Je={class:"access-info"},Ze={class:"access-arr set-item-start mb-1"},Qe=["src"],Xe={class:"access"},et={key:1,class:"access-info set-item-start h-14"},tt={class:"no-shared ml-4"},ot={class:"system-properties"},st={class:"title text-lg opacity-75 title-color mb-2"},nt={class:"w-28"},it={key:0},lt={key:1},at=F({__name:"InfoMenuDetail",setup(C){const v=L(),y=v.$emitter,c=v.$TYPE,i=v.$t,u=v.$utils,n=T();y.on("send-file-data",s=>{n.value=s});function w(s,g=1){if(s===void 0)return!1;const S=parseInt(s);if(S===0)return"0 Bytes";const x=1024,I=g<0?0:g,M=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(S)/Math.log(x));return parseFloat((S/Math.pow(x,r)).toFixed(I))+" "+M[r]}function f(s){return new Date(s).toLocaleString()}function k(s){return s===c.IMG?i("Image"):s===c.WORD?"Word":s===c.GOOGLE_SHEETS?i("Google Sheets"):s===c.PDF?"PDF":s===c.GOOGLE_FOLDER?i("Google Drive Folder"):s===c.GOOGLE_DOCS?i("Google Docs"):i("Other")}function $(s){return s.displayName===void 0?i("Anyone with link"):s.displayName!==void 0&&s.role==="owner"?s.displayName+i("is owner"):s.displayName}function d(s){return s.owners[0].me?i("Me"):""}return(s,g)=>{var M;const S=p("custom-icon"),x=p("Icon"),I=p("a-tooltip");return n.value==null?(a(),_("div",Ne,[e("div",Ve,[e("div",Re,[o(S,{iconStr:"fileDetail"})]),e("div",Ae,t(m(i)("Select a file or folder to view its details")),1)])])):(a(),_("div",ze,[e("div",Ye,[n.value.thumbnailLink!==void 0?(a(),_("img",{key:0,class:"h-full",referrerPolicy:"no-referrer",src:m(u).setIcon(n.value.thumbnailLink)},null,8,qe)):(a(),D(x,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"100",height:"100%"}))]),e("div",He,[e("div",We,t(m(i)("Who has access")),1),e("div",je,[n.value.shared?(a(!0),_(O,{key:0},P(n.value.permissions,r=>(a(),_("div",Je,[e("div",Ze,[r.photoLink!==void 0?(a(),_("img",{key:0,class:"h-6 mr-1 rounded-full",src:m(u).setIcon(r.photoLink)},null,8,Qe)):(a(),D(x,{key:1,class:"bg-lime-600 mr-1 rounded-full",icon:"ci:link",color:"#FFFFFF",width:"25",height:"25"})),e("div",Xe,t($(r)),1)])]))),256)):(a(),_("div",et,[o(S,{iconStr:"noShare"}),e("div",tt,t(m(i)("Not shared")),1)]))]),e("div",ot,[e("div",st,t(m(i)("System properties")),1),e("table",null,[e("tbody",null,[e("tr",null,[e("td",nt,t(m(i)("Type")),1),o(I,{placement:"bottom"},{title:l(()=>[B(t(n.value.mimeType),1)]),default:l(()=>[e("td",null,t(k(n.value.mimeType)),1)]),_:1})]),w(n.value.size)!==!1?(a(),_("tr",it,[e("td",null,t(m(i)("Size")),1),e("td",null,t(w(n.value.size)),1)])):G("",!0),w(n.value.quotaBytesUsed)!==!1?(a(),_("tr",lt,[e("td",null,t(m(i)("Storage used")),1),e("td",null,t(w(n.value.quotaBytesUsed)),1)])):G("",!0),e("tr",null,[e("td",null,t(m(i)("Location")),1),e("td",null,t((M=n.value.spaces)==null?void 0:M.join(",")),1)]),e("tr",null,[e("td",null,t(m(i)("Owner")),1),e("td",null,t(d(n.value)),1)]),e("tr",null,[e("td",null,t(m(i)("Modified")),1),e("td",null,t(f(n.value.modifiedTime)),1)]),e("tr",null,[e("td",null,t(m(i)("Opened")),1),e("td",null,t(f(n.value.viewedByMeTime)),1)]),e("tr",null,[e("td",null,t(m(i)("Created")),1),e("td",null,t(f(n.value.createdTime)),1)])])])])])]))}}}),rt={key:0,class:"noChooseFile"},ct={class:"img-area flex flex-col mt-5"},dt=e("div",{class:"img"},null,-1),ut={class:"text mt-5 mx-auto opacity-60"};function mt(C,v){return a(),_("div",rt,[e("div",ct,[dt,e("div",ut,t(C.$t("No activity")),1)])])}const _t={},pt=H(_t,[["render",mt]]),vt={class:"outer"},ht={class:"inside"},ft={class:"header"},$t={class:"header-info h-[72px] set-item-around"},gt={class:"file-name"},yt={key:0,class:"no-chose-data flex"},wt={class:"title text-[22px] text-slate-500"},xt={key:1,class:"has-data flex"},kt=["src"],bt={class:"title text-[22px] text-slate-500 w-40 truncate"},It={class:"header-control h-12 w-full set-item-around border-b-2"},St=["onClick"],Mt={class:"body"},Tt=F({__name:"InfoMenu",emits:["closeInfoMenu"],setup(C,{emit:v}){const y=L(),c=y.$utils,i=y.$emitter,u=U([{name:"Details",component:R(at)},{name:"Activity",component:R(pt)}]);function n(d){w.views=d}const w=U({views:u[0].component});function f(d){if(d===w.views)return!0}const k=T();i.on("send-file-data",d=>{k.value=d});function $(){v("closeInfoMenu")}return(d,s)=>{const g=p("custom-icon"),S=p("a-tooltip"),x=p("Icon");return a(),_("div",vt,[e("div",ht,[e("div",ft,[e("div",$t,[e("div",gt,[k.value==null?(a(),_("div",yt,[o(g,{iconStr:"myDrive"}),e("div",wt,t(d.$t("My Drive")),1)])):(a(),_("div",xt,[e("img",{class:"w-5 h-5 mt-2 mr-[10px] set-item-start",src:m(c).setIcon(k.value.iconLink)},null,8,kt),o(S,{placement:"bottom"},{title:l(()=>[B(t(k.value.name),1)]),default:l(()=>[e("div",bt,t(k.value.name),1)]),_:1})]))]),o(x,{class:"cursor-pointer",onClick:s[0]||(s[0]=I=>$()),icon:"iconoir:cancel",color:"grayText",width:"25",height:"25"})]),e("div",It,[(a(!0),_(O,null,P(u,(I,M)=>(a(),_("div",{class:A(["view w-[48%] h-[50px] set-item-center cursor-pointer opacity-80 border-b-4 border-transparent hover:border-b-4 hover:border-gray-500",{"book-mark":f(I.component)}]),onClick:r=>n(I.component),key:M},t(d.$t(I.name)),11,St))),128))])]),e("div",Mt,[(a(),D(le,null,[(a(),D(ie(w.views),{key:w.views}))],1024))])])])}}});const Ct=H(Tt,[["__scopeId","data-v-5702ae9a"]]),Dt={class:"home-page h-screen overflow-hidden relative z-50"},Ft={class:"page-content flex"},Bt={class:"conter w-full h-screen overflow-auto"},Lt={class:"right-menu hidden border-1px sticky top-0 md:block md:basis-[500px]"},Gt=F({__name:"MainLayout",setup(C){const v=W();y();function y(){if(window.sessionStorage.getItem("token")==null)return;const u=JSON.parse(window.sessionStorage.getItem("token")||"{}");v.changeTokenData(u)}const c=T(!0);function i(){c.value===!0?c.value=!1:c.value=!0}return(u,n)=>{const w=p("router-view");return a(),_(O,null,[e("div",Dt,[o(Pe,{class:"sticky top-0 z-50 bg-white shadow-md"}),o(Ge,{class:"sticky top-[60px] h-[50px]",onOpenInfoMenu:n[0]||(n[0]=f=>i())}),e("div",Ft,[o(ye,{class:"shrink-0"}),e("div",Bt,[o(w)]),K(e("div",Lt,[o(Ct,{onCloseInfoMenu:n[1]||(n[1]=f=>c.value=!1)})],512),[[q,c.value]])])]),o(re),o(de)],64)}}});export{Gt as default};
