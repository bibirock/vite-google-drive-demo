import{d as T,r as S,e as u,k as L,w as f,a as e,t as p,v as i,x as ne,B as q,C as Q,D as W,c as w,E as K,l as C,o as X,p as P,s as t,F as I,I as A,L as oe,M as se,z as le,J as ie,n as ae,y as N,H as z,_ as re}from"./index.6c0a173f.js";import{c as U,g as E}from"./googleApi.619aee65.js";import{_ as ce}from"./ContextMenuPage.vuevuetypescriptsetuptruelang.a0f0eb6f.js";import{L as de}from"./LoadingIcon.2d5db08d.js";const ue={class:"text-orange-600"},me={class:"text-red-600"},pe=["placeholder"],fe={key:0,class:"text-red-600"},Z=T({__name:"DeleteFileModal",props:{pageState:null},emits:["closeModal"],setup(_,{emit:v}){const a=_,k=U(),$=k.$emitter,s=k.$t;async function x(r){await E.toTrashFileByAPI(r),$.emit("show-success-msg",s("File moved to trash")),$.emit("refresh-page")}const c=S(""),l=S(!1);async function g(){if(c.value===a.pageState.name){x(a.pageState.id),v("closeModal");return}l.value=!0}return(r,d)=>{const h=C("a-modal");return u(),L(h,{visible:_.pageState.isShowMsg,"onUpdate:visible":d[2]||(d[2]=n=>_.pageState.isShowMsg=n),title:i(s)("Information"),"ok-text":i(s)("OK"),"cancel-text":i(s)("Cancel"),wrapClassName:"input-modal",okType:"create",width:"340px",centered:"",onOk:d[3]||(d[3]=n=>g())},{default:f(()=>[e("p",ue,p(i(s)("This action will trash your google drive file to the Bin, you need to enter file name confirm")),1),e("p",null,[ne(p(i(s)("Your file name is :"))+" ",1),e("span",me,p(_.pageState.name),1)]),q(e("input",{class:"w-full px-[10px] h-10 rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400","onUpdate:modelValue":d[0]||(d[0]=n=>c.value=n),onKeyup:d[1]||(d[1]=W(n=>g(),["enter"])),placeholder:i(s)("Please enter file name")},null,40,pe),[[Q,c.value,void 0,{trim:!0}]]),l.value?(u(),w("span",fe,p(i(s)("Name confirm error")),1)):K("",!0)]),_:1},8,["visible","title","ok-text","cancel-text"])}}}),ee=T({__name:"UpdateFileNameModal",props:{pageState:null},emits:["closeModal"],setup(_,{emit:v}){const a=_,k=U(),$=k.$emitter,s=k.$t,x=S(!0);async function c(){if(!x.value)return;x.value=!1;const h=g();(await E.toUpdateFileNameByAPI(h)).status===200&&d(),setTimeout(()=>{x.value=!0},2e3)}const l=S("");X(()=>{l.value=a.pageState.name});function g(){return l.value===""&&(l.value=a.pageState.name),{name:l.value,fileId:a.pageState.id}}function r(){l.value=""}function d(){$.emit("show-success-msg",s("File name update success")),$.emit("refresh-page"),v("closeModal")}return(h,n)=>{const O=C("a-modal");return u(),L(O,{visible:_.pageState.isShowMsg,"onUpdate:visible":n[2]||(n[2]=M=>_.pageState.isShowMsg=M),title:i(s)("Rename"),"ok-text":i(s)("OK"),"cancel-text":i(s)("Cancel"),wrapClassName:"input-modal",afterClose:r(),okType:"create",width:"340px",centered:"",onOk:n[3]||(n[3]=M=>c())},{default:f(()=>[q(e("input",{class:"w-full px-[10px] h-10 rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400","onUpdate:modelValue":n[0]||(n[0]=M=>_.pageState.name=M),onKeypress:n[1]||(n[1]=W(M=>c(),["enter"]))},null,544),[[Q,_.pageState.name,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}}),ve={class:"w-[250px]"},_e={class:"control-area"},ge={class:"icon"},he={class:"menu-item"},xe={class:"icon"},we={class:"menu-item"},$e={class:"icon"},ke={class:"menu-item"},ye={class:"icon"},Ce={class:"menu-item"},be={class:"control-item"},Se={class:"icon"},Me={class:"menu-item"},H=T({__name:"ContextMenuFile",props:{fileData:null},setup(_){const v=_,k=U().$utils,$=P({isShowMsg:!1,name:v.fileData.name,id:v.fileData.id}),s=P({isShowMsg:!1,name:v.fileData.name,id:v.fileData.id});function x(c){window.location.assign(c)}return(c,l)=>{const g=C("custom-icon"),r=C("a-menu-item");return u(),w(I,null,[e("div",ve,[e("div",_e,[t(r,null,{default:f(()=>[e("div",{class:"control-item",onClick:l[0]||(l[0]=d=>i(k).openFileView(_.fileData.webViewLink))},[e("div",ge,[t(g,{iconStr:"preview"})]),e("span",he,p(c.$t("Preview")),1)])]),_:1}),t(r,null,{default:f(()=>[e("div",{class:"control-item",onClick:l[1]||(l[1]=d=>x(_.fileData.webContentLink))},[e("div",xe,[t(g,{iconStr:"download"})]),e("span",we,p(c.$t("Download")),1)])]),_:1}),t(r,null,{default:f(()=>[e("div",{class:"control-item",onClick:l[2]||(l[2]=d=>s.isShowMsg=!0)},[e("div",$e,[t(g,{iconStr:"rename"})]),e("span",ke,p(c.$t("Rename")),1)])]),_:1}),t(r,null,{default:f(()=>[e("div",{class:"control-item",onClick:l[3]||(l[3]=d=>$.isShowMsg=!0)},[e("div",ye,[t(g,{iconStr:"delete"})]),e("span",Ce,p(c.$t("Delete")),1)])]),_:1}),t(r,null,{default:f(()=>[e("div",be,[e("div",Se,[t(g,{iconStr:"getLink"})]),e("span",Me,p(c.$t("Get link")),1)])]),_:1})])]),t(Z,{pageState:$,onCloseModal:l[4]||(l[4]=d=>$.isShowMsg=!1)},null,8,["pageState"]),t(ee,{pageState:s,onCloseModal:l[5]||(l[5]=d=>s.isShowMsg=!1)},null,8,["pageState"])],64)}}}),De={class:"w-[250px]"},Fe={class:"control-area"},Le={class:"icon"},Ie={class:"menu-item"},Pe={class:"icon"},Te={class:"menu-item"},Ue={class:"icon"},Oe={class:"menu-item"},J=T({__name:"ContextMenuFolder",props:{fileData:null},setup(_){const v=_,a=U(),k=a.$utils,$=a.$emitter,s=a.$t,x=P({isShowMsg:!1,name:v.fileData.name,id:v.fileData.id}),c=P({isShowMsg:!1,name:v.fileData.name,id:v.fileData.id});async function l(){await k.copyLink(v.fileData.webViewLink),$.emit("show-success-msg",s("Link copied to clipboard"))}return(g,r)=>{const d=C("custom-icon"),h=C("a-menu-item");return u(),w(I,null,[e("div",De,[e("div",Fe,[t(h,null,{default:f(()=>[e("div",{class:"control-item",onClick:r[0]||(r[0]=n=>c.isShowMsg=!0)},[e("div",Le,[t(d,{iconStr:"rename"})]),e("span",Ie,p(i(s)("Rename")),1)])]),_:1}),t(h,null,{default:f(()=>[e("div",{class:"control-item",onClick:r[1]||(r[1]=n=>x.isShowMsg=!0)},[e("div",Pe,[t(d,{iconStr:"delete"})]),e("span",Te,p(i(s)("Delete")),1)])]),_:1}),t(h,null,{default:f(()=>[e("div",{class:"control-item",onClick:r[2]||(r[2]=n=>l())},[e("div",Ue,[t(d,{iconStr:"getLink"})]),e("span",Oe,p(i(s)("Get link")),1)])]),_:1})])]),t(Z,{pageState:x,onCloseModal:r[3]||(r[3]=n=>x.isShowMsg=!1)},null,8,["pageState"]),t(ee,{pageState:c,onCloseModal:r[4]||(r[4]=n=>c.isShowMsg=!1)},null,8,["pageState"])],64)}}}),Ve={id:"my-drive-page"},Be={key:0,class:"empty-folder set-item-center flex-col h-screen mt-[-50px]"},Ne={class:"mt-1 text-slate-500"},Ee={class:"ml-6 md:ml-0 set-item-between mt-2 mb-5 md:pr-[50px]"},Re={class:"flex"},Ge={class:"folder-mobile ml-6 md:hidden flex flex-wrap"},je=["onContextmenu","onClick"],Ae={class:"flex relative"},Ke=["src"],Ye={class:"truncate flex items-center"},ze={class:"folder-area ml-6 hidden md:ml-0 md:flex md:flex-wrap"},He=["onContextmenu","onClick","onDblclick"],Je={class:"flex relative"},qe=["src"],Qe={class:"lg:w-[150px] truncate flex items-center"},We={class:"ml-6 md:ml-0 set-item-between mt-2 mb-4 pr-[50px]"},Xe={class:"file-area ml-6 md:ml-0 hidden md:flex md:flex-wrap pb-24"},Ze=["onClick","onContextmenu","onDblclick"],et={class:"file-outside h-full w-full set-item-center overflow-hidden"},tt=["src"],nt={class:"img-area flex basis-12 items-center pr-6 pl-6"},ot=["src"],st={class:"w-[150px] truncate"},lt={class:"file-area-mobile ml-6 md:hidden flex flex-wrap pb-25"},it={class:"file flex flex-col items-start mb-[14px] rounded-lg w-full h-[40vw] min-w-[200px] min-h-[200px] max-h-[429px] lg:w-[228px] lg:mr-5 lg:h-[228px] 2xl:w-[228px] 2xl:h-[228px] justify-start cursor-pointer border-1px"},at={class:"file-outside h-full w-full set-item-center overflow-hidden"},rt=["src"],ct={class:"img-area flex basis-12 items-center pr-6 pl-6"},dt=["src"],ut={class:"w-[150px] truncate"},mt=T({__name:"MyDrivePage",setup(_){const v=U(),a=v.$utils,k=v.$emitter,$=v.$TYPE,s=le(),x=P([{name:"ContextMenuFile",component:A(H)},{name:"ContextMenuFolder",component:A(J)},{name:"ContextMenuPage",component:A(ce)}]),c=P({menus:x[2].component});X(()=>{l(),k.on("refresh-page",()=>{l()})}),oe(()=>{k.off("refresh-page")});function l(){if(s.params.folderId===void 0)return r();d(s.params.folderId)}const g=S(!0);se(()=>s.params.folderId,m=>{if(g.value=!0,a.sendFileDetail(void 0),m===void 0)return r();d(m)});async function r(){const m=await E.getDriveRootListByAPI();O(m)}async function d(m){const y=await E.getFolderItemByAPI(m);O(y)}const h=S([]),n=S([]);function O(m){h.value=M(m),n.value=M(m,!0),g.value=!1}function M(m,y=!1){return y===!1?m.filter(F=>F.mimeType===$.GOOGLE_FOLDER):y===!0?m.filter(F=>F.mimeType!==$.GOOGLE_FOLDER):[]}const D=S();function V(m){var y;if(m[0]==="toOmit"){c.menus=x[2].component,D.value={};return}D.value=m[1],c.menus=(y=x.find(F=>F.name==m[0]))==null?void 0:y.component}const B=S("akar-icons:arrow-up");function te(){h.value.reverse(),n.value.reverse(),B.value==="akar-icons:arrow-up"?B.value="akar-icons:arrow-down":B.value="akar-icons:arrow-up"}return(m,y)=>{const F=C("Icon"),R=C("icon"),G=C("a-menu"),Y=C("custom-icon"),j=C("a-dropdown");return u(),L(j,{trigger:["contextmenu"]},{overlay:f(()=>[t(G,null,{default:f(()=>[(u(),L(ie(c.menus),{key:c.menus,fileData:D.value},null,8,["fileData"]))]),_:1})]),default:f(()=>[e("div",null,[e("div",Ve,[h.value.length===0&&n.value.length===0&&!g.value?(u(),w("div",Be,[t(F,{icon:"fluent-emoji-high-contrast:open-file-folder",class:ae("opacity-90"),color:"#6f6f6f",width:"100",height:"100"}),e("span",Ne,p(m.$t("Empty folder you can use new")),1)])):K("",!0),g.value?(u(),L(de,{key:1})):h.value.length!==0||n.value.length!==0?(u(),w("div",{key:2,class:"page-content pr-5",onContextmenuCapture:y[1]||(y[1]=o=>V(["toOmit"]))},[e("div",Ee,[e("div",null,p(m.$t("Folder")),1),e("div",Re,[e("div",null,p(m.$t("Name")),1),t(R,{class:"ml-[6px] cursor-pointer",onClick:y[0]||(y[0]=o=>te()),icon:B.value,width:"20",height:"20"},null,8,["icon"])])]),e("div",Ge,[(u(!0),w(I,null,N(h.value,o=>(u(),w("div",{class:"folder flex justify-start cursor-pointer hover:bg-slate-100 items-center border-1px mb-[14px] pr-[50px] pl-6 rounded-lg w-full h-12",onContextmenu:b=>V(["ContextMenuFolder",o]),onClick:b=>i(a).goToFolder(o.id)},[e("div",Ae,[e("img",{class:"w-6 mr-[10px]",src:i(a).setIcon(o.iconLink)},null,8,Ke),e("div",Ye,p(o.name),1),t(j,{trigger:["click"]},{overlay:f(()=>[t(G,null,{default:f(()=>[t(J,{fileData:D.value},null,8,["fileData"])]),_:1})]),default:f(()=>[t(Y,{class:"absolute left-[250px] md:hidden",iconStr:"info",onClick:z(b=>D.value=o,["stop"])},null,8,["onClick"])]),_:2},1024)])],40,je))),256))]),e("div",ze,[(u(!0),w(I,null,N(h.value,o=>(u(),w("div",{class:"folder flex justify-start cursor-pointer hover:bg-slate-100 items-center border-1px mb-[14px] pr-[50px] pl-6 rounded-lg w-full h-12 lg:w-[30%] lg:mr-5 min-w-[222px] 2xl:w-[228px]",onContextmenu:b=>V(["ContextMenuFolder",o]),onClick:b=>i(a).sendFileDetail(o),onDblclick:b=>i(a).goToFolder(o.id)},[e("div",Je,[e("img",{class:"w-6 mr-[10px]",src:i(a).setIcon(o.iconLink)},null,8,qe),e("div",Qe,p(o.name),1)])],40,He))),256))]),e("div",We,[e("div",null,p(m.$t("File")),1)]),e("div",Xe,[(u(!0),w(I,null,N(n.value,o=>(u(),w("div",{class:"file flex flex-col items-start mb-[14px] rounded-lg w-full h-[40vw] min-w-[200px] min-h-[200px] max-h-[429px] lg:w-[228px] lg:mr-5 lg:h-[228px] 2xl:w-[228px] 2xl:h-[228px] justify-start cursor-pointer border-1px",onClick:b=>i(a).sendFileDetail(o),onContextmenu:b=>V(["ContextMenuFile",o]),onDblclick:b=>i(a).openFileView(o.webViewLink)},[e("div",et,[o.thumbnailLink!==void 0?(u(),w("img",{key:0,class:"scale-125",src:i(a).setIcon(o.thumbnailLink),referrerPolicy:"no-referrer"},null,8,tt)):(u(),L(R,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"60",height:"100%"}))]),e("div",nt,[e("img",{class:"mr-[10px]",src:i(a).setIcon(o.iconLink)},null,8,ot),e("div",st,p(o.name),1)])],40,Ze))),256))]),e("div",lt,[(u(!0),w(I,null,N(n.value,o=>(u(),w("div",it,[e("div",at,[o.thumbnailLink!==void 0?(u(),w("img",{key:0,class:"scale-125",src:i(a).setIcon(o.thumbnailLink),referrerPolicy:"no-referrer"},null,8,rt)):(u(),L(R,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"60",height:"100%"}))]),e("div",ct,[e("img",{class:"mr-[10px]",src:i(a).setIcon(o.iconLink)},null,8,dt),e("div",ut,p(o.name),1),t(j,{class:"ml-12",trigger:["click"]},{overlay:f(()=>[t(G,null,{default:f(()=>[t(H,{fileData:D.value},null,8,["fileData"])]),_:1})]),default:f(()=>[t(Y,{iconStr:"info",onClick:z(b=>D.value=o,["stop"])},null,8,["onClick"])]),_:2},1024)])]))),256))])],32)):K("",!0)])])]),_:1})}}});const gt=re(mt,[["__scopeId","data-v-47787157"]]);export{gt as default};
