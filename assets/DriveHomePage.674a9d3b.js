import{j as I,m as V,k as v,f as r,l as D,q as L,r as T,s as Q,w as i,a as e,t as o,v as n,x as f,n as t,c as _,y as F,F as P,z as O,u as A,A as U,B as X,C as E,D as ee,E as te,G,H as z,I as oe,_ as Y,J as R,K as ne,L as se,d as ae}from"./index.1d5ca85e.js";import{l as j,G as q}from"./googleAPI.29554ae6.js";import{C as H}from"./ContextMenuPage.aef22067.js";import{_ as ie}from"./vite-drive.eb5f7837.js";const le={__name:"MessageModal",setup(C){return I("$emitter").on("show-success-msg",a=>{V.success(a)}),V.config({maxCount:1}),(a,l)=>{const c=v("a-space");return r(),D(c)}}};const re={__name:"UploadProgressModal",emits:["closeModal"],setup(C,{emit:b}){const a=j(),l=I("$emitter"),c=L({"0%":"#108ee9","100%":"#87d068"}),m=T(!1),p=T(!1);l.on("show-upload-progress",w);const d=Q(()=>(a.getProgress===100&&setTimeout(()=>{m.value=!1,setTimeout(()=>{a.uploadProgress(0)},2e3)},1500),a.getProgress));function w(){m.value=!0}return(s,g)=>{const y=v("a-progress"),h=v("a-modal");return r(),D(h,{visible:m.value,"onUpdate:visible":g[0]||(g[0]=M=>m.value=M),wrapClassName:"loading-modal",okType:"create",width:"300px",footer:null,centered:"",maskClosable:p.value,closable:""},{default:i(()=>[e("div",{class:t(["info","set-item-center flex-col"])},[e("p",null,o(s.$t("File uploading...")),1),n(y,{type:"circle","stroke-color":c,percent:f(d)},null,8,["stroke-color","percent"])])]),_:1},8,["visible","maskClosable"])}}},ce="/vite-google-drive-demo/assets/new.336a9a10.svg",de={id:"side-menu",class:t("mt-[-40px] min-h-screen hidden md:block md:w-64")},ue=e("img",{src:ce},null,-1),me={class:t("items-center")},pe=e("hr",null,null,-1),_e={__name:"SideMenu",setup(C){const b=A(),a=U(),l=I("$t"),c=I("$TYPE"),m=new q,p=L({theme:"li",selectedKeys:["1"],openKeys:["sub1"]});async function d(y){await m.getFolderItemByAPI(y)}const w=T([]);async function s(){const h=(await m.getDriveRootListByAPI()).filter(M=>M.mimeType===c.GOOGLE_FOLDER);w.value=h}function g(){a.path!=="/drive/my-drive"&&b.push("/drive/my-drive")}return(y,h)=>{const M=v("a-menu"),k=v("a-dropdown"),S=v("custom-icon"),B=v("a-sub-menu"),x=v("a-menu-item");return r(),_("div",de,[e("div",{class:t(["out-side","bg-white sticky top-[75px] left-[20px] w-fit "])},[n(k,{trigger:["click"]},{overlay:i(()=>[n(M,null,{default:i(()=>[n(H)]),_:1})]),default:i(()=>[e("div",{class:t(["new-file-area","shadow-md h-[48px] w-[118px] border-1px rounded-full set-item-center p-[20px] cursor-pointer"])},[e("div",{class:t(["icon","set-item-between ml-[-20px] w-[80px]"])},[ue,e("div",me,o(f(l)("New")),1)])])]),_:1}),e("div",{class:t(["select-area","mt-[10px]"])},[n(M,{openKeys:p.openKeysopenKeys,"onUpdate:openKeys":h[1]||(h[1]=u=>p.openKeysopenKeys=u),selectedKeys:p.selectedKeysselectedKeys,"onUpdate:selectedKeys":h[2]||(h[2]=u=>p.selectedKeysselectedKeys=u),mode:"inline",style:{width:"240px",border:"none","max-height":"100vh","overflow-y":"overlay","overflow-x":"hidden"},class:t("relative left-[-20px]")},{default:i(()=>[n(B,{class:"my-drive-menu",key:"1",onClick:h[0]||(h[0]=u=>(g(),s()))},{icon:i(()=>[n(S,{iconStr:"myDrive"})]),title:i(()=>[F(o(f(l)("My Drive")),1)]),default:i(()=>[(r(!0),_(P,null,O(w.value,(u,K)=>(r(),D(B,{key:K,onClick:N=>d(u.id)},{icon:i(()=>[n(S,{iconStr:"folder"})]),title:i(()=>[F(o(u.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),n(B,{key:"2"},{icon:i(()=>[n(S,{iconStr:"computer"})]),title:i(()=>[F(o(f(l)("Computer")),1)]),_:1}),n(x,{key:"3"},{icon:i(()=>[n(S,{iconStr:"sharedDrives"})]),default:i(()=>[e("span",null,o(f(l)("Shared drives")),1)]),_:1}),n(x,{key:"4"},{icon:i(()=>[n(S,{iconStr:"recent"})]),default:i(()=>[e("span",null,o(f(l)("Recent")),1)]),_:1}),n(x,{key:"5"},{icon:i(()=>[n(S,{iconStr:"starrted"})]),default:i(()=>[e("span",null,o(f(l)("Starrted")),1)]),_:1}),n(x,{key:"6"},{icon:i(()=>[n(S,{iconStr:"trash"})]),default:i(()=>[e("span",null,o(f(l)("Trash")),1)]),_:1}),pe,n(x,{key:"7"},{icon:i(()=>[n(S,{iconStr:"storage"})]),default:i(()=>[e("span",null,o(f(l)("Storage")),1)]),_:1})]),_:1},8,["openKeys","selectedKeys"])])])])}}},ve=_e,fe={id:"nav-bar"},he={class:"nav-outside"},xe={class:t("hidden md:block ml-3 text-slate-500 text-[22px] min-w-[80px] whitespace-nowrap")},ge={class:t("flex items-center")},ye=["placeholder"],we=["onClick"],$e=["src"],ke={class:"name"},be={__name:"navBar",setup(C){const b=I("$emitter"),a=I("$TYPE"),l=I("$globalF",()=>{},!1),c=new q,{locale:m}=X(),p=T([]),d=T(""),w=T(null),s=A(),g=T(!1);b.on("clear-search-input",()=>{console.log("object"),d.value=""});function y(x){m.value=x.key}function h(){g.value=!g.value}async function M(){if(d.value==="")return;const x=await c.searchFileByAPI(d.value);p.value=x}function k(){p.value=[],s.push({path:"/drive/search",query:{q:d.value}}),w.value.blur()}function S(){s.replace("/drive/my-drive")}function B(x){if(w.value.blur(),x.mimeType===a.GOOGLE_FOLDER)return l.goToFolder(x.id);l.openFileView(x.webViewLink)}return(x,u)=>{const K=v("Icon"),N=v("a-menu-item"),W=v("a-menu"),J=v("a-dropdown");return r(),_("nav",fe,[e("div",he,[e("div",{class:t(["nav-inside","flex items-center justify-start"])},[e("div",{class:t(["img-area","set-item-center cursor-pointer md:mr-[60px] md:ml-[20px]"]),onClick:u[0]||(u[0]=$=>S())},[e("img",{src:ie,class:t("my-2.5 min-w-[40px] w-[40px] ml-[10px]")},null,2),e("div",xe,o(x.$t("drive")),1)]),e("div",{class:t(["input","ml-3 relative w-[400px] basis-[700px]"])},[e("div",ge,[E(e("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=$=>d.value=$),ref_key:"searchInput",ref:w,onKeyup:u[2]||(u[2]=$=>M()),onFocus:u[3]||(u[3]=$=>h()),onBlur:u[4]||(u[4]=$=>h()),onKeypress:u[5]||(u[5]=te($=>k(),["enter"])),placeholder:x.$t("Search from Google Drive"),class:t("border max-w-[500px] min-w-[230px] w-[100%] h-12 px-14 rounded-lg bg-slate-100 focus:bg-inherit placeholder:text-base")},null,40,ye),[[ee,d.value]]),n(K,{class:"absolute top-3 left-3",icon:"carbon:search",color:"grayText",width:"25",height:"25"}),d.value!==""?(r(),D(K,{key:0,onClick:u[6]||(u[6]=$=>d.value=""),icon:"iconoir:cancel",color:"grayText",width:"25",height:"25",class:t("cursor-pointer ml-[-50px]")})):G("",!0)]),E(e("div",{class:t(["search-result-area","absolute top-[43px] border-solid border-2 border-gray-300  max-w-[500px] min-w-[230px] w-[100%] min-h-[50px] max-h-[200px] overflow-auto bg-white rounded-b-lg"])},[(r(!0),_(P,null,O(p.value,($,Z)=>(r(),_("div",{class:"serch-result-item",key:Z},[e("div",{class:t(["result-body","hover:bg-slate-100 h-[50px] flex items-center"]),onClick:ot=>B($),onMousedown:u[7]||(u[7]=oe(()=>{},["prevent"]))},[e("img",{src:$.iconLink,class:t("h-[20px] w-[20px] ml-[10px] mr-[10px]")},null,8,$e),e("div",ke,o($.name),1)],40,we)]))),128))],512),[[z,p.value.length>0&&d.value!==""&&g.value]])]),e("div",{class:t(["setting","ml-[30px]"])},[n(J,{trigger:["click"]},{overlay:i(()=>[n(W,{onClick:y,modelValue:x.$i18n.locale,"onUpdate:modelValue":u[8]||(u[8]=$=>x.$i18n.locale=$)},{default:i(()=>[(r(!0),_(P,null,O(x.$i18n.availableLocales,$=>(r(),D(N,{key:`${$}`},{default:i(()=>[F(o($),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),default:i(()=>[n(K,{icon:"ant-design:setting-outlined",color:"grayText",width:"25",height:"25",class:t("cursor-pointer focus:outline-none")},{default:i(()=>[F(o(x.$t("language")),1)]),_:1})]),_:1})]),e("div",{class:t(["profile","mr-10"])})])])])}}},Me=be,Se={id:"bread-crumbs",class:t("border-1px h-[48px] bg-white set-item-start")},Ie={class:"side-meun"},Ce={__name:"BreadCrumbs",emits:["openInfoMenu"],setup(C,{emit:b}){const a=U(),l=I("$t");function c(){if(a.name==="my-drive"||a.name==="my-drive-folders")return l("My Drive");if(a.name==="search-result-page")return l("Search result")}function m(){b("openInfoMenu")}return(p,d)=>{const w=v("a-menu"),s=v("Icon"),g=v("a-dropdown"),y=v("custom-icon");return r(),_("div",Se,[e("div",Ie,[n(g,{trigger:["click"]},{overlay:i(()=>[n(w,null,{default:i(()=>[n(H)]),_:1})]),default:i(()=>[n(s,{icon:"material-symbols:menu",color:"grayText",width:"25",height:"25",class:t("ml-[18px] md:hidden")})]),_:1})]),e("div",{class:t(["content","md:pl-[260px] pl-[25px] w-100 text-slate-500 text-[18px] shrink-0"])},o(c()),1),e("div",{class:t(["control-icon","hidden md:block  2xl:ml-[65%] xl:ml-[55%] lg:ml-[45%] md:ml-[35%] cursor-pointer"]),onClick:d[0]||(d[0]=h=>m())},[n(y,{iconStr:"Info"})])])}}},De=Ce,Te={key:0,class:"noChooseFile"},Fe={class:"img"},Be={key:1,class:"info-area"},Le=["src"],Pe=["src"],Ke={class:"access"},Oe={class:"system-properties"},Ee={class:t("w-[110px]")},Ge={key:0},Ne={key:1},Ve={__name:"InfoMenuDetail",setup(C){const b=I("$emitter"),a=I("$t"),l=I("$TYPE"),c=L({});b.on("send-file-data",s=>{c.data=s});function m(s,g=1){if(s==0)return"0 Bytes";if(s==null)return!1;const y=1024,h=g<0?0:g,M=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],k=Math.floor(Math.log(s)/Math.log(y));return parseFloat((s/Math.pow(y,k)).toFixed(h))+" "+M[k]}function p(s){return new Date(s).toLocaleString()}function d(s){return s===l.IMG?a("Image"):s===l.WORD?"Word":s===l.GOOGLE_SHEETS?a("Google Sheets"):s===l.PDF?"PDF":s===l.GOOGLE_FOLDER?a("Google Drive Folder"):s===l.GOOGLE_DOCS?a("Google Docs"):a("Other")}function w(s){return s.displayName===void 0?a("Anyone with link"):s.displayName!==void 0&&s.role==="owner"?s.displayName+a("is owner"):s.displayName}return(s,g)=>{const y=v("custom-icon"),h=v("Icon"),M=v("a-tooltip");return c.data==null?(r(),_("div",Te,[e("div",{class:t(["img-area","flex flex-col mt-[20px]"])},[e("div",Fe,[n(y,{iconStr:"fileDeatil"})]),e("div",{class:t(["text opacity-60 mx-auto","mt-[20px]"])},o(f(a)("Select a file or folder to view its details")),1)])])):(r(),_("div",Be,[e("div",{class:t(["img","h-[150px] w-[100%] border-1px set-item-center overflow-hidden"])},[c.data.thumbnailLink!==void 0?(r(),_("img",{key:0,class:t("h-[100%]"),referrerPolicy:"no-referrer",src:c.data.thumbnailLink},null,8,Le)):(r(),D(h,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"100",height:"100%"}))]),e("div",{class:t(["info-detail","p-[16px]"])},[e("div",{class:t(["has-access","text-lg opacity-75"])},o(f(a)("Who has access")),1),e("div",{class:t(["access","mt-[20px] mb-[20px] overflow-auto max-h-[60px]"])},[c.data.shared?(r(!0),_(P,{key:0},O(c.data.permissions,k=>(r(),_("div",{class:t(["access-info",""])},[e("div",{class:t(["access-arr","set-item-start mb-[5px]"])},[k.photoLink!==void 0?(r(),_("img",{key:0,src:k.photoLink,class:t("h-[25px] mr-[5px] rounded-full")},null,8,Pe)):(r(),D(h,{key:1,icon:"ci:link",color:"#FFFFFF",width:"25",height:"25",class:t("bg-lime-600 mr-[5px] rounded-full")})),e("div",Ke,o(w(k)),1)])]))),256)):(r(),_("div",{key:1,class:t(["access-info","set-item-start h-[60px]"])},[n(y,{iconStr:"noShare"}),e("div",{class:t(["no-shared","ml-[15px]"])},o(f(a)("Not shared")),1)]))]),e("div",Oe,[e("div",{class:t(["title","text-lg opacity-75 title-color mb-[10px]"])},o(f(a)("System properties")),1),e("table",null,[e("tbody",null,[e("tr",null,[e("td",Ee,o(f(a)("Type")),1),n(M,{placement:"bottom"},{title:i(()=>[F(o(c.data.mimeType),1)]),default:i(()=>[e("td",null,o(d(c.data.mimeType)),1)]),_:1})]),m(c.data.size)!==!1?(r(),_("tr",Ge,[e("td",null,o(f(a)("Size")),1),e("td",null,o(m(c.data.size)),1)])):G("",!0),m(c.data.quotaBytesUsed)!==!1?(r(),_("tr",Ne,[e("td",null,o(f(a)("Storage used")),1),e("td",null,o(m(c.data.quotaBytesUsed)),1)])):G("",!0),e("tr",null,[e("td",null,o(f(a)("Location")),1),e("td",null,o(c.data.spaces.join(",")),1)]),e("tr",null,[e("td",null,o(f(a)("Owner")),1),e("td",null,o(c.data.owners[0].me?f(a)("Me"):""),1)]),e("tr",null,[e("td",null,o(f(a)("Modified")),1),e("td",null,o(p(c.data.modifiedTime)),1)]),e("tr",null,[e("td",null,o(f(a)("Opened")),1),e("td",null,o(p(c.data.viewedByMeTime)),1)]),e("tr",null,[e("td",null,o(f(a)("Created")),1),e("td",null,o(p(c.data.createdTime)),1)])])])])])]))}}},Re={key:0,class:"noChooseFile"},Ae=e("div",{class:"img"},null,-1);function Ue(C,b){return r(),_("div",Re,[e("div",{class:t(["img-area","flex flex-col mt-[20px]"])},[Ae,e("div",{class:t(["text opacity-60 mx-auto","mt-[20px]"])},o(C.$t("No activity")),1)])])}const ze={},Ye=Y(ze,[["render",Ue]]);const je={class:"outer"},qe={class:"inside"},He={class:"header"},We={class:"file-name"},Je=["src"],Ze=["onClick"],Qe={class:"body"},Xe={__name:"InfoMenu",emits:["closeInfoMenu"],setup(C,{emit:b}){const a=I("$emitter"),l=L([{name:"Details",component:R(Ve)},{name:"Activity",component:R(Ye)}]);function c(s){m.views=s}const m=L({views:l[0].component});function p(s){if(s===m.views)return!0}const d=L({});a.on("send-file-data",s=>{d.data=s});function w(){b("closeInfoMenu")}return(s,g)=>{const y=v("custom-icon"),h=v("a-tooltip"),M=v("Icon");return r(),_("div",je,[e("div",qe,[e("div",He,[e("div",{class:t(["header-info","h-[72px] set-item-around"])},[e("div",We,[d.data==null?(r(),_("div",{key:0,class:t(["no-chose-data","flex"])},[n(y,{iconStr:"myDrive"}),e("div",{class:t(["title","text-[22px] text-slate-500"])},o(s.$t("My Drive")),1)])):(r(),_("div",{key:1,class:t(["has-data","flex"])},[e("img",{src:d.data.iconLink,class:t("w-[20px] h-[20px] mt-[8px] mr-[10px] set-item-start")},null,8,Je),n(h,{placement:"bottom"},{title:i(()=>[F(o(d.data.name),1)]),default:i(()=>[e("div",{class:t(["title","text-[22px] text-slate-500 w-[160px] truncate"])},o(d.data.name),1)]),_:1})]))]),n(M,{onClick:g[0]||(g[0]=k=>w()),icon:"iconoir:cancel",color:"grayText",width:"25",height:"25",class:t("cursor-pointer")})]),e("div",{class:t(["header-control","h-[50px] w-[100%] set-item-around border-b-2"])},[(r(!0),_(P,null,O(l,(k,S)=>(r(),_("div",{class:t(["view","w-[48%] h-[50px] set-item-center cursor-pointer opacity-80 border-b-4 border-transparent hover:border-b-4 hover:border-gray-500",{"in-this-page":p(k.component)}]),onClick:B=>c(k.component),key:S},o(s.$t(k.name)),11,Ze))),128))])]),e("div",Qe,[(r(),D(se,null,[(r(),D(ne(m.views),{key:m.views}))],1024))])])])}}},et=Y(Xe,[["__scopeId","data-v-60d7368c"]]),tt={class:"page-content flex"},lt=ae({__name:"DriveHomePage",setup(C){const b=j();a();function a(){if(window.sessionStorage.getItem("token")==null)return;const m=JSON.parse(window.sessionStorage.getItem("token")||"{}");b.changeTokenData(m)}const l=T(!0);function c(){l.value===!0?l.value=!1:l.value=!0}return(m,p)=>{const d=v("router-view");return r(),_(P,null,[e("div",{class:t(["home-page z-50 relative","h-screen overflow-hidden"])},[n(Me,{class:t("sticky top-0 z-50 bg-white shadow-md")}),n(De,{onOpenInfoMenu:p[0]||(p[0]=w=>c()),class:t("sticky top-[60px] h-[50px]")}),e("div",tt,[n(ve,{class:t("shrink-0 ")}),e("div",{class:t(["conter","w-[100%] h-screen overflow-auto"])},[n(d)]),E(e("div",{class:t(["right-menu","hidden border-1px sticky top-0 md:block md:basis-[500px]"])},[n(et,{onCloseInfoMenu:p[1]||(p[1]=w=>l.value=!1)})],512),[[z,l.value]])])]),n(le),n(re)],64)}}});export{lt as default};
