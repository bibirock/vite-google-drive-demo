import{d as A,D as b,r as v,s as C,f as M,v as B,y as $,G as N,H as P,a,I as D,A as i,n as h,_ as R,m as S,w as E,c as k,z as _,t as I,F as G}from"./index.e445bb4d.js";import{g as K,G as U}from"./googleAPI.06b4af46.js";const T=["placeholder"],V=A({__name:"CreateFolderModal",props:{pageState:null},emits:["closeModal"],setup(x,{emit:d}){const r=K(),c=r.$emitter,l=r.$t,g=new U,u=b(),F=v(!1),n=v(""),p=v(!0);async function w(){if(!p.value)return;p.value=!1;const t=f();(await g.createFolderByAPI(t)).status===200&&e(),setTimeout(()=>{p.value=!0},2e3)}function f(){const t=[];return n.value===""&&(n.value="Untitled"),u.params.folderId!==void 0&&t.push(u.params.folderId),{name:n.value,parents:t}}function o(){n.value=""}function e(){F.value=!1,c.emit("show-success-msg",l("Folder create success")),c.emit("refresh-page"),d("closeModal")}return(t,s)=>{const y=C("a-modal");return M(),B(y,{visible:x.pageState.isShowMsg,"onUpdate:visible":s[2]||(s[2]=m=>x.pageState.isShowMsg=m),title:i(l)("New folder"),"ok-text":i(l)("Create"),"cancel-text":i(l)("Cancel"),wrapClassName:"newFolderModal",afterClose:o(),okType:"create",width:"340px",centered:"",onOk:s[3]||(s[3]=m=>w())},{default:$(()=>[N(a("input",{"onUpdate:modelValue":s[0]||(s[0]=m=>n.value=m),onKeypress:s[1]||(s[1]=D(m=>w(),["enter"])),placeholder:i(l)("Untitled folder"),class:h("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,40,T),[[P,n.value,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}});const j={class:h("w-[250px]")},z={class:"control-area"},H={class:"icon"},O={form:"fileUpload",class:h("cursor-pointer")},q={class:"control-item"},L={class:"icon"},J={__name:"ContextMenuPage",props:{fileData:Object},setup(x){const d=S("$emitter"),r=S("$t"),c=b(),l=new U,g=v(null),u=v(0);function F(){const o=new FileReader,e=g.value.files[0];o.readAsArrayBuffer(e),o.onload=async t=>{n(e.name,t.target.result)}}async function n(o,e){const t={name:o,parents:c.params.folderId===void 0?[]:[c.params.folderId]};p(t,e),u.value+=1}async function p(o,e){d.emit("show-upload-progress"),(await l.toUploadFileByAPI(o,e)).status===200&&w(o)}function w(o){d.emit("refresh-page"),d.emit("show-success-msg",r("File upload success, your file name is")+":"+o.name)}const f=E({isShowMsg:!1});return(o,e)=>{const t=C("custom-icon"),s=C("a-menu-item");return M(),k(G,null,[a("div",j,[a("div",z,[_(s,null,{default:$(()=>[a("div",{class:"control-item",onClick:e[0]||(e[0]=y=>f.isShowMsg=!0)},[a("div",H,[_(t,{iconStr:"newFolder"})]),a("span",null,I(i(r)("New folder")),1)])]),_:1}),_(s,null,{default:$(()=>[a("label",O,[a("div",q,[a("div",L,[_(t,{iconStr:"fileUpload"})]),a("span",null,I(i(r)("File upload")),1),(M(),k("input",{key:u.value,type:"file",id:"fileUpload",multiple:"",class:h("hidden"),onChange:e[1]||(e[1]=y=>F()),ref_key:"inputElement",ref:g},null,32))])])]),_:1})])]),_(V,{pageState:f,onCloseModal:e[2]||(e[2]=y=>f.isShowMsg=!1)},null,8,["pageState"])],64)}}},X=R(J,[["__scopeId","data-v-d959cddf"]]);export{X as C};
