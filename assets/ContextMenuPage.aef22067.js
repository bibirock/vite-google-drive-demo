import{A as I,j as x,r as f,k as h,f as M,l as U,w as $,C as A,D as B,a as o,E as N,x as i,n as y,_ as P,q as D,c as k,v as p,t as S,F as j}from"./index.1d5ca85e.js";import{G as b}from"./googleAPI.29554ae6.js";const E=["placeholder"],R={__name:"CreateFolderModal",props:{pageState:Object},emits:["closeModal"],setup(F,{emit:d}){const r=I(),m=new b,_=x("$emitter"),a=x("$t"),v=f(!1),n=f(""),c=f(!0);async function g(){if(!c.value)return;c.value=!1;const e=C();(await m.createFolderByAPI(e)).status===200&&s(),setTimeout(()=>{c.value=!0},2e3)}function C(){return n.value===""&&(n.value="Untitled"),{name:n.value,parents:r.params.folderId===void 0?"":r.params.folderId}}function u(){n.value=""}function s(){v.value=!1,_.emit("show-success-msg",a("Folder create success")),_.emit("refresh-page"),d("closeModal")}return(e,t)=>{const w=h("a-modal");return M(),U(w,{visible:F.pageState.isShowMsg,"onUpdate:visible":t[2]||(t[2]=l=>F.pageState.isShowMsg=l),title:i(a)("New folder"),"ok-text":i(a)("Create"),"cancel-text":i(a)("Cancel"),wrapClassName:"newFolderModal",afterClose:u(),okType:"create",width:"340px",centered:"",onOk:t[3]||(t[3]=l=>g())},{default:$(()=>[A(o("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>n.value=l),onKeypress:t[1]||(t[1]=N(l=>g(),["enter"])),placeholder:i(a)("Untitled folder"),class:y("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,40,E),[[B,n.value,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}};const K={class:y("w-[250px]")},O={class:"control-area"},T={class:"icon"},V={form:"fileUpload",class:y("cursor-pointer")},q={class:"control-item"},G={class:"icon"},z={__name:"ContextMenuPage",props:{fileData:Object},setup(F){const d=x("$emitter"),r=x("$t"),m=I(),_=new b,a=f(null),v=f(0);function n(){const s=new FileReader,e=a.value.files[0];s.readAsArrayBuffer(e),s.onload=async t=>{c(e.name,t.target.result)}}async function c(s,e){const t={name:s,parents:m.params.folderId===void 0?[]:[m.params.folderId]};g(t,e),v.value+=1}async function g(s,e){d.emit("show-upload-progress"),(await _.toUploadFileByAPI(s,e)).status===200&&C(s)}function C(s){d.emit("refresh-page"),d.emit("show-success-msg",r("File upload success, your file name is")+":"+s.name)}const u=D({isShowMsg:!1});return(s,e)=>{const t=h("custom-icon"),w=h("a-menu-item");return M(),k(j,null,[o("div",K,[o("div",O,[p(w,null,{default:$(()=>[o("div",{class:"control-item",onClick:e[0]||(e[0]=l=>u.isShowMsg=!0)},[o("div",T,[p(t,{iconStr:"newFolder"})]),o("span",null,S(i(r)("New folder")),1)])]),_:1}),p(w,null,{default:$(()=>[o("label",V,[o("div",q,[o("div",G,[p(t,{iconStr:"fileUpload"})]),o("span",null,S(i(r)("File upload")),1),(M(),k("input",{key:v.value,type:"file",id:"fileUpload",multiple:"",class:y("hidden"),onChange:e[1]||(e[1]=l=>n()),ref_key:"inputElement",ref:a},null,32))])])]),_:1})])]),p(R,{pageState:u,onCloseModal:e[2]||(e[2]=l=>u.isShowMsg=!1)},null,8,["pageState"])],64)}}},J=P(z,[["__scopeId","data-v-d959cddf"]]);export{J as C};
