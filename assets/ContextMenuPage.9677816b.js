import{z as B,i as y,r as f,j as C,b as h,k as b,w as M,B as U,C as N,a as o,D as P,v as i,n as x,l as A,c as k,s as p,t as S,F as D}from"./index.3ccc0ac7.js";import{G as I,_ as j}from"./plugin-vueexport-helper.17cddac2.js";const R=["placeholder"],E={__name:"CreateFolderModal",props:{pageState:Object},emits:["closeModal"],setup($,{emit:c}){const r=B(),m=new I,_=y("$eventBus"),a=y("$t"),v=f(!1),n=f(""),d=f(!0);async function g(){if(!d.value)return;d.value=!1;const e=F();(await m.createFolderByAPI(e)).status===200&&s(),setTimeout(()=>{d.value=!0},2e3)}function F(){return n.value===""&&(n.value="Untitled"),{name:n.value,parents:r.params.folderId===void 0?"":r.params.folderId}}function u(){n.value=""}function s(){v.value=!1,_.$emit("show-success-msg",a("Folder create success")),_.$emit("refresh-page"),c("closeModal")}return(e,t)=>{const w=C("a-modal");return h(),b(w,{visible:$.pageState.isShowMsg,"onUpdate:visible":t[2]||(t[2]=l=>$.pageState.isShowMsg=l),title:i(a)("New folder"),"ok-text":i(a)("Create"),"cancel-text":i(a)("Cancel"),wrapClassName:"newFolderModal",afterClose:u(),okType:"create",width:"340px",centered:"",onOk:t[3]||(t[3]=l=>g())},{default:M(()=>[U(o("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>n.value=l),onKeypress:t[1]||(t[1]=P(l=>g(),["enter"])),placeholder:i(a)("Untitled folder"),class:x("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,40,R),[[N,n.value,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}};const K={class:x("w-[250px]")},O={class:"control-area"},T={class:"icon"},V={form:"fileUpload",class:x("cursor-pointer")},z={class:"control-item"},G={class:"icon"},q={__name:"ContextMenuPage",props:{fileData:Object},setup($){const c=y("$eventBus"),r=y("$t"),m=B(),_=new I,a=f(null),v=f(0);function n(){const s=new FileReader,e=a.value.files[0];s.readAsArrayBuffer(e),s.onload=async t=>{d(e.name,t.target.result)}}async function d(s,e){const t={name:s,parents:m.params.folderId===void 0?[]:[m.params.folderId]};g(t,e),v.value+=1}async function g(s,e){c.$emit("show-upload-progress"),(await _.toUploadFileByAPI(s,e)).status===200&&F(s)}function F(s){c.$emit("refresh-page"),c.$emit("show-success-msg",r("File upload success, your file name is")+":"+s.name)}const u=A({isShowMsg:!1});return(s,e)=>{const t=C("custom-icon"),w=C("a-menu-item");return h(),k(D,null,[o("div",K,[o("div",O,[p(w,null,{default:M(()=>[o("div",{class:"control-item",onClick:e[0]||(e[0]=l=>u.isShowMsg=!0)},[o("div",T,[p(t,{iconStr:"newFolder"})]),o("span",null,S(i(r)("New folder")),1)])]),_:1}),p(w,null,{default:M(()=>[o("label",V,[o("div",z,[o("div",G,[p(t,{iconStr:"fileUpload"})]),o("span",null,S(i(r)("File upload")),1),(h(),k("input",{key:v.value,type:"file",id:"fileUpload",multiple:"",class:x("hidden"),onChange:e[1]||(e[1]=l=>n()),ref_key:"inputElement",ref:a},null,32))])])]),_:1})])]),p(E,{pageState:u,onCloseModal:e[2]||(e[2]=l=>u.isShowMsg=!1)},null,8,["pageState"])],64)}}},J=j(q,[["__scopeId","data-v-f8f64a06"]]);export{J as C};
