import{d as L,m as A,f as r,l as T,q as _,s as E,r as B,v as te,w as l,a as e,t as o,x as n,y as m,n as t,c as p,z as P,F as G,A as K,u as z,B as Y,C as oe,D as V,E as ne,G as se,H as R,I as q,J as ae,_ as H,K as U,L as ie,M as le}from"./index.a620fda3.js";import{g as O,l as W,G as j}from"./googleAPI.6671e212.js";import{C as J}from"./ContextMenuPage.69fdb926.js";import{_ as re}from"./vite-drive.c72a7c9b.js";const ce=L({__name:"MessageModal",setup(D){return O().$emitter.on("show-success-msg",c=>{A.success(c)}),A.config({maxCount:1}),(c,i)=>{const u=_("a-space");return r(),T(u)}}}),de=L({__name:"UploadProgressModal",setup(D){const x=O(),$=W(),c=x.$emitter,i=E({"0%":"#108ee9","100%":"#87d068"}),u=B(!1),a=B(!1);c.on("show-upload-progress",b);const v=te(()=>($.getProgress===100&&k(),$.getProgress));function k(){setTimeout(()=>{a.value=!1,setTimeout(()=>{$.uploadProgress(0)},2e3)},1500)}function b(){a.value=!0}return(C,d)=>{const s=_("a-progress"),g=_("a-modal");return r(),T(g,{visible:a.value,"onUpdate:visible":d[0]||(d[0]=f=>a.value=f),wrapClassName:"loading-modal",okType:"create",width:"300px",footer:null,centered:"",maskClosable:u.value,closable:""},{default:l(()=>[e("div",{class:t(["info","set-item-center flex-col"])},[e("p",null,o(C.$t("File uploading...")),1),n(s,{type:"circle","stroke-color":i,percent:m(v)},null,8,["stroke-color","percent"])])]),_:1},8,["visible","maskClosable"])}}});const ue="/vite-google-drive-demo/assets/new.336a9a10.svg",me={id:"side-menu",class:t("mt-[-40px] min-h-screen hidden md:block md:w-64")},pe=e("img",{src:ue},null,-1),_e={class:t("items-center")},ve=e("hr",null,null,-1),fe=L({__name:"SideMenu",setup(D){const x=z(),$=Y(),c=O(),i=c.$TYPE,u=c.$t,a=new j,v=E({theme:"li",selectedKeys:["1"],openKeys:["sub1"]});async function k(s){await a.getFolderItemByAPI(s)}const b=B();async function C(){const s=await a.getDriveRootListByAPI();if(s===void 0)return;const g=s.filter(f=>f.mimeType===i.GOOGLE_FOLDER);b.value=g}function d(){$.path!=="/drive/my-drive"&&x.push("/drive/my-drive")}return(s,g)=>{const f=_("a-menu"),F=_("a-dropdown"),w=_("custom-icon"),S=_("a-sub-menu"),I=_("a-menu-item");return r(),p("div",me,[e("div",{class:t(["out-side","bg-white sticky top-[75px] left-[20px] w-fit "])},[n(F,{trigger:["click"]},{overlay:l(()=>[n(f,null,{default:l(()=>[n(J)]),_:1})]),default:l(()=>[e("div",{class:t(["new-file-area","shadow-md h-[48px] w-[118px] border-1px rounded-full set-item-center p-[20px] cursor-pointer"])},[e("div",{class:t(["icon","set-item-between ml-[-20px] w-[80px]"])},[pe,e("div",_e,o(m(u)("New")),1)])])]),_:1}),e("div",{class:t(["select-area","mt-[10px]"])},[n(f,{openKeys:v.openKeys,"onUpdate:openKeys":g[1]||(g[1]=h=>v.openKeys=h),selectedKeys:v.selectedKeys,"onUpdate:selectedKeys":g[2]||(g[2]=h=>v.selectedKeys=h),mode:"inline",style:{width:"240px",border:"none","max-height":"100vh","overflow-y":"overlay","overflow-x":"hidden"},class:t("relative left-[-20px]")},{default:l(()=>[n(S,{class:"my-drive-menu",key:"1",onClick:g[0]||(g[0]=h=>(d(),C()))},{icon:l(()=>[n(w,{iconStr:"myDrive"})]),title:l(()=>[P(o(m(u)("My Drive")),1)]),default:l(()=>[(r(!0),p(G,null,K(b.value,(h,y)=>(r(),T(S,{key:y,onClick:N=>k(h.id)},{icon:l(()=>[n(w,{iconStr:"folder"})]),title:l(()=>[P(o(h.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),n(S,{key:"2"},{icon:l(()=>[n(w,{iconStr:"computer"})]),title:l(()=>[P(o(m(u)("Computer")),1)]),_:1}),n(I,{key:"3"},{icon:l(()=>[n(w,{iconStr:"sharedDrives"})]),default:l(()=>[e("span",null,o(m(u)("Shared drives")),1)]),_:1}),n(I,{key:"4"},{icon:l(()=>[n(w,{iconStr:"recent"})]),default:l(()=>[e("span",null,o(m(u)("Recent")),1)]),_:1}),n(I,{key:"5"},{icon:l(()=>[n(w,{iconStr:"starrted"})]),default:l(()=>[e("span",null,o(m(u)("Starrted")),1)]),_:1}),n(I,{key:"6"},{icon:l(()=>[n(w,{iconStr:"trash"})]),default:l(()=>[e("span",null,o(m(u)("Trash")),1)]),_:1}),ve,n(I,{key:"7"},{icon:l(()=>[n(w,{iconStr:"storage"})]),default:l(()=>[e("span",null,o(m(u)("Storage")),1)]),_:1})]),_:1},8,["openKeys","selectedKeys"])])])])}}}),he={id:"nav-bar"},ge={class:"nav-outside"},xe={class:t("hidden md:block ml-3 text-slate-500 text-[22px] min-w-[80px] whitespace-nowrap")},ye={class:t("flex items-center")},we=["placeholder"],$e=["onClick"],be=["src"],ke={class:"name"},Me=L({__name:"navBar",setup(D){const x=O(),$=x.$globalFunction,c=x.$emitter,i=x.$TYPE,u=new j,{locale:a}=oe(),v=z();c.on("clear-search-input",()=>{d.value=""});function k(h){a.value=h.key}const b=B(!1);function C(){b.value=!b.value}const d=B(""),s=B();async function g(){if(d.value==="")return;const h=await u.searchFileByAPI(d.value);s.value=h}const f=B();function F(){s.value=[],v.push({path:"/drive/search",query:{q:d.value}}),S()}function w(){v.replace("/drive/my-drive")}function S(){f.value!==void 0&&f.value.blur()}function I(h){if(h.mimeType===i.GOOGLE_FOLDER)return $.goToFolder(h.id);$.openFileView(h.webViewLink),S()}return(h,y)=>{const N=_("Icon"),Z=_("a-menu-item"),Q=_("a-menu"),X=_("a-dropdown");return r(),p("nav",he,[e("div",ge,[e("div",{class:t(["nav-inside","flex items-center justify-start"])},[e("div",{class:t(["img-area","set-item-center cursor-pointer md:mr-[60px] md:ml-[20px]"]),onClick:y[0]||(y[0]=M=>w())},[e("img",{src:re,class:t("my-2.5 min-w-[40px] w-[40px] ml-[10px]")},null,2),e("div",xe,o(h.$t("drive")),1)]),e("div",{class:t(["input","ml-3 relative w-[400px] basis-[700px]"])},[e("div",ye,[V(e("input",{type:"text","onUpdate:modelValue":y[1]||(y[1]=M=>d.value=M),ref_key:"searchInput",ref:f,onKeyup:y[2]||(y[2]=M=>g()),onFocus:y[3]||(y[3]=M=>C()),onBlur:y[4]||(y[4]=M=>C()),onKeypress:y[5]||(y[5]=se(M=>F(),["enter"])),placeholder:h.$t("Search from Google Drive"),class:t("border max-w-[500px] min-w-[230px] w-[100%] h-12 px-14 rounded-lg bg-slate-100 focus:bg-inherit placeholder:text-base")},null,40,we),[[ne,d.value]]),n(N,{class:"absolute top-3 left-3",icon:"carbon:search",color:"grayText",width:"25",height:"25"}),d.value!==""?(r(),T(N,{key:0,onClick:y[6]||(y[6]=M=>d.value=""),icon:"iconoir:cancel",color:"grayText",width:"25",height:"25",class:t("cursor-pointer ml-[-50px]")})):R("",!0)]),V(e("div",{class:t(["search-result-area","absolute top-[43px] border-solid border-2 border-gray-300  max-w-[500px] min-w-[230px] w-[100%] min-h-[50px] max-h-[200px] overflow-auto bg-white rounded-b-lg"])},[(r(!0),p(G,null,K(s.value,(M,ee)=>(r(),p("div",{class:"serch-result-item",key:ee},[e("div",{class:t(["result-body","hover:bg-slate-100 h-[50px] flex items-center"]),onClick:tt=>I(M),onMousedown:y[7]||(y[7]=ae(()=>{},["prevent"]))},[e("img",{src:m($).setIcon(M.iconLink),class:t("h-[20px] w-[20px] ml-[10px] mr-[10px]")},null,8,be),e("div",ke,o(M.name),1)],40,$e)]))),128))],512),[[q,s.value!==void 0&&s.value.length>0&&d.value!==""&&b.value]])]),e("div",{class:t(["setting","ml-[30px]"])},[n(X,{trigger:["click"]},{overlay:l(()=>[n(Q,{onClick:k,modelValue:h.$i18n.locale,"onUpdate:modelValue":y[8]||(y[8]=M=>h.$i18n.locale=M)},{default:l(()=>[(r(!0),p(G,null,K(h.$i18n.availableLocales,M=>(r(),T(Z,{key:`${M}`},{default:l(()=>[P(o(M),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),default:l(()=>[n(N,{icon:"ant-design:setting-outlined",color:"grayText",width:"25",height:"25",class:t("cursor-pointer focus:outline-none")},{default:l(()=>[P(o(h.$t("language")),1)]),_:1})]),_:1})]),e("div",{class:t(["profile","mr-10"])})])])])}}}),Ie={id:"bread-crumbs",class:t("border-1px h-[48px] bg-white set-item-start")},Se={class:"side-meun"},Ce=L({__name:"BreadCrumbs",emits:["openInfoMenu"],setup(D,{emit:x}){const c=O().$t,i=Y();function u(){if(i.name==="my-drive"||i.name==="my-drive-folders")return c("My Drive");if(i.name==="search-result-page")return c("Search result")}function a(){x("openInfoMenu")}return(v,k)=>{const b=_("a-menu"),C=_("Icon"),d=_("a-dropdown"),s=_("custom-icon");return r(),p("div",Ie,[e("div",Se,[n(d,{trigger:["click"]},{overlay:l(()=>[n(b,null,{default:l(()=>[n(J)]),_:1})]),default:l(()=>[n(C,{icon:"material-symbols:menu",color:"grayText",width:"25",height:"25",class:t("ml-[18px] md:hidden")})]),_:1})]),e("div",{class:t(["content","md:pl-[260px] pl-[25px] w-100 text-slate-500 text-[18px] shrink-0"])},o(u()),1),e("div",{class:t(["control-icon","hidden md:block  2xl:ml-[65%] xl:ml-[55%] lg:ml-[45%] md:ml-[35%] cursor-pointer"]),onClick:k[0]||(k[0]=g=>a())},[n(s,{iconStr:"info"})])])}}}),Fe={key:0,class:"noChooseFile"},De={class:"img"},Te={key:1,class:"info-area"},Be=["src"],Le=["src"],Pe={class:"access"},Oe={class:"system-properties"},Ee={class:t("w-[110px]")},Ge={key:0},Ke={key:1},Ne=L({__name:"InfoMenuDetail",setup(D){const x=O(),$=x.$emitter,c=x.$TYPE,i=x.$t,u=x.$globalFunction,a=E({});$.on("send-file-data",s=>{a.data=s});function v(s,g=1){if(s===void 0)return!1;const f=parseInt(s);if(f===0)return"0 Bytes";const F=1024,w=g<0?0:g,S=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],I=Math.floor(Math.log(f)/Math.log(F));return parseFloat((f/Math.pow(F,I)).toFixed(w))+" "+S[I]}function k(s){return new Date(s).toLocaleString()}function b(s){return s===c.IMG?i("Image"):s===c.WORD?"Word":s===c.GOOGLE_SHEETS?i("Google Sheets"):s===c.PDF?"PDF":s===c.GOOGLE_FOLDER?i("Google Drive Folder"):s===c.GOOGLE_DOCS?i("Google Docs"):i("Other")}function C(s){return s.displayName===void 0?i("Anyone with link"):s.displayName!==void 0&&s.role==="owner"?s.displayName+i("is owner"):s.displayName}function d(s){var f;return((f=s.data)==null?void 0:f.owners)[0].me?i("Me"):""}return(s,g)=>{var S;const f=_("custom-icon"),F=_("Icon"),w=_("a-tooltip");return a.data==null?(r(),p("div",Fe,[e("div",{class:t(["img-area","flex flex-col mt-[20px]"])},[e("div",De,[n(f,{iconStr:"fileDeatil"})]),e("div",{class:t(["text opacity-60 mx-auto","mt-[20px]"])},o(m(i)("Select a file or folder to view its details")),1)])])):(r(),p("div",Te,[e("div",{class:t(["img","h-[150px] w-[100%] border-1px set-item-center overflow-hidden"])},[a.data.thumbnailLink!==void 0?(r(),p("img",{key:0,class:t("h-[100%]"),referrerPolicy:"no-referrer",src:m(u).setIcon(a.data.thumbnailLink)},null,8,Be)):(r(),T(F,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"100",height:"100%"}))]),e("div",{class:t(["info-detail","p-[16px]"])},[e("div",{class:t(["has-access","text-lg opacity-75"])},o(m(i)("Who has access")),1),e("div",{class:t(["access","mt-[20px] mb-[20px] overflow-auto max-h-[60px]"])},[a.data.shared?(r(!0),p(G,{key:0},K(a.data.permissions,I=>(r(),p("div",{class:t(["access-info",""])},[e("div",{class:t(["access-arr","set-item-start mb-[5px]"])},[I.photoLink!==void 0?(r(),p("img",{key:0,src:m(u).setIcon(I.photoLink),class:t("h-[25px] mr-[5px] rounded-full")},null,8,Le)):(r(),T(F,{key:1,icon:"ci:link",color:"#FFFFFF",width:"25",height:"25",class:t("bg-lime-600 mr-[5px] rounded-full")})),e("div",Pe,o(C(I)),1)])]))),256)):(r(),p("div",{key:1,class:t(["access-info","set-item-start h-[60px]"])},[n(f,{iconStr:"noShare"}),e("div",{class:t(["no-shared","ml-[15px]"])},o(m(i)("Not shared")),1)]))]),e("div",Oe,[e("div",{class:t(["title","text-lg opacity-75 title-color mb-[10px]"])},o(m(i)("System properties")),1),e("table",null,[e("tbody",null,[e("tr",null,[e("td",Ee,o(m(i)("Type")),1),n(w,{placement:"bottom"},{title:l(()=>[P(o(a.data.mimeType),1)]),default:l(()=>[e("td",null,o(b(a.data.mimeType)),1)]),_:1})]),v(a.data.size)!==!1?(r(),p("tr",Ge,[e("td",null,o(m(i)("Size")),1),e("td",null,o(v(a.data.size)),1)])):R("",!0),v(a.data.quotaBytesUsed)!==!1?(r(),p("tr",Ke,[e("td",null,o(m(i)("Storage used")),1),e("td",null,o(v(a.data.quotaBytesUsed)),1)])):R("",!0),e("tr",null,[e("td",null,o(m(i)("Location")),1),e("td",null,o((S=a.data.spaces)==null?void 0:S.join(",")),1)]),e("tr",null,[e("td",null,o(m(i)("Owner")),1),e("td",null,o(d(a)),1)]),e("tr",null,[e("td",null,o(m(i)("Modified")),1),e("td",null,o(k(a.data.modifiedTime)),1)]),e("tr",null,[e("td",null,o(m(i)("Opened")),1),e("td",null,o(k(a.data.viewedByMeTime)),1)]),e("tr",null,[e("td",null,o(m(i)("Created")),1),e("td",null,o(k(a.data.createdTime)),1)])])])])])]))}}}),Ve={key:0,class:"noChooseFile"},Re=e("div",{class:"img"},null,-1);function Ae(D,x){return r(),p("div",Ve,[e("div",{class:t(["img-area","flex flex-col mt-[20px]"])},[Re,e("div",{class:t(["text opacity-60 mx-auto","mt-[20px]"])},o(D.$t("No activity")),1)])])}const Ue={},ze=H(Ue,[["render",Ae]]),Ye={class:"outer"},qe={class:"inside"},He={class:"header"},We={class:"file-name"},je=["src"],Je=["onClick"],Ze={class:"body"},Qe=L({__name:"InfoMenu",emits:["closeInfoMenu"],setup(D,{emit:x}){const $=O(),c=$.$globalFunction,i=$.$emitter,u=E([{name:"Details",component:U(Ne)},{name:"Activity",component:U(ze)}]);function a(d){v.views=d}const v=E({views:u[0].component});function k(d){if(d===v.views)return!0}const b=E({});i.on("send-file-data",d=>{b.data=d});function C(){x("closeInfoMenu")}return(d,s)=>{const g=_("custom-icon"),f=_("a-tooltip"),F=_("Icon");return r(),p("div",Ye,[e("div",qe,[e("div",He,[e("div",{class:t(["header-info","h-[72px] set-item-around"])},[e("div",We,[b.data==null?(r(),p("div",{key:0,class:t(["no-chose-data","flex"])},[n(g,{iconStr:"myDrive"}),e("div",{class:t(["title","text-[22px] text-slate-500"])},o(d.$t("My Drive")),1)])):(r(),p("div",{key:1,class:t(["has-data","flex"])},[e("img",{src:m(c).setIcon(b.data.iconLink),class:t("w-[20px] h-[20px] mt-[8px] mr-[10px] set-item-start")},null,8,je),n(f,{placement:"bottom"},{title:l(()=>[P(o(b.data.name),1)]),default:l(()=>[e("div",{class:t(["title","text-[22px] text-slate-500 w-[160px] truncate"])},o(b.data.name),1)]),_:1})]))]),n(F,{onClick:s[0]||(s[0]=w=>C()),icon:"iconoir:cancel",color:"grayText",width:"25",height:"25",class:t("cursor-pointer")})]),e("div",{class:t(["header-control","h-[50px] w-[100%] set-item-around border-b-2"])},[(r(!0),p(G,null,K(u,(w,S)=>(r(),p("div",{class:t(["view",{"in-this-page":k(w.component),"w-[48%] h-[50px] set-item-center cursor-pointer opacity-80 border-b-4 border-transparent hover:border-b-4 hover:border-gray-500":!0}]),onClick:I=>a(w.component),key:S},o(d.$t(w.name)),11,Je))),128))])]),e("div",Ze,[(r(),T(le,null,[(r(),T(ie(v.views),{key:v.views}))],1024))])])])}}});const Xe=H(Qe,[["__scopeId","data-v-c4b3d0c0"]]),et={class:"page-content flex"},it=L({__name:"DriveHomePage",setup(D){const x=W();$();function $(){if(window.sessionStorage.getItem("token")==null)return;const u=JSON.parse(window.sessionStorage.getItem("token")||"{}");x.changeTokenData(u)}const c=B(!0);function i(){c.value===!0?c.value=!1:c.value=!0}return(u,a)=>{const v=_("router-view");return r(),p(G,null,[e("div",{class:t(["home-page z-50 relative","h-screen overflow-hidden"])},[n(Me,{class:t("sticky top-0 z-50 bg-white shadow-md")}),n(Ce,{onOpenInfoMenu:a[0]||(a[0]=k=>i()),class:t("sticky top-[60px] h-[50px]")}),e("div",et,[n(fe,{class:t("shrink-0 ")}),e("div",{class:t(["conter","w-[100%] h-screen overflow-auto"])},[n(v)]),V(e("div",{class:t(["right-menu","hidden border-1px sticky top-0 md:block md:basis-[500px]"])},[n(Xe,{onCloseInfoMenu:a[1]||(a[1]=k=>c.value=!1)})],512),[[q,c.value]])])]),n(ce),n(de)],64)}}});export{it as default};
