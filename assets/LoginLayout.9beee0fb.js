import{_ as c}from"./vite-drive.c72a7c9b.js";import{d as _,r as f,o as F,c as i,a as n,t as h,b as B,e as r,u as x}from"./index.6c0a173f.js";import{l as C,g as k}from"./googleApi.619aee65.js";const v="/vite-google-drive-demo/assets/noSupport.50da7ab3.png",y={key:0},A=B('<article class="flex h-screen w-screen justify-center flex-col items-center"><img src="'+c+'" class="mb-[20px]"><p class="mx-auto px-[15px]">\u60A8\u6240\u4F7F\u7528\u7684\u5167\u5D4C\u5F0F\u700F\u89BD\u5668\u4E26\u4E0D\u652F\u63F4Google OAuth\u767B\u5165\u653F\u7B56\uFF0C\u8ACB\u4F7F\u7528\u7DB2\u9801\u700F\u89BD\u5668\u958B\u555F\u6B64Demo Web</p><p>Google OAuth</p><img class="w-[95%]" src="'+v+'"><a href="https://developers.googleblog.com/2016/08/modernizing-oauth-interactions-in-native-apps.html?fbclid=IwAR2KDyMTyHkv1iik96VarrFpfjp8Y6T78J1_sYwV30FV_Uo0ITV0WZw2LYY">\u8A73\u60C5\u8ACB\u898B</a></article>',1),b=[A],D={key:1},w={class:"flex sm:min-h-screen sm:mt-0 w-screen mt-[35%] justify-center flex-col items-center"},S=n("img",{class:"mb-5",src:c},null,-1),Y=_({__name:"LoginLayout",setup(E){const{userAgent:o}=navigator,t=C(),a=x(),u=f(!1);F(()=>{l()});function l(){o.includes("Firefox/")||o.includes("Edg/")||o.includes("Chrome/")||o.includes("Safari/")||(u.value=!0)}function d(){return google.accounts.oauth2.initCodeClient({client_id:t.googleClientData.clientId,scope:t.googleClientData.scope,ux_mode:"popup",redirect_uri:t.googleClientData.redirecutURI,callback:g})}function p(){d().requestCode()}async function g(s){const e=await k.getAccountTokenByAPI(s.code);t.changeTokenData(e),m(e)}function m(s){a.replace("drive"),window.sessionStorage.setItem("token",JSON.stringify(s))}return(s,e)=>u.value?(r(),i("div",y,b)):(r(),i("div",D,[n("article",w,[S,n("button",{class:"border-2 border-slate-500 h-13 p-2 px-5 hover:text-sky-400 hover:border-sky-400 rounded-lg text-slate-500",onClick:e[0]||(e[0]=I=>p())},h("\u767B\u5165Google\u4EE5\u4F7F\u7528\u96F2\u7AEF\u786C\u789F"))])]))}});export{Y as default};
