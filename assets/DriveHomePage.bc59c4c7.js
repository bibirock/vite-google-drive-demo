import{i as S,m as V,j as v,b as r,k as C,l as L,r as D,q as Q,w as i,a as e,t as o,s as n,v as f,n as t,c as _,x as T,F as P,y as O,u as A,z as U,A as X,B as E,C as ee,D as te,E as G,G as z,H as oe,I as R,J as ne,K as se}from"./index.3ccc0ac7.js";import{l as Y,G as j,_ as q}from"./plugin-vueexport-helper.17cddac2.js";import{C as H}from"./ContextMenuPage.9677816b.js";import{_ as ae}from"./vite-drive.c72a7c9b.js";const ie={__name:"MessageModal",setup(B){return S("$eventBus").$on("show-success-msg",a=>{V.success(a)}),V.config({maxCount:1}),(a,l)=>{const c=v("a-space");return r(),C(c)}}};const le={__name:"UploadProgressModal",emits:["closeModal"],setup(B,{emit:b}){const a=Y(),l=S("$eventBus"),c=L({"0%":"#108ee9","100%":"#87d068"}),p=D(!1),m=D(!1);l.$on("show-upload-progress",w);const d=Q(()=>(a.getProgress===100&&setTimeout(()=>{p.value=!1,setTimeout(()=>{a.uploadProgress(0)},2e3)},1500),a.getProgress));function w(){p.value=!0}return(s,g)=>{const y=v("a-progress"),h=v("a-modal");return r(),C(h,{visible:p.value,"onUpdate:visible":g[0]||(g[0]=I=>p.value=I),wrapClassName:"loading-modal",okType:"create",width:"300px",footer:null,centered:"",maskClosable:m.value,closable:""},{default:i(()=>[e("div",{class:t(["info","set-item-center flex-col"])},[e("p",null,o(s.$t("File uploading...")),1),n(y,{type:"circle","stroke-color":c,percent:f(d)},null,8,["stroke-color","percent"])])]),_:1},8,["visible","maskClosable"])}}},re="/vite-google-drive-demo/assets/new.336a9a10.svg",ce={id:"side-menu",class:t("mt-[-40px] min-h-screen hidden md:block md:w-64")},de=e("img",{src:re},null,-1),ue={class:t("items-center")},pe=e("hr",null,null,-1),me={__name:"SideMenu",setup(B){const b=A(),a=U(),l=S("$t"),c=S("$TYPE"),p=new j,m=L({theme:"li",selectedKeys:["1"],openKeys:["sub1"]});async function d(y){await p.getFolderItemByAPI(y)}const w=D([]);async function s(){const h=(await p.getDriveRootListByAPI()).filter(I=>I.mimeType===c.GOOGLE_FOLDER);w.value=h}function g(){a.path!=="/drive/my-drive"&&b.push("/drive/my-drive")}return(y,h)=>{const I=v("a-menu"),k=v("a-dropdown"),M=v("custom-icon"),F=v("a-sub-menu"),x=v("a-menu-item");return r(),_("div",ce,[e("div",{class:t(["out-side","bg-white sticky top-[75px] left-[20px] w-fit "])},[n(k,{trigger:["click"]},{overlay:i(()=>[n(I,null,{default:i(()=>[n(H)]),_:1})]),default:i(()=>[e("div",{class:t(["new-file-area","shadow-md h-[48px] w-[118px] border-1px rounded-full set-item-center p-[20px] cursor-pointer"])},[e("div",{class:t(["icon","set-item-between ml-[-20px] w-[80px]"])},[de,e("div",ue,o(f(l)("New")),1)])])]),_:1}),e("div",{class:t(["select-area","mt-[10px]"])},[n(I,{openKeys:m.openKeysopenKeys,"onUpdate:openKeys":h[1]||(h[1]=u=>m.openKeysopenKeys=u),selectedKeys:m.selectedKeysselectedKeys,"onUpdate:selectedKeys":h[2]||(h[2]=u=>m.selectedKeysselectedKeys=u),mode:"inline",style:{width:"240px",border:"none","max-height":"100vh","overflow-y":"overlay","overflow-x":"hidden"},class:t("relative left-[-20px]")},{default:i(()=>[n(F,{class:"my-drive-menu",key:"1",onClick:h[0]||(h[0]=u=>(g(),s()))},{icon:i(()=>[n(M,{iconStr:"myDrive"})]),title:i(()=>[T(o(f(l)("My Drive")),1)]),default:i(()=>[(r(!0),_(P,null,O(w.value,(u,K)=>(r(),C(F,{key:K,onClick:N=>d(u.id)},{icon:i(()=>[n(M,{iconStr:"folder"})]),title:i(()=>[T(o(u.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),n(F,{key:"2"},{icon:i(()=>[n(M,{iconStr:"computer"})]),title:i(()=>[T(o(f(l)("Computer")),1)]),_:1}),n(x,{key:"3"},{icon:i(()=>[n(M,{iconStr:"sharedDrives"})]),default:i(()=>[e("span",null,o(f(l)("Shared drives")),1)]),_:1}),n(x,{key:"4"},{icon:i(()=>[n(M,{iconStr:"recent"})]),default:i(()=>[e("span",null,o(f(l)("Recent")),1)]),_:1}),n(x,{key:"5"},{icon:i(()=>[n(M,{iconStr:"starrted"})]),default:i(()=>[e("span",null,o(f(l)("Starrted")),1)]),_:1}),n(x,{key:"6"},{icon:i(()=>[n(M,{iconStr:"trash"})]),default:i(()=>[e("span",null,o(f(l)("Trash")),1)]),_:1}),pe,n(x,{key:"7"},{icon:i(()=>[n(M,{iconStr:"storage"})]),default:i(()=>[e("span",null,o(f(l)("Storage")),1)]),_:1})]),_:1},8,["openKeys","selectedKeys"])])])])}}},_e={id:"nav-bar"},ve={class:"nav-outside"},fe={class:t("hidden md:block ml-3 text-slate-500 text-[22px] min-w-[80px] whitespace-nowrap")},he={class:t("flex items-center")},xe=["placeholder"],ge=["onClick"],ye=["src"],we={class:"name"},$e={__name:"navBar",setup(B){const b=S("$eventBus"),a=S("$TYPE"),l=S("$globalF",()=>{},!1),c=new j,{locale:p}=X(),m=D([]),d=D(""),w=D(null),s=A(),g=D(!1);b.$on("clear-search-input",()=>{console.log("object"),d.value=""});function y(x){p.value=x.key}function h(){g.value=!g.value}async function I(){if(d.value==="")return;const x=await c.searchFileByAPI(d.value);m.value=x}function k(){m.value=[],s.push({path:"/drive/search",query:{q:d.value}}),w.value.blur()}function M(){s.replace("/drive/my-drive")}function F(x){if(w.value.blur(),x.mimeType===a.GOOGLE_FOLDER)return l.goToFolder(x.id);l.openFileView(x.webViewLink)}return(x,u)=>{const K=v("Icon"),N=v("a-menu-item"),W=v("a-menu"),J=v("a-dropdown");return r(),_("nav",_e,[e("div",ve,[e("div",{class:t(["nav-inside","flex items-center justify-start"])},[e("div",{class:t(["img-area","set-item-center cursor-pointer md:mr-[60px] md:ml-[20px]"]),onClick:u[0]||(u[0]=$=>M())},[e("img",{src:ae,class:t("my-2.5 min-w-[40px] w-[40px] ml-[10px]")},null,2),e("div",fe,o(x.$t("drive")),1)]),e("div",{class:t(["input","ml-3 relative w-[400px] basis-[700px]"])},[e("div",he,[E(e("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=$=>d.value=$),ref_key:"searchInput",ref:w,onKeyup:u[2]||(u[2]=$=>I()),onFocus:u[3]||(u[3]=$=>h()),onBlur:u[4]||(u[4]=$=>h()),onKeypress:u[5]||(u[5]=te($=>k(),["enter"])),placeholder:x.$t("Search from Google Drive"),class:t("border max-w-[500px] min-w-[230px] w-[100%] h-12 px-14 rounded-lg bg-slate-100 focus:bg-inherit placeholder:text-base")},null,40,xe),[[ee,d.value]]),n(K,{class:"absolute top-3 left-3",icon:"carbon:search",color:"grayText",width:"25",height:"25"}),d.value!==""?(r(),C(K,{key:0,onClick:u[6]||(u[6]=$=>d.value=""),icon:"iconoir:cancel",color:"grayText",width:"25",height:"25",class:t("cursor-pointer ml-[-50px]")})):G("",!0)]),E(e("div",{class:t(["search-result-area","absolute top-[43px] border-solid border-2 border-gray-300  max-w-[500px] min-w-[230px] w-[100%] min-h-[50px] max-h-[200px] overflow-auto bg-white rounded-b-lg"])},[(r(!0),_(P,null,O(m.value,($,Z)=>(r(),_("div",{class:"serch-result-item",key:Z},[e("div",{class:t(["result-body","hover:bg-slate-100 h-[50px] flex items-center"]),onClick:Qe=>F($),onMousedown:u[7]||(u[7]=oe(()=>{},["prevent"]))},[e("img",{src:$.iconLink,class:t("h-[20px] w-[20px] ml-[10px] mr-[10px]")},null,8,ye),e("div",we,o($.name),1)],40,ge)]))),128))],512),[[z,m.value.length>0&&d.value!==""&&g.value]])]),e("div",{class:t(["setting","ml-[30px]"])},[n(J,{trigger:["click"]},{overlay:i(()=>[n(W,{onClick:y,modelValue:x.$i18n.locale,"onUpdate:modelValue":u[8]||(u[8]=$=>x.$i18n.locale=$)},{default:i(()=>[(r(!0),_(P,null,O(x.$i18n.availableLocales,$=>(r(),C(N,{key:`${$}`},{default:i(()=>[T(o($),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),default:i(()=>[n(K,{icon:"ant-design:setting-outlined",color:"grayText",width:"25",height:"25",class:t("cursor-pointer focus:outline-none")},{default:i(()=>[T(o(x.$t("language")),1)]),_:1})]),_:1})]),e("div",{class:t(["profile","mr-10"])})])])])}}},ke={id:"bread-crumbs",class:t("border-1px h-[48px] bg-white set-item-start")},be={class:"side-meun"},Ie={__name:"BreadCrumbs",emits:["openInfoMenu"],setup(B,{emit:b}){const a=U(),l=S("$t");function c(){if(a.name==="my-drive"||a.name==="my-drive-folders")return l("My Drive");if(a.name==="search-result-page")return l("Search result")}function p(){b("openInfoMenu")}return(m,d)=>{const w=v("a-menu"),s=v("Icon"),g=v("a-dropdown"),y=v("custom-icon");return r(),_("div",ke,[e("div",be,[n(g,{trigger:["click"]},{overlay:i(()=>[n(w,null,{default:i(()=>[n(H)]),_:1})]),default:i(()=>[n(s,{icon:"material-symbols:menu",color:"grayText",width:"25",height:"25",class:t("ml-[18px] md:hidden")})]),_:1})]),e("div",{class:t(["content","md:pl-[260px] pl-[25px] w-100 text-slate-500 text-[18px] shrink-0"])},o(c()),1),e("div",{class:t(["control-icon","hidden md:block  2xl:ml-[65%] xl:ml-[55%] lg:ml-[45%] md:ml-[35%] cursor-pointer"]),onClick:d[0]||(d[0]=h=>p())},[n(y,{iconStr:"Info"})])])}}},Me={key:0,class:"noChooseFile"},Se={class:"img"},Be={key:1,class:"info-area"},Ce=["src"],De=["src"],Te={class:"access"},Fe={class:"system-properties"},Le={class:t("w-[110px]")},Pe={key:0},Ke={key:1},Oe={__name:"InfoMenuDetail",setup(B){const b=S("$eventBus"),a=S("$t"),l=S("$TYPE"),c=L({});b.$on("send-file-data",s=>{c.data=s});function p(s,g=1){if(s==0)return"0 Bytes";if(s==null)return!1;const y=1024,h=g<0?0:g,I=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],k=Math.floor(Math.log(s)/Math.log(y));return parseFloat((s/Math.pow(y,k)).toFixed(h))+" "+I[k]}function m(s){return new Date(s).toLocaleString()}function d(s){return s===l.IMG?a("Image"):s===l.WORD?"Word":s===l.GOOGLE_SHEETS?a("Google Sheets"):s===l.PDF?"PDF":s===l.GOOGLE_FOLDER?a("Google Drive Folder"):s===l.GOOGLE_DOCS?a("Google Docs"):a("Other")}function w(s){return s.displayName===void 0?a("Anyone with link"):s.displayName!==void 0&&s.role==="owner"?s.displayName+a("is owner"):s.displayName}return(s,g)=>{const y=v("custom-icon"),h=v("Icon"),I=v("a-tooltip");return c.data==null?(r(),_("div",Me,[e("div",{class:t(["img-area","flex flex-col mt-[20px]"])},[e("div",Se,[n(y,{iconStr:"fileDeatil"})]),e("div",{class:t(["text opacity-60 mx-auto","mt-[20px]"])},o(f(a)("Select a file or folder to view its details")),1)])])):(r(),_("div",Be,[e("div",{class:t(["img","h-[150px] w-[100%] border-1px set-item-center overflow-hidden"])},[c.data.thumbnailLink!==void 0?(r(),_("img",{key:0,class:t("h-[100%]"),referrerPolicy:"no-referrer",src:c.data.thumbnailLink},null,8,Ce)):(r(),C(h,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"100",height:"100%"}))]),e("div",{class:t(["info-detail","p-[16px]"])},[e("div",{class:t(["has-access","text-lg opacity-75"])},o(f(a)("Who has access")),1),e("div",{class:t(["access","mt-[20px] mb-[20px] overflow-auto max-h-[60px]"])},[c.data.shared?(r(!0),_(P,{key:0},O(c.data.permissions,k=>(r(),_("div",{class:t(["access-info",""])},[e("div",{class:t(["access-arr","set-item-start mb-[5px]"])},[k.photoLink!==void 0?(r(),_("img",{key:0,src:k.photoLink,class:t("h-[25px] mr-[5px] rounded-full")},null,8,De)):(r(),C(h,{key:1,icon:"ci:link",color:"#FFFFFF",width:"25",height:"25",class:t("bg-lime-600 mr-[5px] rounded-full")})),e("div",Te,o(w(k)),1)])]))),256)):(r(),_("div",{key:1,class:t(["access-info","set-item-start h-[60px]"])},[n(y,{iconStr:"noShare"}),e("div",{class:t(["no-shared","ml-[15px]"])},o(f(a)("Not shared")),1)]))]),e("div",Fe,[e("div",{class:t(["title","text-lg opacity-75 title-color mb-[10px]"])},o(f(a)("System properties")),1),e("table",null,[e("tbody",null,[e("tr",null,[e("td",Le,o(f(a)("Type")),1),n(I,{placement:"bottom"},{title:i(()=>[T(o(c.data.mimeType),1)]),default:i(()=>[e("td",null,o(d(c.data.mimeType)),1)]),_:1})]),p(c.data.size)!==!1?(r(),_("tr",Pe,[e("td",null,o(f(a)("Size")),1),e("td",null,o(p(c.data.size)),1)])):G("",!0),p(c.data.quotaBytesUsed)!==!1?(r(),_("tr",Ke,[e("td",null,o(f(a)("Storage used")),1),e("td",null,o(p(c.data.quotaBytesUsed)),1)])):G("",!0),e("tr",null,[e("td",null,o(f(a)("Location")),1),e("td",null,o(c.data.spaces.join(",")),1)]),e("tr",null,[e("td",null,o(f(a)("Owner")),1),e("td",null,o(c.data.owners[0].me?f(a)("Me"):""),1)]),e("tr",null,[e("td",null,o(f(a)("Modified")),1),e("td",null,o(m(c.data.modifiedTime)),1)]),e("tr",null,[e("td",null,o(f(a)("Opened")),1),e("td",null,o(m(c.data.viewedByMeTime)),1)]),e("tr",null,[e("td",null,o(f(a)("Created")),1),e("td",null,o(m(c.data.createdTime)),1)])])])])])]))}}},Ee={key:0,class:"noChooseFile"},Ge=e("div",{class:"img"},null,-1);function Ne(B,b){return r(),_("div",Ee,[e("div",{class:t(["img-area","flex flex-col mt-[20px]"])},[Ge,e("div",{class:t(["text opacity-60 mx-auto","mt-[20px]"])},o(B.$t("No activity")),1)])])}const Ve={},Re=q(Ve,[["render",Ne]]);const Ae={class:"outer"},Ue={class:"inside"},ze={class:"header"},Ye={class:"file-name"},je=["src"],qe=["onClick"],He={class:"body"},We={__name:"InfoMenu",emits:["closeInfoMenu"],setup(B,{emit:b}){const a=S("$eventBus"),l=L([{name:"Details",component:R(Oe)},{name:"Activity",component:R(Re)}]);function c(s){p.views=s}const p=L({views:l[0].component});function m(s){if(s===p.views)return!0}const d=L({});a.$on("send-file-data",s=>{d.data=s});function w(){b("closeInfoMenu")}return(s,g)=>{const y=v("custom-icon"),h=v("a-tooltip"),I=v("Icon");return r(),_("div",Ae,[e("div",Ue,[e("div",ze,[e("div",{class:t(["header-info","h-[72px] set-item-around"])},[e("div",Ye,[d.data==null?(r(),_("div",{key:0,class:t(["no-chose-data","flex"])},[n(y,{iconStr:"myDrive"}),e("div",{class:t(["title","text-[22px] text-slate-500"])},o(s.$t("My Drive")),1)])):(r(),_("div",{key:1,class:t(["has-data","flex"])},[e("img",{src:d.data.iconLink,class:t("w-[20px] h-[20px] mt-[8px] mr-[10px] set-item-start")},null,8,je),n(h,{placement:"bottom"},{title:i(()=>[T(o(d.data.name),1)]),default:i(()=>[e("div",{class:t(["title","text-[22px] text-slate-500 w-[160px] truncate"])},o(d.data.name),1)]),_:1})]))]),n(I,{onClick:g[0]||(g[0]=k=>w()),icon:"iconoir:cancel",color:"grayText",width:"25",height:"25",class:t("cursor-pointer")})]),e("div",{class:t(["header-control","h-[50px] w-[100%] set-item-around border-b-2"])},[(r(!0),_(P,null,O(l,(k,M)=>(r(),_("div",{class:t(["view","w-[48%] h-[50px] set-item-center cursor-pointer opacity-80 border-b-4 border-transparent hover:border-b-4 hover:border-gray-500",{"in-this-page":m(k.component)}]),onClick:F=>c(k.component),key:M},o(s.$t(k.name)),11,qe))),128))])]),e("div",He,[(r(),C(se,null,[(r(),C(ne(p.views),{key:p.views}))],1024))])])])}}},Je=q(We,[["__scopeId","data-v-fad30843"]]),Ze={class:"page-content flex"},nt={__name:"DriveHomePage",setup(B){const b=Y();a();function a(){if(window.sessionStorage.getItem("token")==null)return;const p=JSON.parse(window.sessionStorage.getItem("token"));b.changeTokenData(p)}const l=D(!0);function c(){l.value===!0?l.value=!1:l.value=!0}return(p,m)=>{const d=v("router-view");return r(),_(P,null,[e("div",{class:t(["home-page z-50 relative","h-screen overflow-hidden"])},[n($e,{class:t("sticky top-0 z-50 bg-white shadow-md")}),n(Ie,{onOpenInfoMenu:m[0]||(m[0]=w=>c()),class:t("sticky top-[60px] h-[50px]")}),e("div",Ze,[n(me,{class:t("shrink-0 ")}),e("div",{class:t(["conter","w-[100%] h-screen overflow-auto"])},[n(d)]),E(e("div",{class:t(["right-menu","hidden border-1px sticky top-0 md:block md:basis-[500px]"])},[n(Je,{onCloseInfoMenu:m[1]||(m[1]=w=>l.value=!1)})],512),[[z,l.value]])])]),n(ie),n(le)],64)}}};export{nt as default};
