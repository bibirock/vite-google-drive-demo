import{d as S,r as f,e as F,k as b,w as $,B,C as N,a as n,D as A,v as d,z as M,l as k,p as D,c as x,s as p,t as C,F as P}from"./index.6c0a173f.js";import{c as U,g as I}from"./googleApi.619aee65.js";const R=["placeholder"],E=S({__name:"CreateFolderModal",props:{pageState:null},emits:["closeModal"],setup(h,{emit:v}){const i=U(),c=i.$emitter,r=i.$t,_=M(),g=f(!1),a=f(""),u=f(!0);async function w(){if(!u.value)return;u.value=!1;const t=y();(await I.createFolderByAPI(t)).status===200&&s(),setTimeout(()=>{u.value=!0},2e3)}function y(){const t=[],e=_.params.folderId;return a.value===""&&(a.value="Untitled"),e!==void 0&&t.push(e),{name:a.value,parents:t}}function m(){a.value=""}function s(){g.value=!1,c.emit("show-success-msg",r("Folder create success")),c.emit("refresh-page"),v("closeModal")}return(t,e)=>{const l=k("a-modal");return F(),b(l,{visible:h.pageState.isShowMsg,"onUpdate:visible":e[2]||(e[2]=o=>h.pageState.isShowMsg=o),title:d(r)("New folder"),"ok-text":d(r)("Create"),"cancel-text":d(r)("Cancel"),wrapClassName:"input-modal",afterClose:m(),okType:"create",width:"340px",centered:"",onOk:e[3]||(e[3]=o=>w())},{default:$(()=>[B(n("input",{class:"w-full px-[10px] h-10 rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400","onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o),onKeypress:e[1]||(e[1]=A(o=>w(),["enter"])),placeholder:d(r)("Untitled folder")},null,40,R),[[N,a.value,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}}),K={class:"w-[250px]"},T={class:"control-area"},V={class:"icon"},q={class:"menu-item"},z={class:"cursor-pointer",form:"fileUpload"},H={class:"control-item"},L={class:"icon"},O={class:"menu-item"},J=S({__name:"ContextMenuPage",props:{fileData:null},setup(h){const v=U(),i=v.$t,c=v.$emitter,r=M(),_=f(),g=f(0);function a(){const s=new FileReader,t=_.value,e=t==null?void 0:t.files;s.readAsArrayBuffer(e[0]),s.onload=async l=>{var o;u(e[0].name,(o=l.target)==null?void 0:o.result)}}async function u(s,t){const e=r.params.folderId;w({name:s,parents:e===void 0?[]:[e]},t),g.value+=1}async function w(s,t){c.emit("show-upload-progress"),(await I.toUploadFileByAPI(s,t)).status===200&&y(s)}function y(s){c.emit("refresh-page"),c.emit("show-success-msg",i("File upload success, your file name is")+":"+s.name)}const m=D({isShowMsg:!1});return(s,t)=>{const e=k("custom-icon"),l=k("a-menu-item");return F(),x(P,null,[n("div",K,[n("div",T,[p(l,null,{default:$(()=>[n("div",{class:"control-item",onClick:t[0]||(t[0]=o=>m.isShowMsg=!0)},[n("div",V,[p(e,{iconStr:"newFolder"})]),n("span",q,C(d(i)("New folder")),1)])]),_:1}),p(l,null,{default:$(()=>[n("label",z,[n("div",H,[n("div",L,[p(e,{iconStr:"fileUpload"})]),n("span",O,C(d(i)("File upload")),1),(F(),x("input",{class:"hidden",key:g.value,type:"file",id:"fileUpload",multiple:"",onChange:t[1]||(t[1]=o=>a()),ref_key:"inputElement",ref:_},null,32))])])]),_:1})])]),p(E,{pageState:m,onCloseModal:t[2]||(t[2]=o=>m.isShowMsg=!1)},null,8,["pageState"])],64)}}});export{J as _};
