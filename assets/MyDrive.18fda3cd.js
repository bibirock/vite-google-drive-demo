import{m as D,r as M,s as C,f as c,v as T,y as v,a as e,t as m,A as x,B as se,G as X,H as Z,I as ee,n as t,c as h,J as A,o as te,_ as K,w as N,z as n,F as O,d as ae,M as U,P as ie,Q as re,D as ce,N as de,C as j,L as Q}from"./index.e445bb4d.js";import{G as Y,g as ue}from"./googleAPI.06b4af46.js";import{C as pe}from"./ContextMenuPage.be56f681.js";import{L as me}from"./Loading.a67e19e5.js";const fe={class:t("text-orange-600")},ve={class:t("text-red-600")},xe=["placeholder"],_e={key:0,class:t("text-red-600")},ne={__name:"DeleteFileModal",props:{pageState:Object},emits:["closeModal"],setup(g,{emit:_}){const u=g,b=new Y,$=D("$emitter"),i=D("$t");async function d(f){await b.toTrashFileByAPI(f),$.emit("show-success-msg",i("File moved to trash")),$.emit("refresh-page")}const l=M(""),p=M(!1);async function a(){if(l.value===u.pageState.name){d(u.pageState.id),_("closeModal");return}p.value=!0}return(f,w)=>{const k=C("a-modal");return c(),T(k,{visible:g.pageState.isShowMsg,"onUpdate:visible":w[2]||(w[2]=r=>g.pageState.isShowMsg=r),title:x(i)("Information"),"ok-text":x(i)("OK"),"cancel-text":x(i)("Cancel"),wrapClassName:"newFolderModal",okType:"create",width:"340px",centered:"",onOk:w[3]||(w[3]=r=>a())},{default:v(()=>[e("p",fe,m(x(i)("This action will trash your google drive file to Bin, you need to enter file name confrim.")),1),e("p",null,[se(m(x(i)("Your file name is :"))+" ",1),e("span",ve,m(g.pageState.name),1)]),X(e("input",{"onUpdate:modelValue":w[0]||(w[0]=r=>l.value=r),onKeyup:w[1]||(w[1]=ee(r=>a(),["enter"])),placeholder:x(i)("Please enter file name"),class:t("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,40,xe),[[Z,l.value,void 0,{trim:!0}]]),p.value?(c(),h("span",_e,m(x(i)("Name confrim error")),1)):A("",!0)]),_:1},8,["visible","title","ok-text","cancel-text"])}}};const oe={__name:"UpdateFileNameModal",props:{pageState:Object},emits:["closeModal"],setup(g,{emit:_}){const u=g,b=new Y,$=D("$emitter"),i=D("$t"),d=M(!0);async function l(){if(!d.value)return;d.value=!1;const k=a();(await b.toUpdateFileByAPI(k)).status===200&&w(),setTimeout(()=>{d.value=!0},2e3)}const p=M("");te(()=>{p.value=u.pageState.name});function a(){return p.value===""&&(p.value=u.pageState.name),{name:p.value,fileId:u.pageState.id}}function f(){p.value=""}function w(){$.emit("show-success-msg",i("File name update success")),$.emit("refresh-page"),_("closeModal")}return(k,r)=>{const F=C("a-modal");return c(),T(F,{visible:g.pageState.isShowMsg,"onUpdate:visible":r[2]||(r[2]=S=>g.pageState.isShowMsg=S),title:x(i)("Rename"),"ok-text":x(i)("OK"),"cancel-text":x(i)("Cancel"),wrapClassName:"newFolderModal",afterClose:f(),okType:"create",width:"340px",centered:"",onOk:r[3]||(r[3]=S=>l())},{default:v(()=>[X(e("input",{"onUpdate:modelValue":r[0]||(r[0]=S=>g.pageState.name=S),onKeypress:r[1]||(r[1]=ee(S=>l(),["enter"])),class:t("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,544),[[Z,g.pageState.name,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}};const ge={class:t("w-[250px]")},we={class:"control-area"},he={class:"icon"},$e={class:"icon"},ke={class:"icon"},be={class:"icon"},ye={class:"control-item"},Ce={class:"icon"},Me={__name:"ContextMenuFile",props:{fileData:Object},setup(g){const _=g,u=D("$globalF",()=>{},!1),b=N({isShowMsg:!1,name:_.fileData.name,id:_.fileData.id}),$=N({isShowMsg:!1,name:_.fileData.name,id:_.fileData.id});function i(d){window.location.assign(d)}return(d,l)=>{const p=C("custom-icon"),a=C("a-menu-item");return c(),h(O,null,[e("div",ge,[e("div",we,[n(a,null,{default:v(()=>[e("div",{class:"control-item",onClick:l[0]||(l[0]=f=>x(u).openFileView(g.fileData.webViewLink))},[e("div",he,[n(p,{iconStr:"preview"})]),e("span",null,m(d.$t("Preview")),1)])]),_:1}),n(a,null,{default:v(()=>[e("div",{class:"control-item",onClick:l[1]||(l[1]=f=>i(g.fileData.webContentLink))},[e("div",$e,[n(p,{iconStr:"download"})]),e("span",null,m(d.$t("Download")),1)])]),_:1}),n(a,null,{default:v(()=>[e("div",{class:"control-item",onClick:l[2]||(l[2]=f=>$.isShowMsg=!0)},[e("div",ke,[n(p,{iconStr:"rename"})]),e("span",null,m(d.$t("Rename")),1)])]),_:1}),n(a,null,{default:v(()=>[e("div",{class:"control-item",onClick:l[3]||(l[3]=f=>b.isShowMsg=!0)},[e("div",be,[n(p,{iconStr:"delete"})]),e("span",null,m(d.$t("Delete")),1)])]),_:1}),n(a,null,{default:v(()=>[e("div",ye,[e("div",Ce,[n(p,{iconStr:"getLink"})]),e("span",null,m(d.$t("Get link")),1)])]),_:1})])]),n(ne,{pageState:b,onCloseModal:l[4]||(l[4]=f=>b.isShowMsg=!1)},null,8,["pageState"]),n(oe,{pageState:$,onCloseModal:l[5]||(l[5]=f=>$.isShowMsg=!1)},null,8,["pageState"])],64)}}},q=K(Me,[["__scopeId","data-v-b7bc0de4"]]);const Fe={class:t("w-[250px]")},Se={class:"control-area"},De={class:"icon"},Le={class:"icon"},Ie={class:"icon"},Pe={__name:"ContextMenuFolder",props:{fileData:Object},setup(g){const _=g,u=D("$t"),b=D("$globalF",()=>{},!1),$=D("$emitter"),i=N({isShowMsg:!1,name:_.fileData.name,id:_.fileData.id}),d=N({isShowMsg:!1,name:_.fileData.name,id:_.fileData.id});async function l(){await b.copyLink(_.fileData.webViewLink),$.emit("show-success-msg",u("Link copied to clipboard"))}return(p,a)=>{const f=C("custom-icon"),w=C("a-menu-item");return c(),h(O,null,[e("div",Fe,[e("div",Se,[n(w,null,{default:v(()=>[e("div",{class:"control-item",onClick:a[0]||(a[0]=k=>d.isShowMsg=!0)},[e("div",De,[n(f,{iconStr:"rename"})]),e("span",null,m(x(u)("Rename")),1)])]),_:1}),n(w,null,{default:v(()=>[e("div",{class:"control-item",onClick:a[1]||(a[1]=k=>i.isShowMsg=!0)},[e("div",Le,[n(f,{iconStr:"delete"})]),e("span",null,m(x(u)("Delete")),1)])]),_:1}),n(w,null,{default:v(()=>[e("div",{class:"control-item",onClick:a[2]||(a[2]=k=>l())},[e("div",Ie,[n(f,{iconStr:"getLink"})]),e("span",null,m(x(u)("Get link")),1)])]),_:1})])]),n(ne,{pageState:i,onCloseModal:a[3]||(a[3]=k=>i.isShowMsg=!1)},null,8,["pageState"]),n(oe,{pageState:d,onCloseModal:a[4]||(a[4]=k=>d.isShowMsg=!1)},null,8,["pageState"])],64)}}},W=K(Pe,[["__scopeId","data-v-f446d5eb"]]),Te={id:"my-drive-page"},Oe={class:t("mt-[5px] text-slate-500")},Ne={class:t("ml-[25px] md:ml-0 set-item-between mt-[8px] mb-[16px]  md:pr-[50px]")},Ve={class:"flex"},Be=["onContextmenu","onClick"],je={class:t("flex relative")},Ee=["src"],Ge={class:t("truncate flex items-center")},Re=["onContextmenu","onClick","onDblclick"],Ue={class:t("flex relative")},Ae=["src"],Ke={class:t("lg:w-[150px] truncate flex items-center ")},Ye={class:t("ml-[25px] md:ml-0 set-item-between mt-[8px] mb-[16px] pr-[50px]")},ze=["onClick","onContextmenu","onDblclick"],He=["src"],Je=["src"],Qe={class:t("w-[150px] truncate")},qe=["src"],We=["src"],Xe={class:t("w-[150px] truncate")},Ze=ae({__name:"MyDrive",setup(g){const _=ue(),u=_.$globalFunction,b=_.$emitter,$=_.$TYPE,i=new Y,d=ce(),l=N([{name:"ContextMenuFile",component:U(q)},{name:"ContextMenuFolder",component:U(W)},{name:"ContextMenuPage",component:U(pe)}]),p=N({meuns:l[2].component});te(()=>{a(),b.on("refresh-page",()=>{a()})}),ie(()=>{b.off("refresh-page")});function a(){if(d.params.folderId===void 0)return w();k(d.params.folderId)}const f=M(!0);re(()=>d.params.folderId,s=>{if(f.value=!0,u.sendFileDatil(void 0),s===void 0)return w();k(s)});async function w(){const s=await i.getDriveRootListByAPI();S(s)}async function k(s){const y=await i.getFolderItemByAPI(s);S(y)}const r=M([]),F=M([]);function S(s){r.value=z(s),F.value=z(s,!0),f.value=!1}function z(s,y=!1){if(y===!1)return s==null?void 0:s.filter(I=>I.mimeType===$.GOOGLE_FOLDER);if(y===!0)return s==null?void 0:s.filter(I=>I.mimeType!==$.GOOGLE_FOLDER)}const L=M({});function V(s){var y;if(s===void 0){p.meuns=l[2].component,L.value={};return}L.value=s[1],p.meuns=(y=l.find(I=>I.name==s[0]))==null?void 0:y.component}const B=M("akar-icons:arrow-up");function le(){r.value.reverse(),F.value.reverse(),B.value==="akar-icons:arrow-up"?B.value="akar-icons:arrow-down":B.value="akar-icons:arrow-up"}return(s,y)=>{const I=C("Icon"),E=C("icon"),G=C("a-menu"),H=C("custom-icon"),R=C("a-dropdown");return c(),T(R,{trigger:["contextmenu"]},{overlay:v(()=>[n(G,null,{default:v(()=>[(c(),T(de(p.meuns),{key:p.meuns,fileData:L.value},null,8,["fileData"]))]),_:1})]),default:v(()=>[e("div",null,[e("div",Te,[r.value.length===0&&F.value.length===0&&!f.value?(c(),h("div",{key:0,class:t(["empty-folder","set-item-center flex-col h-screen mt-[-50px]"])},[n(I,{icon:"fluent-emoji-high-contrast:open-file-folder",class:t("opacity-90"),color:"#6f6f6f",width:"100",height:"100"}),e("span",Oe,m(s.$t("Empty folder you can use new")),1)])):A("",!0),f.value?(c(),T(me,{key:1})):r.value.length!==0||F.value.length!==0?(c(),h("div",{key:2,class:t(["page-content","pr-[20px]"]),onContextmenuCapture:y[1]||(y[1]=o=>V(void 0))},[e("div",Ne,[e("div",null,m(s.$t("Folder")),1),e("div",Ve,[e("div",null,m(s.$t("Name")),1),n(E,{onClick:y[0]||(y[0]=o=>le()),icon:B.value,width:"20",height:"20",class:t("ml-[6px] cursor-pointer")},null,8,["icon"])])]),e("div",{class:t(["folder-mobile","ml-[25px]h md:hidden flex flex-wrap"])},[(c(!0),h(O,null,j(r.value,o=>(c(),h("div",{class:t(["folder","flex justify-start cursor-pointer hover:bg-slate-100 items-center border-1px mb-[14px] pr-[50px] pl-[25px] rounded-lg w-[100%] h-[48px]"]),onContextmenu:P=>V(["ContextMenuFolder",o]),onClick:P=>x(u).goToFolder(o.id)},[e("div",je,[e("img",{src:o.iconLink,class:t("w-[25px] mr-[10px]")},null,8,Ee),e("div",Ge,m(o.name),1),n(R,{trigger:["click"]},{overlay:v(()=>[n(G,null,{default:v(()=>[n(W,{fileData:L.value},null,8,["fileData"])]),_:1})]),default:v(()=>[n(H,{iconStr:"info",onClick:Q(P=>L.value=o,["stop"]),class:t("absolute left-[250px] md:hidden")},null,8,["onClick"])]),_:2},1024)])],40,Be))),256))]),e("div",{class:t(["folder-area","ml-[25px] hidden md:ml-0 md:flex md:flex-wrap"])},[(c(!0),h(O,null,j(r.value,o=>(c(),h("div",{class:t(["folder","flex justify-start cursor-pointer hover:bg-slate-100 items-center border-1px mb-[14px] pr-[50px] pl-[25px] rounded-lg w-[100%] h-[48px] lg:w-[30%] lg:mr-[20px] min-w-[222px] 2xl:w-[228px]"]),onContextmenu:P=>V(["ContextMenuFolder",o]),onClick:P=>x(u).sendFileDatil(o),onDblclick:P=>x(u).goToFolder(o.id)},[e("div",Ue,[e("img",{src:o.iconLink,class:t("w-[25px] mr-[10px]")},null,8,Ae),e("div",Ke,m(o.name),1)])],40,Re))),256))]),e("div",Ye,[e("div",null,m(s.$t("File")),1)]),e("div",{class:t(["file-area","ml-[25px] md:ml-0 hidden md:flex md:flex-wrap pb-[100px]"])},[(c(!0),h(O,null,j(F.value,(o,P)=>(c(),h("div",{class:t(["file","flex flex-col items-start mb-[14px] rounded-lg w-[100%] h-[40vw] min-w-[200px] min-h-[200px] max-h-[429px] lg:w-[228px] lg:mr-[20px] lg:h-[228px] 2xl:w-[228px] 2xl:h-[228px] justify-start cursor-pointer  border-1px "]),onClick:J=>x(u).sendFileDatil(o),onContextmenu:J=>V(["ContextMenuFile",o]),onDblclick:J=>x(u).openFileView(o.webViewLink)},[e("div",{class:t(["file-outside","h-[100%] w-[100%] set-item-center overflow-hidden"])},[o.thumbnailLink!==void 0?(c(),h("img",{key:0,class:t("scale-125"),src:o.thumbnailLink,referrerPolicy:"no-referrer"},null,8,He)):(c(),T(E,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"60",height:"100%"}))]),e("div",{class:t(["img-area","flex basis-[48px] items-center pr-[25px] pl-[25px]"])},[e("img",{src:o.iconLink,class:t("mr-[10px]")},null,8,Je),e("div",Qe,m(o.name),1)])],40,ze))),256))]),e("div",{class:t(["file-area-mobile","ml-[25px] md:hidden flex flex-wrap pb-[100px]"])},[(c(!0),h(O,null,j(F.value,o=>(c(),h("div",{class:t(["file","flex flex-col items-start mb-[14px] rounded-lg w-[100%] h-[40vw] min-w-[200px] min-h-[200px] max-h-[429px] lg:w-[228px] lg:mr-[20px] lg:h-[228px] 2xl:w-[228px] 2xl:h-[228px] justify-start cursor-pointer  border-1px "])},[e("div",{class:t(["file-outside","h-[100%] w-[100%] set-item-center overflow-hidden"])},[o.thumbnailLink!==void 0?(c(),h("img",{key:0,class:t("scale-125"),src:o.thumbnailLink,referrerPolicy:"no-referrer"},null,8,qe)):(c(),T(E,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"60",height:"100%"}))]),e("div",{class:t(["img-area","flex basis-[48px] items-center pr-[25px] pl-[25px]"])},[e("img",{src:o.iconLink,class:t("mr-[10px]")},null,8,We),e("div",Xe,m(o.name),1),n(R,{trigger:["click"],class:t("ml-12")},{overlay:v(()=>[n(G,null,{default:v(()=>[n(q,{fileData:L.value},null,8,["fileData"])]),_:1})]),default:v(()=>[n(H,{iconStr:"info",onClick:Q(P=>L.value=o,["stop"])},null,8,["onClick"])]),_:2},1024)])]))),256))])],32)):A("",!0)])])]),_:1})}}});const lt=K(Ze,[["__scopeId","data-v-e10876de"]]);export{lt as default};
