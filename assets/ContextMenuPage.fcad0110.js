import{d as k,r as m,f as F,l as N,w as C,D as P,E as A,a,G as D,y as d,n as y,B as I,q as $,s as E,c as S,x as f,t as b,F as R,_ as G}from"./index.3e40ba40.js";import{g as U,G as B}from"./googleAPI.e278e7f2.js";const K=["placeholder"],T=k({__name:"CreateFolderModal",props:{pageState:null},emits:["closeModal"],setup(h,{emit:_}){const i=U(),c=i.$emitter,r=i.$t,x=new B,v=I(),g=m(!1),n=m(""),u=m(!0);async function w(){if(!u.value)return;u.value=!1;const t=M();(await x.createFolderByAPI(t)).status===200&&s(),setTimeout(()=>{u.value=!0},2e3)}function M(){const t=[],e=v.params.folderId;return n.value===""&&(n.value="Untitled"),e!==void 0&&t.push(e),{name:n.value,parents:t}}function p(){n.value=""}function s(){g.value=!1,c.emit("show-success-msg",r("Folder create success")),c.emit("refresh-page"),_("closeModal")}return(t,e)=>{const l=$("a-modal");return F(),N(l,{visible:h.pageState.isShowMsg,"onUpdate:visible":e[2]||(e[2]=o=>h.pageState.isShowMsg=o),title:d(r)("New folder"),"ok-text":d(r)("Create"),"cancel-text":d(r)("Cancel"),wrapClassName:"newFolderModal",afterClose:p(),okType:"create",width:"340px",centered:"",onOk:e[3]||(e[3]=o=>w())},{default:C(()=>[P(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),onKeypress:e[1]||(e[1]=D(o=>w(),["enter"])),placeholder:d(r)("Untitled folder"),class:y("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,40,K),[[A,n.value,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}});const V={class:y("w-[250px]")},q={class:"control-area"},z={class:"icon"},H={form:"fileUpload",class:y("cursor-pointer")},L={class:"control-item"},O={class:"icon"},j=k({__name:"ContextMenuPage",props:{fileData:null},setup(h){const _=U(),i=_.$t,c=_.$emitter,r=I(),x=new B,v=m(),g=m(0);function n(){const s=new FileReader,t=v.value,e=t==null?void 0:t.files;s.readAsArrayBuffer(e[0]),s.onload=async l=>{var o;u(e[0].name,(o=l.target)==null?void 0:o.result)}}async function u(s,t){const e=r.params.folderId;w({name:s,parents:e===void 0?[]:[e]},t),g.value+=1}async function w(s,t){c.emit("show-upload-progress"),(await x.toUploadFileByAPI(s,t)).status===200&&M(s)}function M(s){c.emit("refresh-page"),c.emit("show-success-msg",i("File upload success, your file name is")+":"+s.name)}const p=E({isShowMsg:!1});return(s,t)=>{const e=$("custom-icon"),l=$("a-menu-item");return F(),S(R,null,[a("div",V,[a("div",q,[f(l,null,{default:C(()=>[a("div",{class:"control-item",onClick:t[0]||(t[0]=o=>p.isShowMsg=!0)},[a("div",z,[f(e,{iconStr:"newFolder"})]),a("span",null,b(d(i)("New folder")),1)])]),_:1}),f(l,null,{default:C(()=>[a("label",H,[a("div",L,[a("div",O,[f(e,{iconStr:"fileUpload"})]),a("span",null,b(d(i)("File upload")),1),(F(),S("input",{key:g.value,type:"file",id:"fileUpload",multiple:"",class:y("hidden"),onChange:t[1]||(t[1]=o=>n()),ref_key:"inputElement",ref:v},null,32))])])]),_:1})])]),f(T,{pageState:p,onCloseModal:t[2]||(t[2]=o=>p.isShowMsg=!1)},null,8,["pageState"])],64)}}});const W=G(j,[["__scopeId","data-v-08d04bcf"]]);export{W as C};
