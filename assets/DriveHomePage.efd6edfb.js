import{d as B,m as A,f as r,l as T,q as p,s as E,r as F,v as te,w as l,a as e,t as o,x as n,y as f,n as t,c as m,z as P,F as G,A as K,u as z,B as Y,C as oe,D as V,E as ne,G as se,H as R,I as q,J as ae,_ as H,K as U,L as ie,M as le}from"./index.8ffe8cec.js";import{g as O,l as j,G as W}from"./googleAPI.55bc1169.js";import{C as J}from"./ContextMenuPage.8b26ad1e.js";import{_ as re}from"./vite-drive.eb5f7837.js";const ce=B({__name:"MessageModal",setup(D){return O().$emitter.on("show-success-msg",c=>{A.success(c)}),A.config({maxCount:1}),(c,i)=>{const a=p("a-space");return r(),T(a)}}}),de=B({__name:"UploadProgressModal",setup(D){const x=O(),M=j(),c=x.$emitter,i=E({"0%":"#108ee9","100%":"#87d068"}),a=F(!1),d=F(!1);c.on("show-upload-progress",w);const y=te(()=>(M.getProgress===100&&setTimeout(()=>{d.value=!1,setTimeout(()=>{M.uploadProgress(0)},2e3)},1500),M.getProgress));function w(){d.value=!0}return(I,h)=>{const s=p("a-progress"),_=p("a-modal");return r(),T(_,{visible:d.value,"onUpdate:visible":h[0]||(h[0]=u=>d.value=u),wrapClassName:"loading-modal",okType:"create",width:"300px",footer:null,centered:"",maskClosable:a.value,closable:""},{default:l(()=>[e("div",{class:t(["info","set-item-center flex-col"])},[e("p",null,o(I.$t("File uploading...")),1),n(s,{type:"circle","stroke-color":i,percent:f(y)},null,8,["stroke-color","percent"])])]),_:1},8,["visible","maskClosable"])}}});const ue="/vite-google-drive-demo/assets/new.336a9a10.svg",me={id:"side-menu",class:t("mt-[-40px] min-h-screen hidden md:block md:w-64")},pe=e("img",{src:ue},null,-1),_e={class:t("items-center")},ve=e("hr",null,null,-1),fe=B({__name:"SideMenu",setup(D){const x=z(),M=Y(),c=O(),i=c.$TYPE,a=c.$t,d=new W,y=E({theme:"li",selectedKeys:["1"],openKeys:["sub1"]});async function w(_){await d.getFolderItemByAPI(_)}const I=F();async function h(){const _=await d.getDriveRootListByAPI();if(_===void 0)return;const u=_.filter(b=>b.mimeType===i.GOOGLE_FOLDER);I.value=u}function s(){M.path!=="/drive/my-drive"&&x.push("/drive/my-drive")}return(_,u)=>{const b=p("a-menu"),C=p("a-dropdown"),$=p("custom-icon"),S=p("a-sub-menu"),L=p("a-menu-item");return r(),m("div",me,[e("div",{class:t(["out-side","bg-white sticky top-[75px] left-[20px] w-fit "])},[n(C,{trigger:["click"]},{overlay:l(()=>[n(b,null,{default:l(()=>[n(J)]),_:1})]),default:l(()=>[e("div",{class:t(["new-file-area","shadow-md h-[48px] w-[118px] border-1px rounded-full set-item-center p-[20px] cursor-pointer"])},[e("div",{class:t(["icon","set-item-between ml-[-20px] w-[80px]"])},[pe,e("div",_e,o(f(a)("New")),1)])])]),_:1}),e("div",{class:t(["select-area","mt-[10px]"])},[n(b,{openKeys:y.openKeys,"onUpdate:openKeys":u[1]||(u[1]=v=>y.openKeys=v),selectedKeys:y.selectedKeys,"onUpdate:selectedKeys":u[2]||(u[2]=v=>y.selectedKeys=v),mode:"inline",style:{width:"240px",border:"none","max-height":"100vh","overflow-y":"overlay","overflow-x":"hidden"},class:t("relative left-[-20px]")},{default:l(()=>[n(S,{class:"my-drive-menu",key:"1",onClick:u[0]||(u[0]=v=>(s(),h()))},{icon:l(()=>[n($,{iconStr:"myDrive"})]),title:l(()=>[P(o(f(a)("My Drive")),1)]),default:l(()=>[(r(!0),m(G,null,K(I.value,(v,g)=>(r(),T(S,{key:g,onClick:N=>w(v.id)},{icon:l(()=>[n($,{iconStr:"folder"})]),title:l(()=>[P(o(v.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),n(S,{key:"2"},{icon:l(()=>[n($,{iconStr:"computer"})]),title:l(()=>[P(o(f(a)("Computer")),1)]),_:1}),n(L,{key:"3"},{icon:l(()=>[n($,{iconStr:"sharedDrives"})]),default:l(()=>[e("span",null,o(f(a)("Shared drives")),1)]),_:1}),n(L,{key:"4"},{icon:l(()=>[n($,{iconStr:"recent"})]),default:l(()=>[e("span",null,o(f(a)("Recent")),1)]),_:1}),n(L,{key:"5"},{icon:l(()=>[n($,{iconStr:"starrted"})]),default:l(()=>[e("span",null,o(f(a)("Starrted")),1)]),_:1}),n(L,{key:"6"},{icon:l(()=>[n($,{iconStr:"trash"})]),default:l(()=>[e("span",null,o(f(a)("Trash")),1)]),_:1}),ve,n(L,{key:"7"},{icon:l(()=>[n($,{iconStr:"storage"})]),default:l(()=>[e("span",null,o(f(a)("Storage")),1)]),_:1})]),_:1},8,["openKeys","selectedKeys"])])])])}}}),he={id:"nav-bar"},ge={class:"nav-outside"},xe={class:t("hidden md:block ml-3 text-slate-500 text-[22px] min-w-[80px] whitespace-nowrap")},ye={class:t("flex items-center")},we=["placeholder"],$e=["onClick"],be=["src"],ke={class:"name"},Me=B({__name:"navBar",setup(D){const x=O(),M=x.$globalFunction,c=x.$emitter,i=x.$TYPE,a=new W,{locale:d}=oe(),y=z();c.on("clear-search-input",()=>{console.log("object"),s.value=""});function w(v){d.value=v.key}const I=F(!1);function h(){I.value=!I.value}const s=F(""),_=F([]);async function u(){if(s.value==="")return;const v=await a.searchFileByAPI(s.value);_.value=v}const b=F();function C(){_.value=[],y.push({path:"/drive/search",query:{q:s.value}}),S()}function $(){y.replace("/drive/my-drive")}function S(){b.value!==void 0&&b.value.blur()}function L(v){if(v.mimeType===i.GOOGLE_FOLDER)return M.goToFolder(v.id);M.openFileView(v.webViewLink),S()}return(v,g)=>{const N=p("Icon"),Z=p("a-menu-item"),Q=p("a-menu"),X=p("a-dropdown");return r(),m("nav",he,[e("div",ge,[e("div",{class:t(["nav-inside","flex items-center justify-start"])},[e("div",{class:t(["img-area","set-item-center cursor-pointer md:mr-[60px] md:ml-[20px]"]),onClick:g[0]||(g[0]=k=>$())},[e("img",{src:re,class:t("my-2.5 min-w-[40px] w-[40px] ml-[10px]")},null,2),e("div",xe,o(v.$t("drive")),1)]),e("div",{class:t(["input","ml-3 relative w-[400px] basis-[700px]"])},[e("div",ye,[V(e("input",{type:"text","onUpdate:modelValue":g[1]||(g[1]=k=>s.value=k),ref_key:"searchInput",ref:b,onKeyup:g[2]||(g[2]=k=>u()),onFocus:g[3]||(g[3]=k=>h()),onBlur:g[4]||(g[4]=k=>h()),onKeypress:g[5]||(g[5]=se(k=>C(),["enter"])),placeholder:v.$t("Search from Google Drive"),class:t("border max-w-[500px] min-w-[230px] w-[100%] h-12 px-14 rounded-lg bg-slate-100 focus:bg-inherit placeholder:text-base")},null,40,we),[[ne,s.value]]),n(N,{class:"absolute top-3 left-3",icon:"carbon:search",color:"grayText",width:"25",height:"25"}),s.value!==""?(r(),T(N,{key:0,onClick:g[6]||(g[6]=k=>s.value=""),icon:"iconoir:cancel",color:"grayText",width:"25",height:"25",class:t("cursor-pointer ml-[-50px]")})):R("",!0)]),V(e("div",{class:t(["search-result-area","absolute top-[43px] border-solid border-2 border-gray-300  max-w-[500px] min-w-[230px] w-[100%] min-h-[50px] max-h-[200px] overflow-auto bg-white rounded-b-lg"])},[(r(!0),m(G,null,K(_.value,(k,ee)=>(r(),m("div",{class:"serch-result-item",key:ee},[e("div",{class:t(["result-body","hover:bg-slate-100 h-[50px] flex items-center"]),onClick:tt=>L(k),onMousedown:g[7]||(g[7]=ae(()=>{},["prevent"]))},[e("img",{src:k.iconLink,class:t("h-[20px] w-[20px] ml-[10px] mr-[10px]")},null,8,be),e("div",ke,o(k.name),1)],40,$e)]))),128))],512),[[q,_.value.length>0&&s.value!==""&&I.value]])]),e("div",{class:t(["setting","ml-[30px]"])},[n(X,{trigger:["click"]},{overlay:l(()=>[n(Q,{onClick:w,modelValue:v.$i18n.locale,"onUpdate:modelValue":g[8]||(g[8]=k=>v.$i18n.locale=k)},{default:l(()=>[(r(!0),m(G,null,K(v.$i18n.availableLocales,k=>(r(),T(Z,{key:`${k}`},{default:l(()=>[P(o(k),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),default:l(()=>[n(N,{icon:"ant-design:setting-outlined",color:"grayText",width:"25",height:"25",class:t("cursor-pointer focus:outline-none")},{default:l(()=>[P(o(v.$t("language")),1)]),_:1})]),_:1})]),e("div",{class:t(["profile","mr-10"])})])])])}}}),Ie={id:"bread-crumbs",class:t("border-1px h-[48px] bg-white set-item-start")},Se={class:"side-meun"},Ce=B({__name:"BreadCrumbs",emits:["openInfoMenu"],setup(D,{emit:x}){const c=O().$t,i=Y();function a(){if(i.name==="my-drive"||i.name==="my-drive-folders")return c("My Drive");if(i.name==="search-result-page")return c("Search result")}function d(){x("openInfoMenu")}return(y,w)=>{const I=p("a-menu"),h=p("Icon"),s=p("a-dropdown"),_=p("custom-icon");return r(),m("div",Ie,[e("div",Se,[n(s,{trigger:["click"]},{overlay:l(()=>[n(I,null,{default:l(()=>[n(J)]),_:1})]),default:l(()=>[n(h,{icon:"material-symbols:menu",color:"grayText",width:"25",height:"25",class:t("ml-[18px] md:hidden")})]),_:1})]),e("div",{class:t(["content","md:pl-[260px] pl-[25px] w-100 text-slate-500 text-[18px] shrink-0"])},o(a()),1),e("div",{class:t(["control-icon","hidden md:block  2xl:ml-[65%] xl:ml-[55%] lg:ml-[45%] md:ml-[35%] cursor-pointer"]),onClick:w[0]||(w[0]=u=>d())},[n(_,{iconStr:"Info"})])])}}}),De={key:0,class:"noChooseFile"},Te={class:"img"},Fe={key:1,class:"info-area"},Be=["src"],Le=["src"],Pe={class:"access"},Oe={class:"system-properties"},Ee={class:t("w-[110px]")},Ge={key:0},Ke={key:1},Ne=B({__name:"InfoMenuDetail",setup(D){const x=O(),M=x.$emitter,c=x.$TYPE,i=x.$t,a=E({});M.on("send-file-data",s=>{a.data=s});function d(s,_=1){if(s===void 0)return!1;const u=parseInt(s);if(u===0)return"0 Bytes";const b=1024,C=_<0?0:_,$=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],S=Math.floor(Math.log(u)/Math.log(b));return parseFloat((u/Math.pow(b,S)).toFixed(C))+" "+$[S]}function y(s){return new Date(s).toLocaleString()}function w(s){return s===c.IMG?i("Image"):s===c.WORD?"Word":s===c.GOOGLE_SHEETS?i("Google Sheets"):s===c.PDF?"PDF":s===c.GOOGLE_FOLDER?i("Google Drive Folder"):s===c.GOOGLE_DOCS?i("Google Docs"):i("Other")}function I(s){return s.displayName===void 0?i("Anyone with link"):s.displayName!==void 0&&s.role==="owner"?s.displayName+i("is owner"):s.displayName}function h(s){var u;return((u=s.data)==null?void 0:u.owners)[0].me?i("Me"):""}return(s,_)=>{var $;const u=p("custom-icon"),b=p("Icon"),C=p("a-tooltip");return a.data==null?(r(),m("div",De,[e("div",{class:t(["img-area","flex flex-col mt-[20px]"])},[e("div",Te,[n(u,{iconStr:"fileDeatil"})]),e("div",{class:t(["text opacity-60 mx-auto","mt-[20px]"])},o(f(i)("Select a file or folder to view its details")),1)])])):(r(),m("div",Fe,[e("div",{class:t(["img","h-[150px] w-[100%] border-1px set-item-center overflow-hidden"])},[a.data.thumbnailLink!==void 0?(r(),m("img",{key:0,class:t("h-[100%]"),referrerPolicy:"no-referrer",src:a.data.thumbnailLink},null,8,Be)):(r(),T(b,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"100",height:"100%"}))]),e("div",{class:t(["info-detail","p-[16px]"])},[e("div",{class:t(["has-access","text-lg opacity-75"])},o(f(i)("Who has access")),1),e("div",{class:t(["access","mt-[20px] mb-[20px] overflow-auto max-h-[60px]"])},[a.data.shared?(r(!0),m(G,{key:0},K(a.data.permissions,S=>(r(),m("div",{class:t(["access-info",""])},[e("div",{class:t(["access-arr","set-item-start mb-[5px]"])},[S.photoLink!==void 0?(r(),m("img",{key:0,src:S.photoLink,class:t("h-[25px] mr-[5px] rounded-full")},null,8,Le)):(r(),T(b,{key:1,icon:"ci:link",color:"#FFFFFF",width:"25",height:"25",class:t("bg-lime-600 mr-[5px] rounded-full")})),e("div",Pe,o(I(S)),1)])]))),256)):(r(),m("div",{key:1,class:t(["access-info","set-item-start h-[60px]"])},[n(u,{iconStr:"noShare"}),e("div",{class:t(["no-shared","ml-[15px]"])},o(f(i)("Not shared")),1)]))]),e("div",Oe,[e("div",{class:t(["title","text-lg opacity-75 title-color mb-[10px]"])},o(f(i)("System properties")),1),e("table",null,[e("tbody",null,[e("tr",null,[e("td",Ee,o(f(i)("Type")),1),n(C,{placement:"bottom"},{title:l(()=>[P(o(a.data.mimeType),1)]),default:l(()=>[e("td",null,o(w(a.data.mimeType)),1)]),_:1})]),d(a.data.size)!==!1?(r(),m("tr",Ge,[e("td",null,o(f(i)("Size")),1),e("td",null,o(d(a.data.size)),1)])):R("",!0),d(a.data.quotaBytesUsed)!==!1?(r(),m("tr",Ke,[e("td",null,o(f(i)("Storage used")),1),e("td",null,o(d(a.data.quotaBytesUsed)),1)])):R("",!0),e("tr",null,[e("td",null,o(f(i)("Location")),1),e("td",null,o(($=a.data.spaces)==null?void 0:$.join(",")),1)]),e("tr",null,[e("td",null,o(f(i)("Owner")),1),e("td",null,o(h(a)),1)]),e("tr",null,[e("td",null,o(f(i)("Modified")),1),e("td",null,o(y(a.data.modifiedTime)),1)]),e("tr",null,[e("td",null,o(f(i)("Opened")),1),e("td",null,o(y(a.data.viewedByMeTime)),1)]),e("tr",null,[e("td",null,o(f(i)("Created")),1),e("td",null,o(y(a.data.createdTime)),1)])])])])])]))}}}),Ve={key:0,class:"noChooseFile"},Re=e("div",{class:"img"},null,-1);function Ae(D,x){return r(),m("div",Ve,[e("div",{class:t(["img-area","flex flex-col mt-[20px]"])},[Re,e("div",{class:t(["text opacity-60 mx-auto","mt-[20px]"])},o(D.$t("No activity")),1)])])}const Ue={},ze=H(Ue,[["render",Ae]]),Ye={class:"outer"},qe={class:"inside"},He={class:"header"},je={class:"file-name"},We=["src"],Je=["onClick"],Ze={class:"body"},Qe=B({__name:"InfoMenu",emits:["closeInfoMenu"],setup(D,{emit:x}){const c=O().$emitter,i=E([{name:"Details",component:U(Ne)},{name:"Activity",component:U(ze)}]);function a(h){d.views=h}const d=E({views:i[0].component});function y(h){if(h===d.views)return!0}const w=E({});c.on("send-file-data",h=>{w.data=h});function I(){x("closeInfoMenu")}return(h,s)=>{const _=p("custom-icon"),u=p("a-tooltip"),b=p("Icon");return r(),m("div",Ye,[e("div",qe,[e("div",He,[e("div",{class:t(["header-info","h-[72px] set-item-around"])},[e("div",je,[w.data==null?(r(),m("div",{key:0,class:t(["no-chose-data","flex"])},[n(_,{iconStr:"myDrive"}),e("div",{class:t(["title","text-[22px] text-slate-500"])},o(h.$t("My Drive")),1)])):(r(),m("div",{key:1,class:t(["has-data","flex"])},[e("img",{src:w.data.iconLink,class:t("w-[20px] h-[20px] mt-[8px] mr-[10px] set-item-start")},null,8,We),n(u,{placement:"bottom"},{title:l(()=>[P(o(w.data.name),1)]),default:l(()=>[e("div",{class:t(["title","text-[22px] text-slate-500 w-[160px] truncate"])},o(w.data.name),1)]),_:1})]))]),n(b,{onClick:s[0]||(s[0]=C=>I()),icon:"iconoir:cancel",color:"grayText",width:"25",height:"25",class:t("cursor-pointer")})]),e("div",{class:t(["header-control","h-[50px] w-[100%] set-item-around border-b-2"])},[(r(!0),m(G,null,K(i,(C,$)=>(r(),m("div",{class:t(["view",{"in-this-page":y(C.component),"w-[48%] h-[50px] set-item-center cursor-pointer opacity-80 border-b-4 border-transparent hover:border-b-4 hover:border-gray-500":!0}]),onClick:S=>a(C.component),key:$},o(h.$t(C.name)),11,Je))),128))])]),e("div",Ze,[(r(),T(le,null,[(r(),T(ie(d.views),{key:d.views}))],1024))])])])}}});const Xe=H(Qe,[["__scopeId","data-v-5ff8809f"]]),et={class:"page-content flex"},it=B({__name:"DriveHomePage",setup(D){const x=j();M();function M(){if(window.sessionStorage.getItem("token")==null)return;const a=JSON.parse(window.sessionStorage.getItem("token")||"{}");x.changeTokenData(a)}const c=F(!0);function i(){c.value===!0?c.value=!1:c.value=!0}return(a,d)=>{const y=p("router-view");return r(),m(G,null,[e("div",{class:t(["home-page z-50 relative","h-screen overflow-hidden"])},[n(Me,{class:t("sticky top-0 z-50 bg-white shadow-md")}),n(Ce,{onOpenInfoMenu:d[0]||(d[0]=w=>i()),class:t("sticky top-[60px] h-[50px]")}),e("div",et,[n(fe,{class:t("shrink-0 ")}),e("div",{class:t(["conter","w-[100%] h-screen overflow-auto"])},[n(y)]),V(e("div",{class:t(["right-menu","hidden border-1px sticky top-0 md:block md:basis-[500px]"])},[n(Xe,{onCloseInfoMenu:d[1]||(d[1]=w=>c.value=!1)})],512),[[q,c.value]])])]),n(ce),n(de)],64)}}});export{it as default};
