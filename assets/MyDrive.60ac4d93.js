import{j as M,r as F,k as C,f as r,l as L,w as f,a as e,t as p,x as v,y as le,C as W,D as X,E as Z,n as t,c as h,G as U,o as ee,_ as A,q as P,v as n,F as I,J as R,M as se,N as ae,A as ie,K as re,z as j,I as H}from"./index.1d5ca85e.js";import{L as ce}from"./Loading.ae215aee.js";import{G as K}from"./googleAPI.29554ae6.js";import{C as de}from"./ContextMenuPage.aef22067.js";const ue={class:t("text-orange-600")},pe={class:t("text-red-600")},me=["placeholder"],fe={key:0,class:t("text-red-600")},te={__name:"DeleteFileModal",props:{pageState:Object},emits:["closeModal"],setup(g,{emit:c}){const w=g,b=new K,$=M("$emitter"),s=M("$t");async function i(x){await b.toTrashFileByAPI(x),$.emit("show-success-msg",s("File moved to trash")),$.emit("refresh-page")}const a=F(""),u=F(!1);async function o(){if(a.value===w.pageState.name){i(w.pageState.id),c("closeModal");return}u.value=!0}return(x,m)=>{const k=C("a-modal");return r(),L(k,{visible:g.pageState.isShowMsg,"onUpdate:visible":m[2]||(m[2]=_=>g.pageState.isShowMsg=_),title:v(s)("Information"),"ok-text":v(s)("OK"),"cancel-text":v(s)("Cancel"),wrapClassName:"newFolderModal",okType:"create",width:"340px",centered:"",onOk:m[3]||(m[3]=_=>o())},{default:f(()=>[e("p",ue,p(v(s)("This action will trash your google drive file to Bin, you need to enter file name confrim.")),1),e("p",null,[le(p(v(s)("Your file name is :"))+" ",1),e("span",pe,p(g.pageState.name),1)]),W(e("input",{"onUpdate:modelValue":m[0]||(m[0]=_=>a.value=_),onKeyup:m[1]||(m[1]=Z(_=>o(),["enter"])),placeholder:v(s)("Please enter file name"),class:t("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,40,me),[[X,a.value,void 0,{trim:!0}]]),u.value?(r(),h("span",fe,p(v(s)("Name confrim error")),1)):U("",!0)]),_:1},8,["visible","title","ok-text","cancel-text"])}}};const ne={__name:"UpdateFileNameModal",props:{pageState:Object},emits:["closeModal"],setup(g,{emit:c}){const w=g,b=new K,$=M("$emitter"),s=M("$t"),i=F(!0);async function a(){if(!i.value)return;i.value=!1;const k=o();(await b.toUpdateFileByAPI(k)).status===200&&m(),setTimeout(()=>{i.value=!0},2e3)}const u=F("");ee(()=>{u.value=w.pageState.name});function o(){return u.value===""&&(u.value=w.pageState.name),{name:u.value,fileId:w.pageState.id}}function x(){u.value=""}function m(){$.emit("show-success-msg",s("File name update success")),$.emit("refresh-page"),c("closeModal")}return(k,_)=>{const O=C("a-modal");return r(),L(O,{visible:g.pageState.isShowMsg,"onUpdate:visible":_[2]||(_[2]=S=>g.pageState.isShowMsg=S),title:v(s)("Rename"),"ok-text":v(s)("OK"),"cancel-text":v(s)("Cancel"),wrapClassName:"newFolderModal",afterClose:x(),okType:"create",width:"340px",centered:"",onOk:_[3]||(_[3]=S=>a())},{default:f(()=>[W(e("input",{"onUpdate:modelValue":_[0]||(_[0]=S=>g.pageState.name=S),onKeypress:_[1]||(_[1]=Z(S=>a(),["enter"])),class:t("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,544),[[X,g.pageState.name,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}};const ve={class:t("w-[250px]")},xe={class:"control-area"},_e={class:"icon"},ge={class:"icon"},we={class:"icon"},he={class:"icon"},$e={class:"control-item"},ke={class:"icon"},be={__name:"ContextMenuFile",props:{fileData:Object},setup(g){const c=g,w=M("$globalF",()=>{},!1),b=P({isShowMsg:!1,name:c.fileData.name,id:c.fileData.id}),$=P({isShowMsg:!1,name:c.fileData.name,id:c.fileData.id});function s(i){window.location.assign(i)}return(i,a)=>{const u=C("custom-icon"),o=C("a-menu-item");return r(),h(I,null,[e("div",ve,[e("div",xe,[n(o,null,{default:f(()=>[e("div",{class:"control-item",onClick:a[0]||(a[0]=x=>v(w).openFileView(g.fileData.webViewLink))},[e("div",_e,[n(u,{iconStr:"preview"})]),e("span",null,p(i.$t("Preview")),1)])]),_:1}),n(o,null,{default:f(()=>[e("div",{class:"control-item",onClick:a[1]||(a[1]=x=>s(g.fileData.webContentLink))},[e("div",ge,[n(u,{iconStr:"download"})]),e("span",null,p(i.$t("Download")),1)])]),_:1}),n(o,null,{default:f(()=>[e("div",{class:"control-item",onClick:a[2]||(a[2]=x=>$.isShowMsg=!0)},[e("div",we,[n(u,{iconStr:"rename"})]),e("span",null,p(i.$t("Rename")),1)])]),_:1}),n(o,null,{default:f(()=>[e("div",{class:"control-item",onClick:a[3]||(a[3]=x=>b.isShowMsg=!0)},[e("div",he,[n(u,{iconStr:"delete"})]),e("span",null,p(i.$t("Delete")),1)])]),_:1}),n(o,null,{default:f(()=>[e("div",$e,[e("div",ke,[n(u,{iconStr:"getLink"})]),e("span",null,p(i.$t("Get link")),1)])]),_:1})])]),n(te,{pageState:b,onCloseModal:a[4]||(a[4]=x=>b.isShowMsg=!1)},null,8,["pageState"]),n(ne,{pageState:$,onCloseModal:a[5]||(a[5]=x=>$.isShowMsg=!1)},null,8,["pageState"])],64)}}},J=A(be,[["__scopeId","data-v-b7bc0de4"]]);const ye={class:t("w-[250px]")},Ce={class:"control-area"},Me={class:"icon"},Fe={class:"icon"},Se={class:"icon"},De={__name:"ContextMenuFolder",props:{fileData:Object},setup(g){const c=g,w=M("$t"),b=M("$globalF",()=>{},!1),$=M("$emitter"),s=P({isShowMsg:!1,name:c.fileData.name,id:c.fileData.id}),i=P({isShowMsg:!1,name:c.fileData.name,id:c.fileData.id});async function a(){await b.copyLink(c.fileData.webViewLink),$.emit("show-success-msg",w("Link copied to clipboard"))}return(u,o)=>{const x=C("custom-icon"),m=C("a-menu-item");return r(),h(I,null,[e("div",ye,[e("div",Ce,[n(m,null,{default:f(()=>[e("div",{class:"control-item",onClick:o[0]||(o[0]=k=>i.isShowMsg=!0)},[e("div",Me,[n(x,{iconStr:"rename"})]),e("span",null,p(v(w)("Rename")),1)])]),_:1}),n(m,null,{default:f(()=>[e("div",{class:"control-item",onClick:o[1]||(o[1]=k=>s.isShowMsg=!0)},[e("div",Fe,[n(x,{iconStr:"delete"})]),e("span",null,p(v(w)("Delete")),1)])]),_:1}),n(m,null,{default:f(()=>[e("div",{class:"control-item",onClick:o[2]||(o[2]=k=>a())},[e("div",Se,[n(x,{iconStr:"getLink"})]),e("span",null,p(v(w)("Get link")),1)])]),_:1})])]),n(te,{pageState:s,onCloseModal:o[3]||(o[3]=k=>s.isShowMsg=!1)},null,8,["pageState"]),n(ne,{pageState:i,onCloseModal:o[4]||(o[4]=k=>i.isShowMsg=!1)},null,8,["pageState"])],64)}}},Q=A(De,[["__scopeId","data-v-f446d5eb"]]);const Le={id:"my-drive-page"},Ie={class:t("mt-[5px] text-slate-500")},Pe={class:t("ml-[25px] md:ml-0 set-item-between mt-[8px] mb-[16px]  md:pr-[50px]")},Te={class:"flex"},Oe=["onContextmenu","onClick"],Ne={class:t("flex relative")},Ve=["src"],je={class:t("truncate flex items-center")},Be=["onContextmenu","onClick","onDblclick"],Ee={class:t("flex relative")},Ge=["src"],Re={class:t("lg:w-[150px] truncate flex items-center ")},Ue={class:t("ml-[25px] md:ml-0 set-item-between mt-[8px] mb-[16px] pr-[50px]")},Ae=["onClick","onContextmenu","onDblclick"],Ke=["src"],Ye=["src"],ze={class:t("w-[150px] truncate")},qe=["src"],He=["src"],Je={class:t("w-[150px] truncate")},Qe={__name:"MyDrive",setup(g){const c=M("$globalF",()=>{},!1),w=M("$TYPE"),b=M("$emitter",()=>{},!1),$=new K,s=F([]),i=F([]),a=ie(),u=F(!0),o=F({}),x=P([{name:"ContextMenuFile",component:R(J)},{name:"ContextMenuFolder",component:R(Q)},{name:"ContextMenuPage",component:R(de)}]),m=P({meuns:x[2].component});ee(()=>{k(),b.on("refresh-page",()=>{k()})}),se(()=>{b.off("refresh-page")});function k(){if(a.params.folderId===void 0)return _();O(a.params.folderId)}ae(()=>a.params.folderId,d=>{if(u.value=!0,c.sendFileDatil(void 0),d===void 0)return _();O(d)});async function _(){const d=await $.getDriveRootListByAPI();S(d)}async function O(d){const y=await $.getFolderItemByAPI(d);S(y)}function S(d){s.value=Y(d),i.value=Y(d,!0),u.value=!1}function Y(d,y=!1){if(y===!1)return d.filter(T=>T.mimeType===w.GOOGLE_FOLDER);if(y===!0)return d.filter(T=>T.mimeType!==w.GOOGLE_FOLDER)}function N(d){if(d===void 0){m.meuns=x[2].component,o.value={};return}o.value=d[1],m.meuns=x.find(y=>y.name==d[0]).component}const V=F("akar-icons:arrow-up");function oe(){s.value.reverse(),i.value.reverse(),V.value==="akar-icons:arrow-up"?V.value="akar-icons:arrow-down":V.value="akar-icons:arrow-up"}return(d,y)=>{const T=C("Icon"),B=C("icon"),E=C("a-menu"),z=C("custom-icon"),G=C("a-dropdown");return r(),L(G,{trigger:["contextmenu"]},{overlay:f(()=>[n(E,null,{default:f(()=>[(r(),L(re(m.meuns),{key:m.meuns,fileData:o.value},null,8,["fileData"]))]),_:1})]),default:f(()=>[e("div",null,[e("div",Le,[s.value.length===0&&i.value.length===0&&!u.value?(r(),h("div",{key:0,class:t(["empty-folder","set-item-center flex-col h-screen mt-[-50px]"])},[n(T,{icon:"fluent-emoji-high-contrast:open-file-folder",class:t("opacity-90"),color:"#6f6f6f",width:"100",height:"100"}),e("span",Ie,p(d.$t("Empty folder you can use new")),1)])):U("",!0),u.value?(r(),L(ce,{key:1})):s.value.length!==0||i.value.length!==0?(r(),h("div",{key:2,class:t(["page-content","pr-[20px]"]),onContextmenuCapture:y[1]||(y[1]=l=>N(void 0))},[e("div",Pe,[e("div",null,p(d.$t("Folder")),1),e("div",Te,[e("div",null,p(d.$t("Name")),1),n(B,{onClick:y[0]||(y[0]=l=>oe()),icon:V.value,width:"20",height:"20",class:t("ml-[6px] cursor-pointer")},null,8,["icon"])])]),e("div",{class:t(["folder-mobile","ml-[25px]h md:hidden flex flex-wrap"])},[(r(!0),h(I,null,j(s.value,l=>(r(),h("div",{class:t(["folder","flex justify-start cursor-pointer hover:bg-slate-100 items-center border-1px mb-[14px] pr-[50px] pl-[25px] rounded-lg w-[100%] h-[48px]"]),onContextmenu:D=>N(["ContextMenuFolder",l]),onClick:D=>v(c).goToFolder(l.id)},[e("div",Ne,[e("img",{src:l.iconLink,class:t("w-[25px] mr-[10px]")},null,8,Ve),e("div",je,p(l.name),1),n(G,{trigger:["click"]},{overlay:f(()=>[n(E,null,{default:f(()=>[n(Q,{fileData:o.value},null,8,["fileData"])]),_:1})]),default:f(()=>[n(z,{iconStr:"info",onClick:H(D=>o.value=l,["stop"]),class:t("absolute left-[250px] md:hidden")},null,8,["onClick"])]),_:2},1024)])],40,Oe))),256))]),e("div",{class:t(["folder-area","ml-[25px] hidden md:ml-0 md:flex md:flex-wrap"])},[(r(!0),h(I,null,j(s.value,l=>(r(),h("div",{class:t(["folder","flex justify-start cursor-pointer hover:bg-slate-100 items-center border-1px mb-[14px] pr-[50px] pl-[25px] rounded-lg w-[100%] h-[48px] lg:w-[30%] lg:mr-[20px] min-w-[222px] 2xl:w-[228px]"]),onContextmenu:D=>N(["ContextMenuFolder",l]),onClick:D=>v(c).sendFileDatil(l),onDblclick:D=>v(c).goToFolder(l.id)},[e("div",Ee,[e("img",{src:l.iconLink,class:t("w-[25px] mr-[10px]")},null,8,Ge),e("div",Re,p(l.name),1)])],40,Be))),256))]),e("div",Ue,[e("div",null,p(d.$t("File")),1)]),e("div",{class:t(["file-area","ml-[25px] md:ml-0 hidden md:flex md:flex-wrap pb-[100px]"])},[(r(!0),h(I,null,j(i.value,(l,D)=>(r(),h("div",{class:t(["file","flex flex-col items-start mb-[14px] rounded-lg w-[100%] h-[40vw] min-w-[200px] min-h-[200px] max-h-[429px] lg:w-[228px] lg:mr-[20px] lg:h-[228px] 2xl:w-[228px] 2xl:h-[228px] justify-start cursor-pointer  border-1px "]),onClick:q=>v(c).sendFileDatil(l),onContextmenu:q=>N(["ContextMenuFile",l]),onDblclick:q=>v(c).openFileView(l.webViewLink)},[e("div",{class:t(["file-outside","h-[100%] w-[100%] set-item-center overflow-hidden"])},[l.thumbnailLink!==void 0?(r(),h("img",{key:0,class:t("scale-125"),src:l.thumbnailLink,referrerPolicy:"no-referrer"},null,8,Ke)):(r(),L(B,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"60",height:"100%"}))]),e("div",{class:t(["img-area","flex basis-[48px] items-center pr-[25px] pl-[25px]"])},[e("img",{src:l.iconLink,class:t("mr-[10px]")},null,8,Ye),e("div",ze,p(l.name),1)])],40,Ae))),256))]),e("div",{class:t(["file-area-mobile","ml-[25px] md:hidden flex flex-wrap pb-[100px]"])},[(r(!0),h(I,null,j(i.value,l=>(r(),h("div",{class:t(["file","flex flex-col items-start mb-[14px] rounded-lg w-[100%] h-[40vw] min-w-[200px] min-h-[200px] max-h-[429px] lg:w-[228px] lg:mr-[20px] lg:h-[228px] 2xl:w-[228px] 2xl:h-[228px] justify-start cursor-pointer  border-1px "])},[e("div",{class:t(["file-outside","h-[100%] w-[100%] set-item-center overflow-hidden"])},[l.thumbnailLink!==void 0?(r(),h("img",{key:0,class:t("scale-125"),src:l.thumbnailLink,referrerPolicy:"no-referrer"},null,8,qe)):(r(),L(B,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"60",height:"100%"}))]),e("div",{class:t(["img-area","flex basis-[48px] items-center pr-[25px] pl-[25px]"])},[e("img",{src:l.iconLink,class:t("mr-[10px]")},null,8,He),e("div",Je,p(l.name),1),n(G,{trigger:["click"],class:t("ml-12")},{overlay:f(()=>[n(E,null,{default:f(()=>[n(J,{fileData:o.value},null,8,["fileData"])]),_:1})]),default:f(()=>[n(z,{iconStr:"info",onClick:H(D=>o.value=l,["stop"])},null,8,["onClick"])]),_:2},1024)])]))),256))])],32)):U("",!0)])])]),_:1})}}},tt=A(Qe,[["__scopeId","data-v-28f06eee"]]);export{tt as default};
