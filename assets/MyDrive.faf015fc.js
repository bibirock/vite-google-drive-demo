import{d as V,r as F,f as c,l as P,w as p,a as e,t as u,y as m,z as ae,D as Z,E as ee,G as te,n as t,c as k,H as Y,q as C,o as ne,s as N,x as n,F as T,_ as z,K as j,N as ie,O as re,B as ce,L as de,A as R,J as Q}from"./index.fdb2478c.js";import{g as B,G as H}from"./googleAPI.beb59a60.js";import{C as ue}from"./ContextMenuPage.d5ec732b.js";import{L as pe}from"./Loading.404e61ec.js";const me={class:t("text-orange-600")},fe={class:t("text-red-600")},ve=["placeholder"],xe={key:0,class:t("text-red-600")},oe=V({__name:"DeleteFileModal",props:{pageState:null},emits:["closeModal"],setup(g,{emit:f}){const v=g,M=new H,b=B(),_=b.$emitter,i=b.$t;async function d(w){await M.toTrashFileByAPI(w),_.emit("show-success-msg",i("File moved to trash")),_.emit("refresh-page")}const l=F(""),x=F(!1);async function s(){if(l.value===v.pageState.name){d(v.pageState.id),f("closeModal");return}x.value=!0}return(w,h)=>{const $=C("a-modal");return c(),P($,{visible:g.pageState.isShowMsg,"onUpdate:visible":h[2]||(h[2]=r=>g.pageState.isShowMsg=r),title:m(i)("Information"),"ok-text":m(i)("OK"),"cancel-text":m(i)("Cancel"),wrapClassName:"newFolderModal",okType:"create",width:"340px",centered:"",onOk:h[3]||(h[3]=r=>s())},{default:p(()=>[e("p",me,u(m(i)("This action will trash your google drive file to Bin, you need to enter file name confrim.")),1),e("p",null,[ae(u(m(i)("Your file name is :"))+" ",1),e("span",fe,u(g.pageState.name),1)]),Z(e("input",{"onUpdate:modelValue":h[0]||(h[0]=r=>l.value=r),onKeyup:h[1]||(h[1]=te(r=>s(),["enter"])),placeholder:m(i)("Please enter file name"),class:t("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,40,ve),[[ee,l.value,void 0,{trim:!0}]]),x.value?(c(),k("span",xe,u(m(i)("Name confrim error")),1)):Y("",!0)]),_:1},8,["visible","title","ok-text","cancel-text"])}}}),le=V({__name:"UpdateFileNameModal",props:{pageState:null},emits:["closeModal"],setup(g,{emit:f}){const v=g,M=new H,b=B(),_=b.$emitter,i=b.$t,d=F(!0);async function l(){if(!d.value)return;d.value=!1;const $=s();(await M.toUpdateFileNameByAPI($)).status===200&&h(),setTimeout(()=>{d.value=!0},2e3)}const x=F("");ne(()=>{x.value=v.pageState.name});function s(){return x.value===""&&(x.value=v.pageState.name),{name:x.value,fileId:v.pageState.id}}function w(){x.value=""}function h(){_.emit("show-success-msg",i("File name update success")),_.emit("refresh-page"),f("closeModal")}return($,r)=>{const O=C("a-modal");return c(),P(O,{visible:g.pageState.isShowMsg,"onUpdate:visible":r[2]||(r[2]=S=>g.pageState.isShowMsg=S),title:m(i)("Rename"),"ok-text":m(i)("OK"),"cancel-text":m(i)("Cancel"),wrapClassName:"newFolderModal",afterClose:w(),okType:"create",width:"340px",centered:"",onOk:r[3]||(r[3]=S=>l())},{default:p(()=>[Z(e("input",{"onUpdate:modelValue":r[0]||(r[0]=S=>g.pageState.name=S),onKeypress:r[1]||(r[1]=te(S=>l(),["enter"])),class:t("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,544),[[ee,g.pageState.name,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}});const ge={class:t("w-[250px]")},_e={class:"control-area"},we={class:"icon"},he={class:"icon"},$e={class:"icon"},ke={class:"icon"},be={class:"control-item"},ye={class:"icon"},Ce=V({__name:"ContextMenuFile",props:{fileData:null},setup(g){const f=g,M=B().$globalFunction,b=N({isShowMsg:!1,name:f.fileData.name,id:f.fileData.id}),_=N({isShowMsg:!1,name:f.fileData.name,id:f.fileData.id});function i(d){window.location.assign(d)}return(d,l)=>{const x=C("custom-icon"),s=C("a-menu-item");return c(),k(T,null,[e("div",ge,[e("div",_e,[n(s,null,{default:p(()=>[e("div",{class:"control-item",onClick:l[0]||(l[0]=w=>m(M).openFileView(g.fileData.webViewLink))},[e("div",we,[n(x,{iconStr:"preview"})]),e("span",null,u(d.$t("Preview")),1)])]),_:1}),n(s,null,{default:p(()=>[e("div",{class:"control-item",onClick:l[1]||(l[1]=w=>i(g.fileData.webContentLink))},[e("div",he,[n(x,{iconStr:"download"})]),e("span",null,u(d.$t("Download")),1)])]),_:1}),n(s,null,{default:p(()=>[e("div",{class:"control-item",onClick:l[2]||(l[2]=w=>_.isShowMsg=!0)},[e("div",$e,[n(x,{iconStr:"rename"})]),e("span",null,u(d.$t("Rename")),1)])]),_:1}),n(s,null,{default:p(()=>[e("div",{class:"control-item",onClick:l[3]||(l[3]=w=>b.isShowMsg=!0)},[e("div",ke,[n(x,{iconStr:"delete"})]),e("span",null,u(d.$t("Delete")),1)])]),_:1}),n(s,null,{default:p(()=>[e("div",be,[e("div",ye,[n(x,{iconStr:"getLink"})]),e("span",null,u(d.$t("Get link")),1)])]),_:1})])]),n(oe,{pageState:b,onCloseModal:l[4]||(l[4]=w=>b.isShowMsg=!1)},null,8,["pageState"]),n(le,{pageState:_,onCloseModal:l[5]||(l[5]=w=>_.isShowMsg=!1)},null,8,["pageState"])],64)}}});const W=z(Ce,[["__scopeId","data-v-a78f8b40"]]),Me={class:t("w-[250px]")},Fe={class:"control-area"},Se={class:"icon"},De={class:"icon"},Le={class:"icon"},Ie=V({__name:"ContextMenuFolder",props:{fileData:null},setup(g){const f=g,v=B(),M=v.$globalFunction,b=v.$emitter,_=v.$t,i=N({isShowMsg:!1,name:f.fileData.name,id:f.fileData.id}),d=N({isShowMsg:!1,name:f.fileData.name,id:f.fileData.id});async function l(){await M.copyLink(f.fileData.webViewLink),b.emit("show-success-msg",_("Link copied to clipboard"))}return(x,s)=>{const w=C("custom-icon"),h=C("a-menu-item");return c(),k(T,null,[e("div",Me,[e("div",Fe,[n(h,null,{default:p(()=>[e("div",{class:"control-item",onClick:s[0]||(s[0]=$=>d.isShowMsg=!0)},[e("div",Se,[n(w,{iconStr:"rename"})]),e("span",null,u(m(_)("Rename")),1)])]),_:1}),n(h,null,{default:p(()=>[e("div",{class:"control-item",onClick:s[1]||(s[1]=$=>i.isShowMsg=!0)},[e("div",De,[n(w,{iconStr:"delete"})]),e("span",null,u(m(_)("Delete")),1)])]),_:1}),n(h,null,{default:p(()=>[e("div",{class:"control-item",onClick:s[2]||(s[2]=$=>l())},[e("div",Le,[n(w,{iconStr:"getLink"})]),e("span",null,u(m(_)("Get link")),1)])]),_:1})])]),n(oe,{pageState:i,onCloseModal:s[3]||(s[3]=$=>i.isShowMsg=!1)},null,8,["pageState"]),n(le,{pageState:d,onCloseModal:s[4]||(s[4]=$=>d.isShowMsg=!1)},null,8,["pageState"])],64)}}});const X=z(Ie,[["__scopeId","data-v-73edb209"]]),Pe={id:"my-drive-page"},Te={class:t("mt-[5px] text-slate-500")},Ne={class:t("ml-[25px] md:ml-0 set-item-between mt-[8px] mb-[16px]  md:pr-[50px]")},Ve={class:"flex"},Be=["onContextmenu","onClick"],Oe={class:t("flex relative")},Ee=["src"],Ge={class:t("truncate flex items-center")},Re=["onContextmenu","onClick","onDblclick"],Ue={class:t("flex relative")},Ae=["src"],Ke={class:t("lg:w-[150px] truncate flex items-center ")},je={class:t("ml-[25px] md:ml-0 set-item-between mt-[8px] mb-[16px] pr-[50px]")},Ye=["onClick","onContextmenu","onDblclick"],ze=["src"],He=["src"],qe={class:t("w-[150px] truncate")},Je=["src"],Qe=["src"],We={class:t("w-[150px] truncate")},Xe=V({__name:"MyDrive",setup(g){const f=B(),v=f.$globalFunction,M=f.$emitter,b=f.$TYPE,_=new H,i=ce(),d=N([{name:"ContextMenuFile",component:j(W)},{name:"ContextMenuFolder",component:j(X)},{name:"ContextMenuPage",component:j(ue)}]),l=N({meuns:d[2].component});ne(()=>{x(),M.on("refresh-page",()=>{x()})}),ie(()=>{M.off("refresh-page")});function x(){if(i.params.folderId===void 0)return w();h(i.params.folderId)}const s=F(!0);re(()=>i.params.folderId,a=>{if(s.value=!0,v.sendFileDatil(void 0),a===void 0)return w();h(a)});async function w(){const a=await _.getDriveRootListByAPI();O(a)}async function h(a){const y=await _.getFolderItemByAPI(a);O(y)}const $=F([]),r=F([]);function O(a){$.value=S(a),r.value=S(a,!0),s.value=!1}function S(a,y=!1){if(y===!1)return a==null?void 0:a.filter(L=>L.mimeType===b.GOOGLE_FOLDER);if(y===!0)return a==null?void 0:a.filter(L=>L.mimeType!==b.GOOGLE_FOLDER)}const D=F({});function E(a){var y;if(a===void 0){l.meuns=d[2].component,D.value={};return}D.value=a[1],l.meuns=(y=d.find(L=>L.name==a[0]))==null?void 0:y.component}const G=F("akar-icons:arrow-up");function se(){$.value.reverse(),r.value.reverse(),G.value==="akar-icons:arrow-up"?G.value="akar-icons:arrow-down":G.value="akar-icons:arrow-up"}return(a,y)=>{const L=C("Icon"),U=C("icon"),A=C("a-menu"),q=C("custom-icon"),K=C("a-dropdown");return c(),P(K,{trigger:["contextmenu"]},{overlay:p(()=>[n(A,null,{default:p(()=>[(c(),P(de(l.meuns),{key:l.meuns,fileData:D.value},null,8,["fileData"]))]),_:1})]),default:p(()=>[e("div",null,[e("div",Pe,[$.value.length===0&&r.value.length===0&&!s.value?(c(),k("div",{key:0,class:t(["empty-folder","set-item-center flex-col h-screen mt-[-50px]"])},[n(L,{icon:"fluent-emoji-high-contrast:open-file-folder",class:t("opacity-90"),color:"#6f6f6f",width:"100",height:"100"}),e("span",Te,u(a.$t("Empty folder you can use new")),1)])):Y("",!0),s.value?(c(),P(pe,{key:1})):$.value.length!==0||r.value.length!==0?(c(),k("div",{key:2,class:t(["page-content","pr-[20px]"]),onContextmenuCapture:y[1]||(y[1]=o=>E(void 0))},[e("div",Ne,[e("div",null,u(a.$t("Folder")),1),e("div",Ve,[e("div",null,u(a.$t("Name")),1),n(U,{onClick:y[0]||(y[0]=o=>se()),icon:G.value,width:"20",height:"20",class:t("ml-[6px] cursor-pointer")},null,8,["icon"])])]),e("div",{class:t(["folder-mobile","ml-[25px]h md:hidden flex flex-wrap"])},[(c(!0),k(T,null,R($.value,o=>(c(),k("div",{class:t(["folder","flex justify-start cursor-pointer hover:bg-slate-100 items-center border-1px mb-[14px] pr-[50px] pl-[25px] rounded-lg w-[100%] h-[48px]"]),onContextmenu:I=>E(["ContextMenuFolder",o]),onClick:I=>m(v).goToFolder(o.id)},[e("div",Oe,[e("img",{src:o.iconLink,class:t("w-[25px] mr-[10px]")},null,8,Ee),e("div",Ge,u(o.name),1),n(K,{trigger:["click"]},{overlay:p(()=>[n(A,null,{default:p(()=>[n(X,{fileData:D.value},null,8,["fileData"])]),_:1})]),default:p(()=>[n(q,{iconStr:"info",onClick:Q(I=>D.value=o,["stop"]),class:t("absolute left-[250px] md:hidden")},null,8,["onClick"])]),_:2},1024)])],40,Be))),256))]),e("div",{class:t(["folder-area","ml-[25px] hidden md:ml-0 md:flex md:flex-wrap"])},[(c(!0),k(T,null,R($.value,o=>(c(),k("div",{class:t(["folder","flex justify-start cursor-pointer hover:bg-slate-100 items-center border-1px mb-[14px] pr-[50px] pl-[25px] rounded-lg w-[100%] h-[48px] lg:w-[30%] lg:mr-[20px] min-w-[222px] 2xl:w-[228px]"]),onContextmenu:I=>E(["ContextMenuFolder",o]),onClick:I=>m(v).sendFileDatil(o),onDblclick:I=>m(v).goToFolder(o.id)},[e("div",Ue,[e("img",{src:o.iconLink,class:t("w-[25px] mr-[10px]")},null,8,Ae),e("div",Ke,u(o.name),1)])],40,Re))),256))]),e("div",je,[e("div",null,u(a.$t("File")),1)]),e("div",{class:t(["file-area","ml-[25px] md:ml-0 hidden md:flex md:flex-wrap pb-[100px]"])},[(c(!0),k(T,null,R(r.value,(o,I)=>(c(),k("div",{class:t(["file","flex flex-col items-start mb-[14px] rounded-lg w-[100%] h-[40vw] min-w-[200px] min-h-[200px] max-h-[429px] lg:w-[228px] lg:mr-[20px] lg:h-[228px] 2xl:w-[228px] 2xl:h-[228px] justify-start cursor-pointer  border-1px "]),onClick:J=>m(v).sendFileDatil(o),onContextmenu:J=>E(["ContextMenuFile",o]),onDblclick:J=>m(v).openFileView(o.webViewLink)},[e("div",{class:t(["file-outside","h-[100%] w-[100%] set-item-center overflow-hidden"])},[o.thumbnailLink!==void 0?(c(),k("img",{key:0,class:t("scale-125"),src:o.thumbnailLink,referrerPolicy:"no-referrer"},null,8,ze)):(c(),P(U,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"60",height:"100%"}))]),e("div",{class:t(["img-area","flex basis-[48px] items-center pr-[25px] pl-[25px]"])},[e("img",{src:o.iconLink,class:t("mr-[10px]")},null,8,He),e("div",qe,u(o.name),1)])],40,Ye))),256))]),e("div",{class:t(["file-area-mobile","ml-[25px] md:hidden flex flex-wrap pb-[100px]"])},[(c(!0),k(T,null,R(r.value,o=>(c(),k("div",{class:t(["file","flex flex-col items-start mb-[14px] rounded-lg w-[100%] h-[40vw] min-w-[200px] min-h-[200px] max-h-[429px] lg:w-[228px] lg:mr-[20px] lg:h-[228px] 2xl:w-[228px] 2xl:h-[228px] justify-start cursor-pointer  border-1px "])},[e("div",{class:t(["file-outside","h-[100%] w-[100%] set-item-center overflow-hidden"])},[o.thumbnailLink!==void 0?(c(),k("img",{key:0,class:t("scale-125"),src:o.thumbnailLink,referrerPolicy:"no-referrer"},null,8,Je)):(c(),P(U,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"60",height:"100%"}))]),e("div",{class:t(["img-area","flex basis-[48px] items-center pr-[25px] pl-[25px]"])},[e("img",{src:o.iconLink,class:t("mr-[10px]")},null,8,Qe),e("div",We,u(o.name),1),n(K,{trigger:["click"],class:t("ml-12")},{overlay:p(()=>[n(A,null,{default:p(()=>[n(W,{fileData:D.value},null,8,["fileData"])]),_:1})]),default:p(()=>[n(q,{iconStr:"info",onClick:Q(I=>D.value=o,["stop"])},null,8,["onClick"])]),_:2},1024)])]))),256))])],32)):Y("",!0)])])]),_:1})}}});const ot=z(Xe,[["__scopeId","data-v-2ac31432"]]);export{ot as default};
