import{d as O,r as F,f as u,l as P,w as f,a as e,t as m,y as i,z as de,D as oe,E as le,G as se,n as t,c as b,H as Y,q as C,o as ae,s as N,x as n,F as T,_ as z,K as j,N as ue,O as pe,B as me,L as fe,A as R,J as ee}from"./index.97bf3a39.js";import{g as V,G as H}from"./googleAPI.37ed9f66.js";import{C as ve}from"./ContextMenuPage.1ccaac77.js";import{L as xe}from"./LoadingIcon.de57448c.js";const ge={class:t("text-orange-600")},_e={class:t("text-red-600")},we=["placeholder"],he={key:0,class:t("text-red-600")},ie=O({__name:"DeleteFileModal",props:{pageState:null},emits:["closeModal"],setup(g,{emit:v}){const r=g,M=new H,y=V(),_=y.$emitter,c=y.$t;async function p(w){await M.toTrashFileByAPI(w),_.emit("show-success-msg",c("File moved to trash")),_.emit("refresh-page")}const s=F(""),x=F(!1);async function a(){if(s.value===r.pageState.name){p(r.pageState.id),v("closeModal");return}x.value=!0}return(w,h)=>{const $=C("a-modal");return u(),P($,{visible:g.pageState.isShowMsg,"onUpdate:visible":h[2]||(h[2]=d=>g.pageState.isShowMsg=d),title:i(c)("Information"),"ok-text":i(c)("OK"),"cancel-text":i(c)("Cancel"),wrapClassName:"newFolderModal",okType:"create",width:"340px",centered:"",onOk:h[3]||(h[3]=d=>a())},{default:f(()=>[e("p",ge,m(i(c)("This action will trash your google drive file to Bin, you need to enter file name confrim.")),1),e("p",null,[de(m(i(c)("Your file name is :"))+" ",1),e("span",_e,m(g.pageState.name),1)]),oe(e("input",{"onUpdate:modelValue":h[0]||(h[0]=d=>s.value=d),onKeyup:h[1]||(h[1]=se(d=>a(),["enter"])),placeholder:i(c)("Please enter file name"),class:t("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,40,we),[[le,s.value,void 0,{trim:!0}]]),x.value?(u(),b("span",he,m(i(c)("Name confrim error")),1)):Y("",!0)]),_:1},8,["visible","title","ok-text","cancel-text"])}}}),re=O({__name:"UpdateFileNameModal",props:{pageState:null},emits:["closeModal"],setup(g,{emit:v}){const r=g,M=new H,y=V(),_=y.$emitter,c=y.$t,p=F(!0);async function s(){if(!p.value)return;p.value=!1;const $=a();(await M.toUpdateFileNameByAPI($)).status===200&&h(),setTimeout(()=>{p.value=!0},2e3)}const x=F("");ae(()=>{x.value=r.pageState.name});function a(){return x.value===""&&(x.value=r.pageState.name),{name:x.value,fileId:r.pageState.id}}function w(){x.value=""}function h(){_.emit("show-success-msg",c("File name update success")),_.emit("refresh-page"),v("closeModal")}return($,d)=>{const B=C("a-modal");return u(),P(B,{visible:g.pageState.isShowMsg,"onUpdate:visible":d[2]||(d[2]=S=>g.pageState.isShowMsg=S),title:i(c)("Rename"),"ok-text":i(c)("OK"),"cancel-text":i(c)("Cancel"),wrapClassName:"newFolderModal",afterClose:w(),okType:"create",width:"340px",centered:"",onOk:d[3]||(d[3]=S=>s())},{default:f(()=>[oe(e("input",{"onUpdate:modelValue":d[0]||(d[0]=S=>g.pageState.name=S),onKeypress:d[1]||(d[1]=se(S=>s(),["enter"])),class:t("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,544),[[le,g.pageState.name,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}});const $e={class:t("w-[250px]")},ke={class:"control-area"},be={class:"icon"},ye={class:"icon"},Ce={class:"icon"},Me={class:"icon"},Fe={class:"control-item"},Se={class:"icon"},De=O({__name:"ContextMenuFile",props:{fileData:null},setup(g){const v=g,M=V().$globalFunction,y=N({isShowMsg:!1,name:v.fileData.name,id:v.fileData.id}),_=N({isShowMsg:!1,name:v.fileData.name,id:v.fileData.id});function c(p){window.location.assign(p)}return(p,s)=>{const x=C("custom-icon"),a=C("a-menu-item");return u(),b(T,null,[e("div",$e,[e("div",ke,[n(a,null,{default:f(()=>[e("div",{class:"control-item",onClick:s[0]||(s[0]=w=>i(M).openFileView(g.fileData.webViewLink))},[e("div",be,[n(x,{iconStr:"preview"})]),e("span",null,m(p.$t("Preview")),1)])]),_:1}),n(a,null,{default:f(()=>[e("div",{class:"control-item",onClick:s[1]||(s[1]=w=>c(g.fileData.webContentLink))},[e("div",ye,[n(x,{iconStr:"download"})]),e("span",null,m(p.$t("Download")),1)])]),_:1}),n(a,null,{default:f(()=>[e("div",{class:"control-item",onClick:s[2]||(s[2]=w=>_.isShowMsg=!0)},[e("div",Ce,[n(x,{iconStr:"rename"})]),e("span",null,m(p.$t("Rename")),1)])]),_:1}),n(a,null,{default:f(()=>[e("div",{class:"control-item",onClick:s[3]||(s[3]=w=>y.isShowMsg=!0)},[e("div",Me,[n(x,{iconStr:"delete"})]),e("span",null,m(p.$t("Delete")),1)])]),_:1}),n(a,null,{default:f(()=>[e("div",Fe,[e("div",Se,[n(x,{iconStr:"getLink"})]),e("span",null,m(p.$t("Get link")),1)])]),_:1})])]),n(ie,{pageState:y,onCloseModal:s[4]||(s[4]=w=>y.isShowMsg=!1)},null,8,["pageState"]),n(re,{pageState:_,onCloseModal:s[5]||(s[5]=w=>_.isShowMsg=!1)},null,8,["pageState"])],64)}}});const te=z(De,[["__scopeId","data-v-b80b4f4c"]]),Le={class:t("w-[250px]")},Ie={class:"control-area"},Pe={class:"icon"},Te={class:"icon"},Ne={class:"icon"},Oe=O({__name:"ContextMenuFolder",props:{fileData:null},setup(g){const v=g,r=V(),M=r.$globalFunction,y=r.$emitter,_=r.$t,c=N({isShowMsg:!1,name:v.fileData.name,id:v.fileData.id}),p=N({isShowMsg:!1,name:v.fileData.name,id:v.fileData.id});async function s(){await M.copyLink(v.fileData.webViewLink),y.emit("show-success-msg",_("Link copied to clipboard"))}return(x,a)=>{const w=C("custom-icon"),h=C("a-menu-item");return u(),b(T,null,[e("div",Le,[e("div",Ie,[n(h,null,{default:f(()=>[e("div",{class:"control-item",onClick:a[0]||(a[0]=$=>p.isShowMsg=!0)},[e("div",Pe,[n(w,{iconStr:"rename"})]),e("span",null,m(i(_)("Rename")),1)])]),_:1}),n(h,null,{default:f(()=>[e("div",{class:"control-item",onClick:a[1]||(a[1]=$=>c.isShowMsg=!0)},[e("div",Te,[n(w,{iconStr:"delete"})]),e("span",null,m(i(_)("Delete")),1)])]),_:1}),n(h,null,{default:f(()=>[e("div",{class:"control-item",onClick:a[2]||(a[2]=$=>s())},[e("div",Ne,[n(w,{iconStr:"getLink"})]),e("span",null,m(i(_)("Get link")),1)])]),_:1})])]),n(ie,{pageState:c,onCloseModal:a[3]||(a[3]=$=>c.isShowMsg=!1)},null,8,["pageState"]),n(re,{pageState:p,onCloseModal:a[4]||(a[4]=$=>p.isShowMsg=!1)},null,8,["pageState"])],64)}}});const ne=z(Oe,[["__scopeId","data-v-c3370894"]]),Ve={id:"my-drive-page"},Be={class:t("mt-[5px] text-slate-500")},Ee={class:t("ml-[25px] md:ml-0 set-item-between mt-[8px] mb-[16px]  md:pr-[50px]")},Ge={class:"flex"},Re=["onContextmenu","onClick"],Ue={class:t("flex relative")},Ae=["src"],Ke={class:t("truncate flex items-center")},je=["onContextmenu","onClick","onDblclick"],Ye={class:t("flex relative")},ze=["src"],He={class:t("lg:w-[150px] truncate flex items-center ")},qe={class:t("ml-[25px] md:ml-0 set-item-between mt-[8px] mb-[16px] pr-[50px]")},Je=["onClick","onContextmenu","onDblclick"],Qe=["src"],We=["src"],Xe={class:t("w-[150px] truncate")},Ze=["src"],et=["src"],tt={class:t("w-[150px] truncate")},nt=O({__name:"MyDrive",setup(g){const v=V(),r=v.$globalFunction,M=v.$emitter,y=v.$TYPE,_=new H,c=me(),p=N([{name:"ContextMenuFile",component:j(te)},{name:"ContextMenuFolder",component:j(ne)},{name:"ContextMenuPage",component:j(ve)}]),s=N({meuns:p[2].component});ae(()=>{x(),M.on("refresh-page",()=>{x()})}),ue(()=>{M.off("refresh-page")});function x(){if(c.params.folderId===void 0)return w();h(c.params.folderId)}const a=F(!0);pe(()=>c.params.folderId,o=>{if(a.value=!0,r.sendFileDatil(void 0),o===void 0)return w();h(o)});async function w(){const o=await _.getDriveRootListByAPI();B(o)}async function h(o){const k=await _.getFolderItemByAPI(o);B(k)}const $=F(),d=F();function B(o){$.value=S(o),d.value=S(o,!0),a.value=!1}function S(o,k=!1){if(k===!1)return o==null?void 0:o.filter(L=>L.mimeType===y.GOOGLE_FOLDER);if(k===!0)return o==null?void 0:o.filter(L=>L.mimeType!==y.GOOGLE_FOLDER)}const D=F();function E(o){var k;if(o[0]==="toOmit"){s.meuns=p[2].component,D.value={};return}D.value=o[1],s.meuns=(k=p.find(L=>L.name==o[0]))==null?void 0:k.component}const G=F("akar-icons:arrow-up");function ce(){var o,k;(o=$.value)==null||o.reverse(),(k=d.value)==null||k.reverse(),G.value==="akar-icons:arrow-up"?G.value="akar-icons:arrow-down":G.value="akar-icons:arrow-up"}return(o,k)=>{const L=C("Icon"),U=C("icon"),A=C("a-menu"),q=C("custom-icon"),K=C("a-dropdown");return u(),P(K,{trigger:["contextmenu"]},{overlay:f(()=>[n(A,null,{default:f(()=>[(u(),P(fe(s.meuns),{key:s.meuns,fileData:D.value},null,8,["fileData"]))]),_:1})]),default:f(()=>{var J,Q,W,X;return[e("div",null,[e("div",Ve,[((J=$.value)==null?void 0:J.length)===0&&((Q=d.value)==null?void 0:Q.length)===0&&!a.value?(u(),b("div",{key:0,class:t(["empty-folder","set-item-center flex-col h-screen mt-[-50px]"])},[n(L,{icon:"fluent-emoji-high-contrast:open-file-folder",class:t("opacity-90"),color:"#6f6f6f",width:"100",height:"100"}),e("span",Be,m(o.$t("Empty folder you can use new")),1)])):Y("",!0),a.value?(u(),P(xe,{key:1})):((W=$.value)==null?void 0:W.length)!==0||((X=d.value)==null?void 0:X.length)!==0?(u(),b("div",{key:2,class:t(["page-content","pr-[20px]"]),onContextmenuCapture:k[1]||(k[1]=l=>E(["toOmit"]))},[e("div",Ee,[e("div",null,m(o.$t("Folder")),1),e("div",Ge,[e("div",null,m(o.$t("Name")),1),n(U,{onClick:k[0]||(k[0]=l=>ce()),icon:G.value,width:"20",height:"20",class:t("ml-[6px] cursor-pointer")},null,8,["icon"])])]),e("div",{class:t(["folder-mobile","ml-[25px]h md:hidden flex flex-wrap"])},[(u(!0),b(T,null,R($.value,l=>(u(),b("div",{class:t(["folder","flex justify-start cursor-pointer hover:bg-slate-100 items-center border-1px mb-[14px] pr-[50px] pl-[25px] rounded-lg w-[100%] h-[48px]"]),onContextmenu:I=>E(["ContextMenuFolder",l]),onClick:I=>i(r).goToFolder(l.id)},[e("div",Ue,[e("img",{src:i(r).setIcon(l.iconLink),class:t("w-[25px] mr-[10px]")},null,8,Ae),e("div",Ke,m(l.name),1),n(K,{trigger:["click"]},{overlay:f(()=>[n(A,null,{default:f(()=>[n(ne,{fileData:D.value},null,8,["fileData"])]),_:1})]),default:f(()=>[n(q,{iconStr:"info",onClick:ee(I=>D.value=l,["stop"]),class:t("absolute left-[250px] md:hidden")},null,8,["onClick"])]),_:2},1024)])],40,Re))),256))]),e("div",{class:t(["folder-area","ml-[25px] hidden md:ml-0 md:flex md:flex-wrap"])},[(u(!0),b(T,null,R($.value,l=>(u(),b("div",{class:t(["folder","flex justify-start cursor-pointer hover:bg-slate-100 items-center border-1px mb-[14px] pr-[50px] pl-[25px] rounded-lg w-[100%] h-[48px] lg:w-[30%] lg:mr-[20px] min-w-[222px] 2xl:w-[228px]"]),onContextmenu:I=>E(["ContextMenuFolder",l]),onClick:I=>i(r).sendFileDatil(l),onDblclick:I=>i(r).goToFolder(l.id)},[e("div",Ye,[e("img",{src:i(r).setIcon(l.iconLink),class:t("w-[25px] mr-[10px]")},null,8,ze),e("div",He,m(l.name),1)])],40,je))),256))]),e("div",qe,[e("div",null,m(o.$t("File")),1)]),e("div",{class:t(["file-area","ml-[25px] md:ml-0 hidden md:flex md:flex-wrap pb-[100px]"])},[(u(!0),b(T,null,R(d.value,(l,I)=>(u(),b("div",{class:t(["file","flex flex-col items-start mb-[14px] rounded-lg w-[100%] h-[40vw] min-w-[200px] min-h-[200px] max-h-[429px] lg:w-[228px] lg:mr-[20px] lg:h-[228px] 2xl:w-[228px] 2xl:h-[228px] justify-start cursor-pointer  border-1px "]),onClick:Z=>i(r).sendFileDatil(l),onContextmenu:Z=>E(["ContextMenuFile",l]),onDblclick:Z=>i(r).openFileView(l.webViewLink)},[e("div",{class:t(["file-outside","h-[100%] w-[100%] set-item-center overflow-hidden"])},[l.thumbnailLink!==void 0?(u(),b("img",{key:0,class:t("scale-125"),src:i(r).setIcon(l.thumbnailLink),referrerPolicy:"no-referrer"},null,8,Qe)):(u(),P(U,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"60",height:"100%"}))]),e("div",{class:t(["img-area","flex basis-[48px] items-center pr-[25px] pl-[25px]"])},[e("img",{src:i(r).setIcon(l.iconLink),class:t("mr-[10px]")},null,8,We),e("div",Xe,m(l.name),1)])],40,Je))),256))]),e("div",{class:t(["file-area-mobile","ml-[25px] md:hidden flex flex-wrap pb-[100px]"])},[(u(!0),b(T,null,R(d.value,l=>(u(),b("div",{class:t(["file","flex flex-col items-start mb-[14px] rounded-lg w-[100%] h-[40vw] min-w-[200px] min-h-[200px] max-h-[429px] lg:w-[228px] lg:mr-[20px] lg:h-[228px] 2xl:w-[228px] 2xl:h-[228px] justify-start cursor-pointer  border-1px "])},[e("div",{class:t(["file-outside","h-[100%] w-[100%] set-item-center overflow-hidden"])},[l.thumbnailLink!==void 0?(u(),b("img",{key:0,class:t("scale-125"),src:i(r).setIcon(l.thumbnailLink),referrerPolicy:"no-referrer"},null,8,Ze)):(u(),P(U,{key:1,icon:"fluent:image-prohibited-20-regular",color:"grayText",width:"60",height:"100%"}))]),e("div",{class:t(["img-area","flex basis-[48px] items-center pr-[25px] pl-[25px]"])},[e("img",{src:i(r).setIcon(l.iconLink),class:t("mr-[10px]")},null,8,et),e("div",tt,m(l.name),1),n(K,{trigger:["click"],class:t("ml-12")},{overlay:f(()=>[n(A,null,{default:f(()=>[n(te,{fileData:D.value},null,8,["fileData"])]),_:1})]),default:f(()=>[n(q,{iconStr:"info",onClick:ee(I=>D.value=l,["stop"])},null,8,["onClick"])]),_:2},1024)])]))),256))])],32)):Y("",!0)])])]}),_:1})}}});const it=z(nt,[["__scopeId","data-v-23cad960"]]);export{it as default};
