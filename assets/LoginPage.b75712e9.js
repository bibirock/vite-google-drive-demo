import{_ as d}from"./vite-drive.c72a7c9b.js";import{r as b,o as h,c as r,a as n,n as i,t as x,b as l,p as y,d as k,u as w,e as S}from"./index.3ccc0ac7.js";import{_ as I,l as C,G as A}from"./plugin-vueexport-helper.17cddac2.js";const G="/vite-google-drive-demo/assets/noSupport.50da7ab3.png";const B=t=>(y("data-v-9edb82a7"),t=t(),k(),t),D={key:0},P=S('<article class="flex h-screen w-screen justify-center flex-col items-center" data-v-9edb82a7><img src="'+d+'" class="mb-[20px]" data-v-9edb82a7><p class="mx-auto px-[15px]" data-v-9edb82a7>\u60A8\u6240\u4F7F\u7528\u7684\u5167\u5D4C\u5F0F\u700F\u89BD\u5668\u4E26\u4E0D\u652F\u63F4Google OAuth\u767B\u5165\u653F\u7B56\uFF0C\u8ACB\u4F7F\u7528\u7DB2\u9801\u700F\u89BD\u5668\u958B\u555F\u6B64Demo Web</p><p data-v-9edb82a7>Google OAuth</p><img src="'+G+'" class="w-[95%]" data-v-9edb82a7><a href="https://developers.googleblog.com/2016/08/modernizing-oauth-interactions-in-native-apps.html?fbclid=IwAR2KDyMTyHkv1iik96VarrFpfjp8Y6T78J1_sYwV30FV_Uo0ITV0WZw2LYY" data-v-9edb82a7>\u8A73\u60C5\u8ACB\u898B</a></article>',1),L=[P],T={key:1},V={class:i("flex h-screen w-screen justify-center flex-col items-center")},Y=B(()=>n("img",{src:d,class:i("mb-[20px]")},null,-1)),j={__name:"LoginPage",setup(t){const{userAgent:o}=navigator,p=new A,a=C(),u=w(),c=b(!1);h(()=>{_()});function _(){o.includes("Firefox/")||o.includes("Edg/")||o.includes("Chrome/")||o.includes("Safari/")||(c.value=!0)}function g(){return google.accounts.oauth2.initCodeClient({client_id:a.googleClientData.clientId,scope:a.googleClientData.scope,ux_mode:"popup",redirecut_uri:a.googleClientData.redirecutURL,callback:f})}function m(){g().requestCode()}async function f(s,e=null){e=await p.getAccountTokenByAPI(s.code),a.changeTokenData(e.data),v(e.data)}function v(s){u.replace("drive"),window.sessionStorage.setItem("token",JSON.stringify(s))}return(s,e)=>c.value?(l(),r("div",D,L)):(l(),r("div",T,[n("article",V,[Y,n("button",{class:i("border-2 border-slate-500 h-13 p-2 px-5 hover:text-sky-400 hover:border-sky-400 rounded-lg text-slate-500"),onClick:e[0]||(e[0]=F=>m())},x("\u767B\u5165Google\u4EE5\u4F7F\u7528\u96F2\u7AEF\u786C\u789F"))])]))}},z=I(j,[["__scopeId","data-v-9edb82a7"]]);export{z as default};
