import{d as I,r as _,f as M,l as N,w as C,D as P,E as A,a,G as D,y as d,n as y,B as b,q as $,s as E,c as S,x as f,t as k,F as R,_ as G}from"./index.8ffe8cec.js";import{g as U,G as B}from"./googleAPI.55bc1169.js";const K=["placeholder"],T=I({__name:"CreateFolderModal",props:{pageState:null},emits:["closeModal"],setup(h,{emit:v}){const r=U(),i=r.$emitter,n=r.$t,x=new B,u=b(),g=_(!1),l=_(""),p=_(!0);async function w(){if(!p.value)return;p.value=!1;const e=F();(await x.createFolderByAPI(e)).status===200&&s(),setTimeout(()=>{p.value=!0},2e3)}function F(){const e=[];return l.value===""&&(l.value="Untitled"),u.params.folderId!==void 0&&e.push(u.params.folderId),{name:l.value,parents:e}}function m(){l.value=""}function s(){g.value=!1,i.emit("show-success-msg",n("Folder create success")),i.emit("refresh-page"),v("closeModal")}return(e,t)=>{const c=$("a-modal");return M(),N(c,{visible:h.pageState.isShowMsg,"onUpdate:visible":t[2]||(t[2]=o=>h.pageState.isShowMsg=o),title:d(n)("New folder"),"ok-text":d(n)("Create"),"cancel-text":d(n)("Cancel"),wrapClassName:"newFolderModal",afterClose:m(),okType:"create",width:"340px",centered:"",onOk:t[3]||(t[3]=o=>w())},{default:C(()=>[P(a("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),onKeypress:t[1]||(t[1]=D(o=>w(),["enter"])),placeholder:d(n)("Untitled folder"),class:y("w-[100%] px-[10px] h-[40px] rounded-md border-2 border-slate-300 hover:border-slate-400 active:border-sky-400")},null,40,K),[[A,l.value,void 0,{trim:!0}]])]),_:1},8,["visible","title","ok-text","cancel-text","afterClose"])}}});const V={class:y("w-[250px]")},q={class:"control-area"},z={class:"icon"},H={form:"fileUpload",class:y("cursor-pointer")},L={class:"control-item"},O={class:"icon"},j=I({__name:"ContextMenuPage",props:{fileData:null},setup(h){const v=U(),r=v.$t,i=v.$emitter,n=b(),x=new B,u=_(),g=_(0);function l(){const s=new FileReader,e=u.value,t=e==null?void 0:e.files;s.readAsArrayBuffer(t[0]),s.onload=async c=>{var o;p(t[0].name,(o=c.target)==null?void 0:o.result)}}async function p(s,e){const t={name:s,parents:n.params.folderId===void 0?[]:[n.params.folderId]};w(t,e),g.value+=1}async function w(s,e){i.emit("show-upload-progress"),(await x.toUploadFileByAPI(s,e)).status===200&&F(s)}function F(s){i.emit("refresh-page"),i.emit("show-success-msg",r("File upload success, your file name is")+":"+s.name)}const m=E({isShowMsg:!1});return(s,e)=>{const t=$("custom-icon"),c=$("a-menu-item");return M(),S(R,null,[a("div",V,[a("div",q,[f(c,null,{default:C(()=>[a("div",{class:"control-item",onClick:e[0]||(e[0]=o=>m.isShowMsg=!0)},[a("div",z,[f(t,{iconStr:"newFolder"})]),a("span",null,k(d(r)("New folder")),1)])]),_:1}),f(c,null,{default:C(()=>[a("label",H,[a("div",L,[a("div",O,[f(t,{iconStr:"fileUpload"})]),a("span",null,k(d(r)("File upload")),1),(M(),S("input",{key:g.value,type:"file",id:"fileUpload",multiple:"",class:y("hidden"),onChange:e[1]||(e[1]=o=>l()),ref_key:"inputElement",ref:u},null,32))])])]),_:1})])]),f(T,{pageState:m,onCloseModal:e[2]||(e[2]=o=>m.isShowMsg=!1)},null,8,["pageState"])],64)}}});const W=G(j,[["__scopeId","data-v-5d9ac02e"]]);export{W as C};
